{"version":3,"file":"WebChat.stories-f7dee29d.js","sources":["../../src/components/web-chat/WebChat.vue"],"sourcesContent":["<template>\r\n  <div\r\n    v-if=\"webChatUrl && webChatReason\"\r\n    id=\"web-chat-container\"\r\n  >\r\n    <v-form\r\n      id=\"webchat\"\r\n      target=\"webchat_window\"\r\n      method=\"post\"\r\n      :action=\"webChatUrl\"\r\n      @submit=\"onSubmit()\"\r\n    >\r\n      <input\r\n        type=\"hidden\"\r\n        name=\"Reason\"\r\n        :value=\"webChatReason\"\r\n      >\r\n      <input\r\n        type=\"hidden\"\r\n        name=\"UserLanguage\"\r\n        value=\"en\"\r\n      >\r\n      <input\r\n        type=\"hidden\"\r\n        name=\"Parameters[TimeZoneOffset]\"\r\n        :value=\"timeZoneOffset\"\r\n      >\r\n\r\n      <v-tooltip\r\n        top\r\n        content-class=\"top-tooltip\"\r\n        nudge-top=\"5\"\r\n        :disabled=\"isMobile\"\r\n      >\r\n        <template #activator=\"{ on, attrs }\">\r\n          <div\r\n            id=\"chat-button-wrapper\"\r\n            v-bind=\"attrs\"\r\n            v-on=\"on\"\r\n          >\r\n            <v-btn\r\n              :disabled=\"(chatStatus !== 'open')\"\r\n              large\r\n              outlined\r\n              color=\"bcgovblue\"\r\n              elevation=\"4\"\r\n              class=\"chat-button\"\r\n              type=\"submit\"\r\n              v-bind=\"attrs\"\r\n              aria-label=\"Chat with Helpdesk staff\"\r\n              v-on=\"on\"\r\n            >\r\n              <v-icon class=\"mr-2 ml-n2\">\r\n                mdi-forum-outline\r\n              </v-icon>\r\n              <span class=\"font-weight-bold\">Chat</span>\r\n            </v-btn>\r\n          </div>\r\n        </template>\r\n        <span\r\n          v-if=\"chatStatus === 'open'\"\r\n          id=\"open-tooltip-message\"\r\n        >\r\n          {{ openTooltipMessage }}\r\n        </span>\r\n        <span\r\n          v-else-if=\"chatStatus === 'closed'\"\r\n          id=\"closed-tooltip-message\"\r\n        >\r\n          {{ closedTooltipMessage }}\r\n        </span>\r\n        <span\r\n          v-else\r\n          id=\"unavailable-tooltip-message\"\r\n        >\r\n          {{ unavailableTooltipMessage }}\r\n        </span>\r\n      </v-tooltip>\r\n    </v-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue from 'vue'\r\nimport { Component, Prop } from 'vue-property-decorator'\r\n\r\n@Component({})\r\nexport default class ChatPopup extends Vue {\r\n  @Prop({ required: true }) readonly axios!: any\r\n  @Prop({ default: false }) readonly isMobile!: boolean\r\n  @Prop({ default: null }) readonly webChatReason!: string\r\n  @Prop({ default: null }) readonly webChatStatusUrl!: string\r\n  @Prop({ default: null }) readonly webChatUrl!: string\r\n\r\n  @Prop({ default: 'Click here to chat live with Helpdesk staff.' })\r\n  readonly openTooltipMessage!: string\r\n\r\n  @Prop({ default: 'We are closed. The Service BC Contact Centre is open Monday through ' +\r\n    'Friday 7:30am â€“ 5:00pm Pacific Time excluding BC statutory holidays.' })\r\n  readonly closedTooltipMessage!: string\r\n\r\n  @Prop({ default: 'Webchat is temporarily unavailable.' })\r\n  readonly unavailableTooltipMessage!: string\r\n\r\n  protected chatStatus = 'unknown'\r\n\r\n  /** The user's browser's tz offset (not necessarily Pacific time). */\r\n  get timeZoneOffset (): number {\r\n    return (new Date().getTimezoneOffset() / 60)\r\n  }\r\n\r\n  /** Called when component is mounted. */\r\n  async mounted (): Promise<void> {\r\n    if (this.webChatStatusUrl) {\r\n      this.chatStatus = await this.axios\r\n        .get(this.webChatStatusUrl)\r\n        .then(response => {\r\n          return (response.data?.status || 'response error')\r\n        })\r\n        .catch(error => {\r\n          // eslint-disable-next-line no-console\r\n          console.error('failed to get webchat status, error =', error)\r\n          return (error.response?.statusText || 'network error')\r\n        })\r\n    }\r\n  }\r\n\r\n  protected onSubmit (): void {\r\n    window.open('about:blank', 'webchat_window', 'width=400, height=500')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import '@/assets/styles/theme.scss';\r\n\r\n#web-chat-container {\r\n  position: fixed;\r\n  bottom: -1px;\r\n  right: 1rem;\r\n  z-index: 999;\r\n}\r\n\r\n.chat-button {\r\n  margin-bottom: -1px;\r\n  min-height: 40px;\r\n  border-bottom-right-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n  background-color: white !important;\r\n}\r\n\r\n.v-tooltip__content {\r\n  padding: 1rem !important;\r\n  background-color: rgba(0,0,0,0.85) !important;\r\n}\r\n\r\n.top-tooltip {\r\n  max-width: 12rem;\r\n}\r\n\r\n.top-tooltip:after {\r\n  border-top: 8px solid rgba(0,0,0,0.85) !important;\r\n}\r\n\r\n.bcgovblue--text {\r\n  color: $BCgovBlue5 !important;\r\n  caret-color: $BCgovBlue5 !important;\r\n}\r\n</style>\r\n"],"names":["ChatPopup","Vue","__publicField","response","_a","error","__decorateClass","Prop","Component"],"mappings":"snBAuFA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCACAC,EAAA,cACAA,EAAA,iBACAA,EAAA,sBACAA,EAAA,yBACAA,EAAA,mBAGAA,EAAA,2BAIAA,EAAA,6BAGAA,EAAA,kCAEAA,EAAA,kBAAA,WAGA,IAAA,gBAAA,CACA,OAAA,IAAA,KAAA,EAAA,kBAAA,EAAA,EACA,CAGA,MAAA,SAAA,CACA,KAAA,mBACA,KAAA,WAAA,MAAA,KAAA,MACA,IAAA,KAAA,gBAAA,EACA,KAAAC,GAAA,OACA,QAAAC,EAAAD,EAAA,OAAA,YAAAC,EAAA,SAAA,gBAAA,CACA,EACA,MAAAC,GAAA,OAEA,eAAA,MAAA,wCAAAA,CAAA,IACAD,EAAAC,EAAA,WAAA,YAAAD,EAAA,aAAA,eAAA,CACA,EAEA,CAEA,UAAA,CACA,OAAA,KAAA,cAAA,iBAAA,uBAAA,CACA,CACA,EA1CAE,EAAA,CAAAC,EAAA,CAAA,SAAA,GAAA,CAAA,EADAP,EACA,UAAA,QAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAFAP,EAEA,UAAA,WAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAHAP,EAGA,UAAA,gBAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAJAP,EAIA,UAAA,mBAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EALAP,EAKA,UAAA,aAAA,CAAA,EAGAM,EAAA,CADAC,EAAA,CAAA,QAAA,+CAAA,CAAA,EAPAP,EAQA,UAAA,qBAAA,CAAA,EAIAM,EAAA,CAFAC,EAAA,CAAA,QAAA,2IACA,CAAA,EAXAP,EAYA,UAAA,uBAAA,CAAA,EAGAM,EAAA,CADAC,EAAA,CAAA,QAAA,sCAAA,CAAA,EAdAP,EAeA,UAAA,4BAAA,CAAA,EAfAA,EAAAM,EAAA,CADAE,EAAA,CAAA,CAAA,CAAA,EACAR,CAAA;;;;;;;;;;;;"}