var G=Object.defineProperty;var H=(i,e,a)=>e in i?G(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a;var o=(i,e,a)=>(H(i,typeof e!="symbol"?e+"":e,a),a);import{V as b}from"./vue.esm-b1e57a2f.js";import{C as A,m as Y,P as h,E as S,n as k}from"./_plugin-vue2_normalizer-b11a0120.js";import{W as E}from"./Watch-62f8b699.js";import{l as v}from"./lodash-f6b38868.js";import{A as l,a as W}from"./ActionChip-73b76eea.js";import{C as F}from"./ConfirmDialog-9091213f.js";import"./_commonjsHelpers-de833af9.js";let g;const j=new Uint8Array(16);function z(){if(!g&&(g=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(j)}const u=[];for(let i=0;i<256;++i)u.push((i+256).toString(16).slice(1));function Z(i,e=0){return u[i[e+0]]+u[i[e+1]]+u[i[e+2]]+u[i[e+3]]+"-"+u[i[e+4]]+u[i[e+5]]+"-"+u[i[e+6]]+u[i[e+7]]+"-"+u[i[e+8]]+u[i[e+9]]+"-"+u[i[e+10]]+u[i[e+11]]+u[i[e+12]]+u[i[e+13]]+u[i[e+14]]+u[i[e+15]]}const J=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),P={randomUUID:J};function V(i,e,a){if(P.randomUUID&&!e&&!i)return P.randomUUID();i=i||{};const s=i.random||(i.rng||z)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){a=a||0;for(let t=0;t<16;++t)e[a+t]=s[t];return e}return Z(s)}function O(i,e,a){const s=e<0?i.length+e:e;if(s>=0&&s<i.length){const t=a<0?i.length+a:a,[r]=i.splice(e,1);i.splice(t,0,r)}}var X=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,ee=(i,e,a,s)=>{for(var t=s>1?void 0:s?Q(e,a):e,r=i.length-1,n;r>=0;r--)(n=i[r])&&(t=(s?n(e,a,t):n(t))||t);return s&&t&&X(e,a,t),t};let x=class extends b{constructor(){super(...arguments);o(this,"currencyList",[{code:"CAD",name:"Canadian dollar"},{code:"USD",name:"United States dollar"},{divider:!0},{code:"AED",name:"UAE dirham"},{code:"AFN",name:"Afghan afghani"},{code:"ALL",name:"Albanian lek"},{code:"AMD",name:"Armenian dram"},{code:"ANG",name:"Netherlands Antillean gulden"},{code:"AOA",name:"Angolan kwanza"},{code:"ARS",name:"Argentine peso"},{code:"AUD",name:"Australian dollar"},{code:"AWG",name:"Aruban florin"},{code:"AZN",name:"Azerbaijani manat"},{code:"BAM",name:"Bosnia and Herzegovina konvertibilna marka"},{code:"BBD",name:"Barbadian dollar"},{code:"BDT",name:"Bangladeshi taka"},{code:"BGN",name:"Bulgarian lev"},{code:"BHD",name:"Bahraini dinar"},{code:"BIF",name:"Burundi franc"},{code:"BMD",name:"Bermudian dollar"},{code:"BND",name:"Brunei dollar"},{code:"BOB",name:"Bolivian boliviano"},{code:"BRL",name:"Brazilian real"},{code:"BSD",name:"Bahamian dollar"},{code:"BTN",name:"Bhutanese ngultrum"},{code:"BWP",name:"Botswana pula"},{code:"BYR",name:"Belarusian ruble"},{code:"BZD",name:"Belize dollar"},{code:"CDF",name:"Congolese franc"},{code:"CHF",name:"Swiss franc"},{code:"CLP",name:"Chilean peso"},{code:"CNY",name:"Chinese/Yuan renminbi"},{code:"COP",name:"Colombian peso"},{code:"CRC",name:"Costa Rican colon"},{code:"CUC",name:"Cuban peso"},{code:"CVE",name:"Cape Verdean escudo"},{code:"CZK",name:"Czech koruna"},{code:"DJF",name:"Djiboutian franc"},{code:"DKK",name:"Danish krone"},{code:"DOP",name:"Dominican peso"},{code:"DZD",name:"Algerian dinar"},{code:"EEK",name:"Estonian kroon"},{code:"EGP",name:"Egyptian pound"},{code:"ERN",name:"Eritrean nakfa"},{code:"ETB",name:"Ethiopian birr"},{code:"EUR",name:"European Euro"},{code:"FJD",name:"Fijian dollar"},{code:"FKP",name:"Falkland Islands pound"},{code:"GBP",name:"British pound"},{code:"GEL",name:"Georgian lari"},{code:"GHS",name:"Ghanaian cedi"},{code:"GIP",name:"Gibraltar pound"},{code:"GMD",name:"Gambian dalasi"},{code:"GNF",name:"Guinean franc"},{code:"GQE",name:"Central African CFA franc"},{code:"GTQ",name:"Guatemalan quetzal"},{code:"GYD",name:"Guyanese dollar"},{code:"HKD",name:"Hong Kong dollar"},{code:"HNL",name:"Honduran lempira"},{code:"HRK",name:"Croatian kuna"},{code:"HTG",name:"Haitian gourde"},{code:"HUF",name:"Hungarian forint"},{code:"IDR",name:"Indonesian rupiah"},{code:"ILS",name:"Israeli new sheqel"},{code:"INR",name:"Indian rupee"},{code:"IQD",name:"Iraqi dinar"},{code:"IRR",name:"Iranian rial"},{code:"ISK",name:"Icelandic króna"},{code:"JMD",name:"Jamaican dollar"},{code:"JOD",name:"Jordanian dinar"},{code:"JPY",name:"Japanese yen"},{code:"KES",name:"Kenyan shilling"},{code:"KGS",name:"Kyrgyzstani som"},{code:"KHR",name:"Cambodian riel"},{code:"KMF",name:"Comorian franc"},{code:"KPW",name:"North Korean won"},{code:"KRW",name:"South Korean won"},{code:"KWD",name:"Kuwaiti dinar"},{code:"KYD",name:"Cayman Islands dollar"},{code:"KZT",name:"Kazakhstani tenge"},{code:"LAK",name:"Lao kip"},{code:"LBP",name:"Lebanese lira"},{code:"LKR",name:"Sri Lankan rupee"},{code:"LRD",name:"Liberian dollar"},{code:"LSL",name:"Lesotho loti"},{code:"LTL",name:"Lithuanian litas"},{code:"LVL",name:"Latvian lats"},{code:"LYD",name:"Libyan dinar"},{code:"MAD",name:"Moroccan dirham"},{code:"MDL",name:"Moldovan leu"},{code:"MGA",name:"Malagasy ariary"},{code:"MKD",name:"Macedonian denar"},{code:"MMK",name:"Myanma kyat"},{code:"MNT",name:"Mongolian tugrik"},{code:"MOP",name:"Macanese pataca"},{code:"MRO",name:"Mauritanian ouguiya"},{code:"MUR",name:"Mauritian rupee"},{code:"MVR",name:"Maldivian rufiyaa"},{code:"MWK",name:"Malawian kwacha"},{code:"MXN",name:"Mexican peso"},{code:"MYR",name:"Malaysian ringgit"},{code:"MZM",name:"Mozambican metical"},{code:"NAD",name:"Namibian dollar"},{code:"NGN",name:"Nigerian naira"},{code:"NIO",name:"Nicaraguan córdoba"},{code:"NOK",name:"Norwegian krone"},{code:"NPR",name:"Nepalese rupee"},{code:"NZD",name:"New Zealand dollar"},{code:"OMR",name:"Omani rial"},{code:"PAB",name:"Panamanian balboa"},{code:"PEN",name:"Peruvian nuevo sol"},{code:"PGK",name:"Papua New Guinean kina"},{code:"PHP",name:"Philippine peso"},{code:"PKR",name:"Pakistani rupee"},{code:"PLN",name:"Polish zloty"},{code:"PYG",name:"Paraguayan guarani"},{code:"QAR",name:"Qatari riyal"},{code:"RON",name:"Romanian leu"},{code:"RSD",name:"Serbian dinar"},{code:"RUB",name:"Russian ruble"},{code:"SAR",name:"Saudi riyal"},{code:"SBD",name:"Solomon Islands dollar"},{code:"SCR",name:"Seychellois rupee"},{code:"SDG",name:"Sudanese pound"},{code:"SEK",name:"Swedish krona"},{code:"SGD",name:"Singapore dollar"},{code:"SHP",name:"Saint Helena pound"},{code:"SLL",name:"Sierra Leonean leone"},{code:"SOS",name:"Somali shilling"},{code:"SRD",name:"Surinamese dollar"},{code:"SYP",name:"Syrian pound"},{code:"SZL",name:"Swazi lilangeni"},{code:"THB",name:"Thai baht"},{code:"TJS",name:"Tajikistani somoni"},{code:"TMT",name:"Turkmen manat"},{code:"TND",name:"Tunisian dinar"},{code:"TRY",name:"Turkish new lira"},{code:"TTD",name:"Trinidad and Tobago dollar"},{code:"TWD",name:"New Taiwan dollar"},{code:"TZS",name:"Tanzanian shilling"},{code:"UAH",name:"Ukrainian hryvnia"},{code:"UGX",name:"Ugandan shilling"},{code:"UYU",name:"Uruguayan peso"},{code:"UZS",name:"Uzbekistani som"},{code:"VEB",name:"Venezuelan bolivar"},{code:"VND",name:"Vietnamese dong"},{code:"VUV",name:"Vanuatu vatu"},{code:"WST",name:"Samoan tala"},{code:"XAF",name:"Central African CFA franc"},{code:"XCD",name:"East Caribbean dollar"},{code:"XDR",name:"Special Drawing Rights"},{code:"XOF",name:"West African CFA franc"},{code:"XPF",name:"CFP franc"},{code:"YER",name:"Yemeni rial"},{code:"ZAR",name:"South African rand"},{code:"ZMK",name:"Zambian kwacha"},{code:"ZWR",name:"Zimbabwean dollar"}])}getCurrencyList(){return this.currencyList}getCurrencyNameByCode(e){const a=this.currencyList.find(s=>s.code===e);return a&&a.name}};x=ee([A({})],x);var ae=Object.defineProperty,se=Object.getOwnPropertyDescriptor,p=(i,e,a,s)=>{for(var t=s>1?void 0:s?se(e,a):e,r=i.length-1,n;r>=0;r--)(n=i[r])&&(t=(s?n(e,a,t):n(t))||t);return s&&t&&ae(e,a,t),t};let d=class extends Y(x){constructor(){super(...arguments);o(this,"$refs");o(this,"initialValue");o(this,"activeIndex");o(this,"parentIndex");o(this,"shareId");o(this,"shareClasses");o(this,"resolutionRequired");o(this,"invalidSection");o(this,"nameRules",[]);o(this,"maximumShareRules",[]);o(this,"parValueRules",[]);o(this,"currencyRules",[]);o(this,"shareStructure",null);o(this,"formValid",!0);o(this,"hasNoMaximumShares",!1);o(this,"hasNoParValue",!1);o(this,"hasSeriesShares",!1);o(this,"excludedWordsListForClass",["share","shares","value"]);o(this,"excludedWordsListForSeries",["share","shares"])}get isClass(){return this.shareStructure.type==="Class"}get isSeries(){return this.shareStructure.type==="Series"}get isNoMaxSharesVisible(){return this.isSeries?!this.shareClasses[this.parentIndex].hasMaximumShares:!0}get nameRule(){const a=[s=>!/^\s/g.test(s)||"Invalid spaces",s=>!/\s$/g.test(s)||"Invalid spaces"];return this.isClass?(a.push(s=>!!s||'Enter the name of the class - the word "Shares" is automatically added',s=>!this.shareClasses.find((t,r)=>r!==this.activeIndex&&t.name.split(" Shares")[0].toLowerCase()===s.toLowerCase())||"Class name must be unique"),a.push(s=>!s.split(" ").some(t=>this.excludedWordsListForClass.includes(t.toLowerCase()))||"Class name should not contain any of the words share, shares or value")):this.isSeries&&(a.push(s=>!!s||'Enter the name of the series - the word "Shares" is automatically added',s=>!this.shareClasses[this.parentIndex].series.find((t,r)=>r!==this.activeIndex&&t.name.split(" Shares")[0].toLowerCase()===s.toLowerCase())||"Series name must be unique"),a.push(s=>!s.split(" ").some(t=>this.excludedWordsListForSeries.includes(t.toLowerCase()))||"Series name should not contain any of the words share or shares")),a}get maximumShareRule(){let a=[];if(!this.hasNoMaximumShares){if(a=[s=>s!==""&&s!==null&&s!==void 0||"Number of shares is required",s=>/^-?\d+$/.test(s)||"Must be a whole number",s=>+s>0||"Number must be greater than 0",s=>s&&s.toString().length<16||"Number must be less than 16 digits"],this.isClass&&this.activeIndex!==-1&&!this.hasNoMaximumShares&&this.shareStructure.series.length>0){const s=this.shareStructure.series.reduce((t,r)=>+t+ +r.maxNumberOfShares,0);a.push(t=>!!t||"Enter the maximum number of shares in the class",t=>+t>=s||"The number for the series (or all series combined, if there are multiple under a class) cannot exceed the number for the class")}if(this.isSeries&&this.shareClasses[this.parentIndex].hasMaximumShares){let s=this.shareClasses[this.parentIndex].series;this.activeIndex!==-1&&(s=s.filter(r=>r.id!==this.shareClasses[this.parentIndex].series[this.activeIndex].id));const t=s.reduce((r,n)=>+r+ +n.maxNumberOfShares,0);a.push(r=>!!r||"Enter the maximum number of shares in the series",r=>+r+t<=+this.shareClasses[this.parentIndex].maxNumberOfShares||"The number for the series (or all series combined, if there are multiple under a class) cannot exceed the number for the class")}}return a}get parValueRule(){let a=[];return this.hasNoParValue||(a=[s=>s!==""&&s!==null&&s!==void 0||"Par value is required",s=>s>0||"Amount must be greater than 0",s=>s<1?/^\d+(\.\d{0,6})?$/.test(s)||"Amounts less than 1 can be entered with up to 6 decimal places":/^\d+(\.\d{1,2})?$/.test(s)||"Amounts greater than 1 can be entered with up to 2 decimal places"]),a}get currencyRule(){return this.hasNoParValue?[]:[a=>!!a||"Currency is required"]}created(){if(this.initialValue&&(this.shareStructure={...this.initialValue},this.hasNoMaximumShares=!this.shareStructure.hasMaximumShares,this.hasNoParValue=!this.shareStructure.hasParValue,this.hasSeriesShares=this.shareStructure.hasRightsOrRestrictions&&this.shareStructure.series&&this.shareStructure.series.length>=1,this.activeIndex!==-1)){const a=this.shareStructure.name;this.shareStructure.name=a.substr(0,a.indexOf(" Shares"))}}async validateForm(){if(this.nameRules=this.nameRule,this.maximumShareRules=this.maximumShareRule,this.parValueRules=this.parValueRule,this.currencyRules=this.currencyRule,await b.nextTick(),this.$refs.shareStructureForm.validate(),this.formValid){const a=this.addShareStructure();this.emitAddShareStructureEvent(a),this.resetFormAndData(!1)}}emitAddShareStructureEvent(a){this.isClass?this.emitAddEditShareClassEvent(a):this.isSeries&&this.emitAddEditShareSeriesEvent(a)}addShareStructure(){let a={...this.shareStructure};if(this.activeIndex===-1&&(a.id=this.shareId),a.name=`${a.name} Shares`,a.hasMaximumShares=!this.hasNoMaximumShares,a.hasParValue=!this.hasNoParValue,!a.hasRightsOrRestrictions&&a.series){let s=[];a.series.forEach(t=>{if(t.action===l.ADDED){const r=a.series.findIndex(n=>n.id===t.id);s.push(r)}}),s.reverse().forEach(t=>a.series.splice(t,1)),a.series.forEach(t=>{t.action=l.REMOVED})}return a}removeShareStructure(){this.isClass?this.emitRemoveShareClassEvent(this.activeIndex):this.isSeries&&this.emitRemoveShareSeriesEvent(this.activeIndex)}resetFormAndData(a){this.$refs.shareStructureForm.reset(),a&&this.emitResetEvent()}changeMaximumShareFlag(){this.hasNoMaximumShares&&(this.shareStructure.maxNumberOfShares=null)}changeParValueFlag(){this.hasNoParValue&&(this.shareStructure.currency=null,this.shareStructure.parValue=null)}async confirmSeriesRemoval(){this.hasSeriesShares&&!this.shareStructure.hasRightsOrRestrictions?this.$refs.confirm.open("Remove Share Series with Class","A share series exists for this class. Removing the Special Rights or Restrictions for this class will remove all associated share series.",{width:"45rem",persistent:!0,yes:"Remove",no:null,cancel:"Cancel"}).then(()=>{this.shareStructure.hasRightsOrRestrictions=!1}).catch(()=>{this.shareStructure.hasRightsOrRestrictions=!0}):this.resolutionRequired&&(await this.emitResolutionPrompt(!0),this.shareStructure.hasRightsOrRestrictions=!1)}updateResolutionRequirement(){this.shareStructure.hasRightsOrRestrictions=!this.resolutionRequired}emitAddEditShareClassEvent(a){}emitAddEditShareSeriesEvent(a){}emitRemoveShareClassEvent(a){}emitRemoveShareSeriesEvent(a){}emitResetEvent(){}emitResolutionPrompt(a){}};p([h({default:null})],d.prototype,"initialValue",2);p([h({default:null})],d.prototype,"activeIndex",2);p([h({default:null})],d.prototype,"parentIndex",2);p([h({default:""})],d.prototype,"shareId",2);p([h({default:[]})],d.prototype,"shareClasses",2);p([h({default:!1})],d.prototype,"resolutionRequired",2);p([h({default:!1})],d.prototype,"invalidSection",2);p([E("resolutionRequired")],d.prototype,"updateResolutionRequirement",1);p([S("addEditClass")],d.prototype,"emitAddEditShareClassEvent",1);p([S("addEditSeries")],d.prototype,"emitAddEditShareSeriesEvent",1);p([S("removeClass")],d.prototype,"emitRemoveShareClassEvent",1);p([S("removeSeries")],d.prototype,"emitRemoveShareSeriesEvent",1);p([S("resetEvent")],d.prototype,"emitResetEvent",1);p([S("resolutionPrompt")],d.prototype,"emitResolutionPrompt",1);d=p([A({components:{ConfirmDialog:F}})],d);var te=function(){var e=this,a=e._self._c;return e._self._setupProxy,a("div",{attrs:{id:"edit-share-structure"}},[a("ConfirmDialog",{ref:"confirm",attrs:{attach:"#edit-share-structure"}}),a("v-expand-transition",[a("ul",{staticClass:"list add-share-structure"},[a("li",{staticClass:"add-share-structure-container"},[a("div",{staticClass:"meta-container"},[a("label",{staticClass:"add-share-structure-header",class:{"error-text":e.invalidSection}},[e.activeIndex===-1?a("span",{staticClass:"pl-5",class:{"pl-10 text-body-3":e.isSeries}},[e._v(" Add Share "+e._s(e.shareStructure.type)+" ")]):a("span",{class:{"pl-10 text-body-3":e.isSeries}},[e._v("Edit Share "+e._s(e.shareStructure.type))])]),a("div",{staticClass:"meta-container__inner"},[a("v-form",{ref:"shareStructureForm",staticClass:"share-structure-form",on:{submit:function(s){return s.preventDefault(),e.addShareStructure()}},model:{value:e.formValid,callback:function(s){e.formValid=s},expression:"formValid"}},[a("v-text-field",{attrs:{id:"txt-name",filled:"",label:e.shareStructure.type+" Name [Shares]",hint:"Enter the name of the "+e.shareStructure.type.toLowerCase()+' - the word "Shares" is automatically added',rules:e.nameRules,suffix:"Shares","persistent-hint":""},model:{value:e.shareStructure.name,callback:function(s){e.$set(e.shareStructure,"name",s)},expression:"shareStructure.name"}}),a("v-divider",{staticClass:"separator"}),a("v-radio-group",{staticClass:"radio-group",attrs:{column:""},on:{change:function(s){return e.changeMaximumShareFlag()}},model:{value:e.hasNoMaximumShares,callback:function(s){e.hasNoMaximumShares=s},expression:"hasNoMaximumShares"}},[a("v-radio",{attrs:{value:!1},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{id:"txt-max-shares",filled:"",label:"Maximum Number of Shares","persistent-hint":"",type:"number","hide-spin-buttons":"",hint:"Enter the maximum number of shares in the "+e.shareStructure.type.toLowerCase(),rules:e.maximumShareRules,disabled:e.hasNoMaximumShares},model:{value:e.shareStructure.maxNumberOfShares,callback:function(s){e.$set(e.shareStructure,"maxNumberOfShares",e._n(s))},expression:"shareStructure.maxNumberOfShares"}})],1)],1)]},proxy:!0}])}),e.isNoMaxSharesVisible?a("v-radio",{attrs:{id:"lbl-no-maximum",value:!0,label:"No maximum"}}):e._e()],1),a("v-divider",{staticClass:"separator mx-4"}),a("v-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.isClass,expression:"isClass"}],staticClass:"radio-group",attrs:{column:""},on:{change:function(s){return e.changeParValueFlag()}},model:{value:e.hasNoParValue,callback:function(s){e.hasNoParValue=s},expression:"hasNoParValue"}},[a("v-radio",{attrs:{id:"radio-par-value",value:!1},scopedSlots:e._u([{key:"label",fn:function(){return[a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{id:"class-par-value",filled:"",label:"Par Value",rules:e.parValueRules,hint:"Enter the initial value of each share","persistent-hint":"",type:"number","hide-spin-buttons":""},model:{value:e.shareStructure.parValue,callback:function(s){e.$set(e.shareStructure,"parValue",e._n(s))},expression:"shareStructure.parValue"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-select",{attrs:{id:"class-currency",items:e.getCurrencyList(),filled:"",label:"Currency",rules:e.currencyRules,"item-text":"`${data.item.name}, ${data.item.code}`","item-value":"code"},scopedSlots:e._u([{key:"selection",fn:function(s){return[e._v(" "+e._s(s.item.name)+" ("+e._s(s.item.code)+") ")]}},{key:"item",fn:function(s){return[e._v(" "+e._s(s.item.name)+" ("+e._s(s.item.code)+") ")]}}]),model:{value:e.shareStructure.currency,callback:function(s){e.$set(e.shareStructure,"currency",s)},expression:"shareStructure.currency"}})],1)],1)]},proxy:!0}])}),a("v-radio",{attrs:{id:"radio-no-par",value:!0,label:"No par value"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSeries,expression:"isSeries"}],staticClass:"pl-10"},[e.shareStructure.hasParValue?a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{id:"series-par-value",label:"Par Value",value:e.shareStructure.parValue,disabled:!0,width:"10"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{id:"series-currency",label:"Currency",value:`${e.getCurrencyNameByCode(e.shareStructure.currency)} (${e.shareStructure.currency})`,disabled:!0}})],1)],1):a("v-label",{attrs:{id:"lbl-no-par"}},[e._v(" No par value ")])],1),a("v-divider",{staticClass:"separator mx-4"}),a("div",{staticClass:"form__row"},[a("v-checkbox",{attrs:{id:"special-rights-check-box",label:"This share "+e.shareStructure.type.toLowerCase()+" has special rights or restrictions"},on:{click:function(s){return e.confirmSeriesRemoval()}},model:{value:e.shareStructure.hasRightsOrRestrictions,callback:function(s){e.$set(e.shareStructure,"hasRightsOrRestrictions",s)},expression:"shareStructure.hasRightsOrRestrictions"}})],1),a("div",{staticClass:"form__row form__btns"},[a("v-btn",{attrs:{id:"remove-btn",large:"",outlined:"",color:"error",disabled:e.activeIndex===-1},on:{click:function(s){return e.removeShareStructure()}}},[e._v(" Remove ")]),a("v-btn",{staticClass:"form-primary-btn",attrs:{id:"done-btn",large:"",color:"primary"},on:{click:function(s){return e.validateForm()}}},[e._v(" Done ")]),a("v-btn",{attrs:{id:"cancel-btn",large:"",outlined:"",color:"primary"},on:{click:function(s){return e.resetFormAndData(!0)}}},[e._v(" Cancel ")])],1)],1)],1)])])])])],1)},re=[],B=k(d,te,re,!1,null,"3d1d44c8",null,null);const ie=B.exports;B.exports.__docgenInfo={description:"Mixin that provides currency list and lookup operations",tags:{},exportName:"default",displayName:"EditShareStructure",props:[{name:"initialValue",tags:{},type:{name:"ShareClassIF"},defaultValue:{func:!1,value:"null"}},{name:"activeIndex",tags:{},type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"parentIndex",tags:{},type:{name:"number"},defaultValue:{func:!1,value:"null"}},{name:"shareId",tags:{},type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"shareClasses",tags:{},type:{name:"Array",elements:[{name:"ShareClassIF"}]},defaultValue:{func:!1,value:"[]"}},{name:"resolutionRequired",tags:{},type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"invalidSection",tags:{},description:"Prompt Error.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"addEditClass"},{name:"addEditSeries"},{name:"removeClass"},{name:"removeSeries"},{name:"resetEvent"},{name:"resolutionPrompt"}],sourceFiles:["/home/severin/repos/bcrs-shared-components/src/components/share-structure/EditShareStructure.vue","/home/severin/repos/bcrs-shared-components/src/components/share-structure/currency-lookup-mixin.ts"]};var ne=Object.defineProperty,oe=Object.getOwnPropertyDescriptor,m=(i,e,a,s)=>{for(var t=s>1?void 0:s?oe(e,a):e,r=i.length-1,n;r>=0;r--)(n=i[r])&&(t=(s?n(e,a,t):n(t))||t);return s&&t&&ne(e,a,t),t};let c=class extends b{constructor(){super(...arguments);o(this,"ActionTypes",l);o(this,"$refs");o(this,"isEditMode");o(this,"originalShareStructure");o(this,"shareClasses");o(this,"resolutionRequired");o(this,"editLabel");o(this,"editedLabel");o(this,"hasRightsOrRestrictions");o(this,"invalidSection");o(this,"invalidMinimumShareClass");o(this,"activeIndex",-1);o(this,"classDropdown",[]);o(this,"parentIndex",-1);o(this,"seriesDropdown",this.mapEmpty2dArray());o(this,"shareId","");o(this,"showAddShareStructureForm",!1);o(this,"showClassEditForm",[!1]);o(this,"showSeriesAddForm",[!1]);o(this,"showSeriesEditForm",this.mapEmpty2dArray());o(this,"addEditInProgress",!1);o(this,"currentShareStructure",null);o(this,"headers",[{text:"Name of Share Class or Series",align:"start",sortable:!1,value:"name"},{text:"Maximum Number of Shares",value:"maxNumberOfShares"},{text:"Par Value",value:"parValue"},{text:"Currency",value:"currency"},{text:"Special Rights or Restrictions",value:"hasRightsOrRestrictions"}]);o(this,"newShareClass",{id:null,priority:null,type:"Class",name:"",hasMaximumShares:!0,maxNumberOfShares:null,hasParValue:!0,parValue:null,currency:"CAD",hasRightsOrRestrictions:!1,series:[],action:l.ADDED});o(this,"newShareSeries",{id:null,priority:null,type:"Series",name:"",hasMaximumShares:!0,maxNumberOfShares:null,hasParValue:!0,parValue:null,currency:null,hasRightsOrRestrictions:!1,action:l.ADDED})}get hasClassChanges(){return this.shareClasses.some(a=>a.action)}get hasSeriesChanges(){return!!this.shareClasses.find(a=>a.series.some(s=>s.action))}formatParValue(a){return a.toString().includes(".")?a:`${a}.00`}clearDropdowns(){this.classDropdown=[],this.seriesDropdown=this.mapEmpty2dArray()}displaySeriesRow(a,s,t){return this.showSeriesEditForm[a.index]&&!this.showSeriesEditForm[a.index][t]&&!(!this.isEditMode&&(s.action===l.REMOVED||a.item.action===l.REMOVED))}initNewShareClass(){this.activeIndex=-1,this.parentIndex=-1,this.currentShareStructure={...this.newShareClass},this.currentShareStructure.priority=this.shareClasses.length===0?1:this.shareClasses[this.shareClasses.length-1].priority+1,this.shareId=V(),this.addEditInProgress=!0,this.showAddShareStructureForm=!0}initShareClassForEdit(a){this.currentShareStructure={...this.shareClasses[a]},this.activeIndex=a,this.parentIndex=-1,this.addEditInProgress=!0,this.showClassEditForm[a]=!0}addEditShareClass(a){a.action!==l.ADDED&&(a.action=this.isShareClassEdited(a)?l.EDITED:null);let s=[...this.shareClasses];this.activeIndex===-1?s.push(a):s.splice(this.activeIndex,1,a),this.emitShareClasses(s),this.resetData()}isShareClassEdited(a){const t=v.cloneDeep(this.originalShareStructure.shareClasses).find(r=>+r.id==+a.id);return!v.isEqual({...v.omit(a,"action")},{...v.omit(t,"action")})}removeShareClass(a){const s={...this.shareClasses[a]};let t=[...this.shareClasses];s.action===l.ADDED?t.splice(a,1):(s.action=l.REMOVED,t.splice(a,1,s)),this.emitShareClasses(t),this.resetData()}restoreShareClass(a){const t=v.cloneDeep(this.originalShareStructure.shareClasses).find(n=>+n.id==+this.shareClasses[a].id);let r=[...this.shareClasses];r[a]={...t,series:[...t.series]},r.forEach(n=>{n.hasRightsOrRestrictions||(n.series=[])}),this.emitShareClasses(r),this.resetData()}initNewShareSeries(a){this.activeIndex=-1,this.parentIndex=a;const t=[...this.shareClasses][a],r=t.series;this.currentShareStructure={...this.newShareSeries},this.currentShareStructure.hasParValue=t.hasParValue,this.currentShareStructure.parValue=t.parValue,this.currentShareStructure.currency=t.currency,this.currentShareStructure.priority=r.length===0?1:r[r.length-1].priority+1,this.shareId=V(),this.addEditInProgress=!0,this.showSeriesAddForm[a]=!0}addEditShareSeries(a){a.action!==l.ADDED&&this.isShareClassEdited(a)&&(a.action=l.EDITED);let s=[...this.shareClasses];const t=s[this.parentIndex];let r=[...t.series];this.activeIndex===-1?r.push(a):r.splice(this.activeIndex,1,a),t.series=r,this.emitShareClasses(s),this.resetData()}editSeries(a,s){this.activeIndex=s,this.parentIndex=a;let t=[...this.shareClasses];this.currentShareStructure={...t[this.parentIndex].series[this.activeIndex]},this.addEditInProgress=!0,this.showSeriesEditForm[a][s]=!0}removeSeries(a,s){const t={...this.shareClasses[s].series[a]};let r=[...this.shareClasses];t.action===l.ADDED?r[s].series.splice(a,1):(t.action=l.REMOVED,r[s].series.splice(a,1,t)),this.emitShareClasses(r),this.resetData()}restoreShareSeries(a,s,t,r){const n=v.cloneDeep(this.originalShareStructure.shareClasses),y=Object.assign({},n.find(R=>+R.id==+t)),q=Object.assign({},y.series.find(R=>+R.id==+r));let M=[...this.shareClasses];M[s].series[a]=q,this.emitShareClasses(M),this.resetData()}moveIndex(a,s,t=-1){let r;t>=0?(r=s==="up"?t-1:t+1,this.shareClasses[a].series[t].priority=r,this.shareClasses[a].series[t].priority=a,O(this.shareClasses[a].series,t,r)):(r=s==="up"?a-1:a+1,this.shareClasses[a].priority=r,this.shareClasses[r].priority=a,O(this.shareClasses,a,r)),this.clearDropdowns()}isMoveDisabled(a,s,t=-1){const r=t>=0,n=r?this.shareClasses[a].series.length-1:this.shareClasses.length-1;switch(s){case"up":return r?t===0:a===0;case"down":return r?t===n:a===n;default:return!1}}undoCorrection(a,s,t,r=null,n=null,y=null){switch(s){case l.ADDED:a?this.removeShareClass(t):this.removeSeries(t,r);break;case l.EDITED:a?this.restoreShareClass(t):this.restoreShareSeries(t,r,n,y);break;case l.REMOVED:a?this.restoreShareClass(t):this.restoreShareSeries(t,r,n,y);break}this.clearDropdowns()}resetData(){function a(s){({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1,STORYBOOK:"true"}).JEST_WORKER_ID!==void 0||window.scrollTo({top:s.offsetTop,behavior:"smooth"})}this.currentShareStructure=null,this.activeIndex=-1,this.addEditInProgress=!1,this.showAddShareStructureForm=!1,this.showClassEditForm=[!1],this.showSeriesAddForm=[!1],this.showSeriesEditForm=this.mapEmpty2dArray(),this.parentIndex=-1,this.shareId="",b.nextTick(()=>a(this.$el)),this.clearDropdowns()}confirmShareRemoval(a){({...this.shareClasses[a]}).series.length>0?this.$refs.confirm.open("Remove Share Series with Class","A share series exists for this class. Removing the share class will remove all associated share series.",{width:"45rem",persistent:!0,yes:"Remove",no:null,cancel:"Cancel"}).then(()=>{this.removeShareClass(a)}).catch(()=>{this.resetData()}):this.removeShareClass(a)}mapEmpty2dArray(){return new Array(50).fill(null).map(()=>new Array(50).fill(null))}onShareStructureChanged(){this.emitShareStructureChanged(this.hasClassChanges||this.hasSeriesChanges)}onEditingChanged(a){this.emitEditingShareStructure(a)}emitShareClasses(a){}emitShareStructureChanged(a){}emitEditingShareStructure(a){}emitResolutionPrompt(a){}};m([h({default:!0})],c.prototype,"isEditMode",2);m([h({default:null})],c.prototype,"originalShareStructure",2);m([h({default:[]})],c.prototype,"shareClasses",2);m([h({default:!1})],c.prototype,"resolutionRequired",2);m([h({default:"Edit"})],c.prototype,"editLabel",2);m([h({default:"EDITED"})],c.prototype,"editedLabel",2);m([h({default:!1})],c.prototype,"hasRightsOrRestrictions",2);m([h({default:!1})],c.prototype,"invalidSection",2);m([h({default:!1})],c.prototype,"invalidMinimumShareClass",2);m([E("hasClassChanges"),E("hasSeriesChanges")],c.prototype,"onShareStructureChanged",1);m([E("addEditInProgress",{immediate:!0})],c.prototype,"onEditingChanged",1);m([S("emitShareClasses")],c.prototype,"emitShareClasses",1);m([S("emitShareStructureChanged")],c.prototype,"emitShareStructureChanged",1);m([S("emitEditingShareStructure")],c.prototype,"emitEditingShareStructure",1);m([S("emitResolutionPrompt")],c.prototype,"emitResolutionPrompt",1);c=m([A({components:{ActionChip:W,ConfirmDialog:F,EditShareStructure:ie}})],c);var le=function(){var e=this,a=e._self._c;return e._self._setupProxy,a("v-card",{attrs:{id:"share-structure",flat:""}},[a("ConfirmDialog",{ref:"confirm",attrs:{attach:"#share-structure"}}),e.isEditMode?[a("div",{attrs:{id:"share-summary"}},[a("div",{staticClass:"share-summary-header"},[a("v-icon",{attrs:{color:"app-dk-blue"}},[e._v(" mdi-sitemap ")]),a("label",{staticClass:"share-summary-header-title"},[a("strong",[e._v("Share Structure")])])],1)]),a("div",{staticClass:"share-info-container info-text pt-6 px-4"},[e._v(" If your share structure contains a class or series of shares with special rights or restrictions, you must have passed a resolution or have a court order to change your share structure. "),a("strong",[e._v("Note:")]),e._v(" All changes must have the same Resolution or Court Order Date. If you need to enter changes that occurred on multiple dates you must file and pay for each change separately. "),e.invalidMinimumShareClass?a("p",{staticClass:"error-text small-text mt-6"},[e._v(" Your share structure must contain at least one share class. ")]):e._e()]),a("div",{staticClass:"btn-container py-6 px-4"},[a("v-btn",{attrs:{id:"btn-add-person",outlined:"",color:"primary",disabled:e.addEditInProgress},on:{click:function(s){return e.initNewShareClass()}}},[a("v-icon",[e._v("mdi-plus")]),a("span",[e._v("Add Share Class")])],1)],1)]:e._e(),a("div",{class:{"invalid-section":e.invalidSection}},[a("v-expand-transition",[e.showAddShareStructureForm?a("v-card",{staticClass:"add-share-structure-container",attrs:{flat:""}},[a("EditShareStructure",{attrs:{initialValue:e.currentShareStructure,activeIndex:e.activeIndex,shareId:e.shareId,parentIndex:e.parentIndex,shareClasses:e.shareClasses,resolutionRequired:e.resolutionRequired,invalidSection:e.invalidSection},on:{addEditClass:function(s){return e.addEditShareClass(s)},resolutionPrompt:function(s){return e.emitResolutionPrompt(s)},resetEvent:function(s){return e.resetData()}}})],1):e._e()],1)],1),a("v-data-table",{staticClass:"share-structure-table",attrs:{headers:e.headers,items:e.shareClasses,"disable-pagination":"","disable-sort":"","hide-default-footer":""},scopedSlots:e._u([{key:"item",fn:function(s){return[!e.showClassEditForm[s.index]&&!(!e.isEditMode&&s.item.action===e.ActionTypes.REMOVED)?a("tr",{key:s.item.id,staticClass:"class-row",class:[{"class-row-has-series":s.item.series.length},{removed:s.item.action===e.ActionTypes.REMOVED}]},[a("td",{staticClass:"list-item__title",class:[{"invalid-section":e.invalidMinimumShareClass},{"list-item__subtitle":s.item.action===e.ActionTypes.REMOVED}]},[e._v(" "+e._s(s.item.name)+" "),s.item.action&&e.isEditMode?a("ActionChip",{staticClass:"pb-2",attrs:{"actionable-item":s.item,"edited-label":e.editedLabel}}):e._e()],1),a("td",{staticClass:"text-right"},[e._v(" "+e._s(s.item.maxNumberOfShares?(+s.item.maxNumberOfShares).toLocaleString():"No Maximum")+" ")]),a("td",{staticClass:"text-right"},[e._v(" "+e._s(s.item.parValue?`$${e.formatParValue(s.item.parValue)}`:"No Par Value")+" ")]),a("td",[e._v(e._s(s.item.currency))]),a("td",[e._v(e._s(s.item.hasRightsOrRestrictions?"Yes":"No"))]),e.isEditMode?a("td",{staticClass:"actions-cell pt-4"},[a("div",{staticClass:"actions"},[s.item.action?e._e():a("span",{staticClass:"edit-action"},[a("v-btn",{attrs:{id:"class-"+s.index+"-change-btn",text:"",color:"primary",disabled:e.addEditInProgress},on:{click:function(t){return e.initShareClassForEdit(s.index)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")]),a("span",[e._v(e._s(e.editLabel))])],1)],1),s.item.action===e.ActionTypes.EDITED||s.item.action===e.ActionTypes.REMOVED?a("span",{class:{"undo-action":s.item.action!==e.ActionTypes.REMOVED}},[a("v-btn",{attrs:{id:"class-"+s.index+"-undo-btn",text:"",color:"primary",disabled:e.addEditInProgress},on:{click:function(t){return e.undoCorrection(!0,s.item.action,s.index)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-undo")]),a("span",[e._v("Undo")])],1)],1):e._e(),s.item.action===e.ActionTypes.ADDED?a("span",{staticClass:"edit-action"},[a("v-btn",{attrs:{id:"class-"+s.index+"-change-added-btn",text:"",color:"primary",disabled:e.addEditInProgress},on:{click:function(t){return e.initShareClassForEdit(s.index)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")]),a("span",[e._v("Edit")])],1)],1):e._e(),s.item.action!==e.ActionTypes.REMOVED?a("span",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function({on:t}){return[a("v-btn",e._g({staticClass:"actions__more-actions__btn",attrs:{text:"",color:"primary",disabled:e.addEditInProgress}},t),[a("v-icon",[e._v(e._s(e.classDropdown[s.index]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}],null,!0),model:{value:e.classDropdown[s.index],callback:function(t){e.$set(e.classDropdown,s.index,t)},expression:"classDropdown[row.index]"}},[a("v-list",{staticClass:"more-actions"},[s.item.action===e.ActionTypes.EDITED?a("v-list-item",{staticClass:"actions-dropdown_item",attrs:{disabled:e.addEditInProgress},on:{click:function(t){return e.initShareClassForEdit(s.index)}}},[a("v-list-item-subtitle",[a("v-icon",{staticClass:"mr-3",attrs:{small:"",color:"primary"}},[e._v("mdi-pencil")]),a("span",[e._v("Change")])],1)],1):e._e(),a("v-list-item",{staticClass:"actions-dropdown_item",class:{"item-disabled":!s.item.hasRightsOrRestrictions},attrs:{disabled:!s.item.hasRightsOrRestrictions},on:{click:function(t){return e.initNewShareSeries(s.index)}}},[a("v-list-item-subtitle",[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-playlist-plus")]),a("span",[e._v("Add Series")])],1)],1),a("v-list-item",{staticClass:"actions-dropdown_item",class:{"item-disabled":e.isMoveDisabled(s.index,"up")},attrs:{disabled:e.isMoveDisabled(s.index,"up")},on:{click:function(t){return e.moveIndex(s.index,"up")}}},[a("v-list-item-subtitle",{staticClass:"move-up-selector"},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-up")]),a("span",[e._v("Move Up")])],1)],1),a("v-list-item",{staticClass:"actions-dropdown_item",class:{"item-disabled":e.isMoveDisabled(s.index,"down")},attrs:{disabled:e.isMoveDisabled(s.index,"down")},on:{click:function(t){return e.moveIndex(s.index,"down")}}},[a("v-list-item-subtitle",{staticClass:"move-down-selector"},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-down")]),a("span",[e._v("Move Down")])],1)],1),a("v-list-item",{staticClass:"actions-dropdown_item",on:{click:function(t){return e.confirmShareRemoval(s.index)}}},[a("v-list-item-subtitle",{staticClass:"remove-selector"},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-delete")]),a("span",[e._v("Remove")])],1)],1)],1)],1)],1):e._e()])]):[a("span")]],2):e._e(),e.showClassEditForm[s.index]?a("tr",[a("td",{class:{"invalid-section":e.invalidSection},attrs:{colspan:"6"}},[a("v-expand-transition",[a("div",{staticClass:"edit-share-structure-container"},[a("EditShareStructure",{attrs:{initialValue:e.currentShareStructure,activeIndex:e.activeIndex,shareId:e.shareId,parentIndex:e.parentIndex,shareClasses:e.shareClasses,resolutionRequired:e.resolutionRequired,invalidSection:e.invalidSection},on:{addEditClass:function(t){return e.addEditShareClass(t)},addEditSeries:function(t){return e.addEditShareSeries(t)},removeClass:function(t){return e.confirmShareRemoval(t)},resolutionPrompt:function(t){return e.emitResolutionPrompt(t)},resetEvent:function(t){return e.resetData()}}})],1)])],1)]):e._e(),e._l(s.item.series,function(t,r){return[e.displaySeriesRow(s,t,r)?a("tr",{key:`class:${s.index}-Series:${r}`,staticClass:"series-row",class:[{"series-row-last":r===s.item.series.length-1},{removed:s.item.action===e.ActionTypes.REMOVED||t.action===e.ActionTypes.REMOVED}]},[a("td",{staticClass:"series-name",class:{"invalid-section":e.invalidMinimumShareClass}},[a("li",[a("span",{staticClass:"h3 ml-n2",class:{"list-item__subtitle":s.item.action===e.ActionTypes.REMOVED||t.action===e.ActionTypes.REMOVED}},[e._v(e._s(t.name))])]),s.item.action!==e.ActionTypes.REMOVED&&t.action&&e.isEditMode?a("ActionChip",{attrs:{"actionable-item":t,"edited-label":e.editedLabel}}):e._e()],1),a("td",{staticClass:"text-right"},[e._v(" "+e._s(t.maxNumberOfShares?(+t.maxNumberOfShares).toLocaleString():"No Maximum")+" ")]),a("td",{staticClass:"text-right"},[e._v(" "+e._s(s.item.parValue?`$${e.formatParValue(s.item.parValue)}`:"No Par Value")+" ")]),a("td",[e._v(e._s(s.item.currency))]),a("td",[e._v(e._s(t.hasRightsOrRestrictions?"Yes":"No"))]),e.isEditMode?a("td",{staticClass:"actions-cell pt-4"},[s.item.action!==e.ActionTypes.REMOVED?a("div",{staticClass:"actions"},[t.action?s.item.hasRightsOrRestrictions&&t.action!==e.ActionTypes.ADDED?a("span",{class:{"undo-action":t.action!==e.ActionTypes.REMOVED}},[a("v-btn",{attrs:{id:"series-"+r+"-undo-btn",text:"",color:"primary",disabled:e.addEditInProgress},on:{click:function(n){return e.undoCorrection(!1,t.action,r,s.index,s.item.id,t.id)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-undo")]),a("span",[e._v("Undo")])],1)],1):t.action!==e.ActionTypes.REMOVED?a("span",{staticClass:"edit-action"},[a("v-btn",{attrs:{id:"series-"+r+"-change-added-btn",text:"",color:"primary",disabled:e.addEditInProgress},on:{click:function(n){return e.editSeries(s.index,r)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")]),a("span",[e._v("Edit")])],1)],1):e._e():a("span",{staticClass:"edit-action"},[a("v-btn",{attrs:{id:"series-"+r+"-change-btn",text:"",color:"primary",disabled:e.addEditInProgress},on:{click:function(n){return e.editSeries(s.index,r)}}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-pencil")]),a("span",[e._v(e._s(e.editLabel))])],1)],1),t.action!==e.ActionTypes.REMOVED?a("span",[a("v-menu",{attrs:{"offset-y":"",left:""},scopedSlots:e._u([{key:"activator",fn:function({on:n}){return[a("v-btn",e._g({staticClass:"actions__more-actions__btn",attrs:{text:"",color:"primary",disabled:e.addEditInProgress}},n),[a("v-icon",[e._v(e._s(e.seriesDropdown[s.index][r]?"mdi-menu-up":"mdi-menu-down"))])],1)]}}],null,!0),model:{value:e.seriesDropdown[s.index][r],callback:function(n){e.$set(e.seriesDropdown[s.index],r,n)},expression:"seriesDropdown[row.index][index]"}},[a("v-list",{staticClass:"more-actions"},[t.action===e.ActionTypes.EDITED?a("v-list-item",{staticClass:"actions-dropdown_item",attrs:{disabled:e.addEditInProgress},on:{click:function(n){return e.editSeries(s.index,r)}}},[a("v-list-item-subtitle",[a("v-icon",{staticClass:"mr-2",attrs:{small:"",color:"primary"}},[e._v("mdi-pencil")]),e._v(" "+e._s(e.editLabel)+" ")],1)],1):e._e(),a("v-list-item",{staticClass:"actions-dropdown_item",class:{"item-disabled":e.isMoveDisabled(s.index,"up",r)},attrs:{disabled:e.isMoveDisabled(s.index,"up",r)},on:{click:function(n){return e.moveIndex(s.index,"up",r)}}},[a("v-list-item-subtitle",{staticClass:"move-up-selector"},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-up")]),e._v(" Move Up ")],1)],1),a("v-list-item",{staticClass:"actions-dropdown_item",class:{"item-disabled":e.isMoveDisabled(s.index,"down",r)},attrs:{disabled:e.isMoveDisabled(s.index,"down",r)},on:{click:function(n){return e.moveIndex(s.index,"down",r)}}},[a("v-list-item-subtitle",{staticClass:"move-down-selector"},[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-arrow-down")]),e._v(" Move Down ")],1)],1),a("v-list-item",{staticClass:"actions-dropdown_item",on:{click:function(n){return e.removeSeries(r,s.index)}}},[a("v-list-item-subtitle",[a("v-icon",{attrs:{color:"primary"}},[e._v("mdi-delete")]),e._v(" Remove ")],1)],1)],1)],1)],1):e._e()]):e._e()]):[a("span")]],2):e._e(),e.showSeriesEditForm[s.index]&&e.showSeriesEditForm[s.index][r]?a("tr",{key:`class:${s.index}-Series:${r}-edit-form`},[a("td",{class:{"invalid-section":e.invalidSection},attrs:{colspan:"6"}},[a("v-expand-transition",[a("div",{staticClass:"edit-share-structure-container"},[a("EditShareStructure",{attrs:{initialValue:e.currentShareStructure,activeIndex:e.activeIndex,shareId:e.shareId,parentIndex:e.parentIndex,shareClasses:e.shareClasses,resolutionRequired:e.resolutionRequired,invalidSection:e.invalidSection},on:{addEditClass:function(n){return e.addEditShareClass(n)},addEditSeries:function(n){return e.addEditShareSeries(n)},removeSeries:function(n){return e.removeSeries(n,s.index)},resolutionPrompt:function(n){return e.emitResolutionPrompt(n)},resetEvent:function(n){return e.resetData()}}})],1)])],1)]):e._e()]}),e.showSeriesAddForm[s.index]?a("tr",[a("td",{class:{"invalid-section":e.invalidSection},attrs:{colspan:"6"}},[a("v-expand-transition",[a("div",{staticClass:"edit-share-structure-container"},[a("EditShareStructure",{attrs:{initialValue:e.currentShareStructure,activeIndex:e.activeIndex,shareId:e.shareId,parentIndex:e.parentIndex,shareClasses:e.shareClasses,resolutionRequired:e.resolutionRequired,invalidSection:e.invalidSection},on:{addEditClass:function(t){return e.addEditShareClass(t)},addEditSeries:function(t){return e.addEditShareSeries(t)},removeSeries:function(t){return e.removeSeries(t,s.index)},resolutionPrompt:function(t){return e.emitResolutionPrompt(t)},resetEvent:function(t){return e.resetData()}}})],1)])],1)]):e._e()]}}])})],2)},ce=[],K=k(c,le,ce,!1,null,"0b58c838",null,null);const ue=K.exports;K.exports.__docgenInfo={exportName:"default",displayName:"ShareStructure",description:"",tags:{},props:[{name:"isEditMode",tags:{},description:"Edit Mode",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"originalShareStructure",tags:{},type:{name:"ShareStructureIF"},defaultValue:{func:!1,value:"null"}},{name:"shareClasses",tags:{},type:{name:"Array",elements:[{name:"ShareClassIF"}]},defaultValue:{func:!1,value:"[]"}},{name:"resolutionRequired",tags:{},type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"editLabel",tags:{},description:"Edit label name (ie 'Change' or 'Correct')",type:{name:"string"},defaultValue:{func:!1,value:"'Edit'"}},{name:"editedLabel",tags:{},description:"Edited label name (ie 'Changed' or 'Corrected')",type:{name:"string"},defaultValue:{func:!1,value:"'EDITED'"}},{name:"hasRightsOrRestrictions",tags:{},type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"invalidSection",tags:{},description:"Prompt Error.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"invalidMinimumShareClass",tags:{},description:"Verification the Share Structure contains the minimum required Share Classes.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"emitShareClasses"},{name:"emitShareStructureChanged"},{name:"emitEditingShareStructure"},{name:"emitResolutionPrompt"}],sourceFiles:["/home/severin/repos/bcrs-shared-components/src/components/share-structure/ShareStructure.vue"]};const be={title:"component/ShareStructure"},U=(i,{argTypes:e})=>({props:Object.keys(e),components:{ShareStructure:ue},template:'<share-structure v-bind="$props" />'}),_={business:{identifier:"BC1230105",legalType:"BEN"},header:{certifiedBy:"Cameron",date:"2021-03-04T16:59:54.905823+00:00",effectiveDate:"2021-03-04T16:59:54.905880+00:00",filingId:111645,isFutureEffective:!1,name:"incorporationApplication",status:"COMPLETED"},incorporationApplication:{contactPoint:{email:"cameron@freshworks.io",extension:"",phone:"(123) 456-7890"},incorporationAgreement:{agreementType:"sample"},nameRequest:{legalType:"BEN"},nameTranslations:[],offices:{},parties:[],shareStructure:{shareClasses:[{currency:"CAD",hasMaximumShares:!0,hasParValue:!0,hasRightsOrRestrictions:!0,id:"434416",maxNumberOfShares:100,name:"Class A Shares",parValue:1,priority:1,series:[{hasMaximumShares:!0,hasRightsOrRestrictions:!1,id:"434265",maxNumberOfShares:10,name:"Series 1A Shares",priority:1,type:"Series"},{hasMaximumShares:!0,hasRightsOrRestrictions:!1,id:"434266",maxNumberOfShares:2,name:"Series 2 Shares",priority:2,type:"Series"}],type:"Class"},{currency:"CAD",hasMaximumShares:!0,hasParValue:!0,hasRightsOrRestrictions:!0,id:"434417",maxNumberOfShares:122,name:"Class B Shares",parValue:2,priority:2,series:[{hasMaximumShares:!0,hasRightsOrRestrictions:!1,id:"434267",maxNumberOfShares:22,name:"Series b1 Shares",priority:1,type:"Series"}],type:"Class"}]}}},D=[{business:{}},{aliases:[]},{recordsOffice:{},registeredOffice:{}},{directors:[]},{shareClasses:[{currency:"CAD",hasMaximumShares:!0,hasParValue:!0,hasRightsOrRestrictions:!0,id:434416,maxNumberOfShares:100,name:"Class A Shares",parValue:1,priority:1,series:[{hasMaximumShares:!0,hasRightsOrRestrictions:!1,id:434265,maxNumberOfShares:10,name:"Series 1A Shares",priority:1,type:"Series"},{hasMaximumShares:!0,hasRightsOrRestrictions:!1,id:434266,maxNumberOfShares:2,name:"Series 2 Shares",priority:2,type:"Series"}],type:"Class"},{currency:"CAD",hasMaximumShares:!0,hasParValue:!0,hasRightsOrRestrictions:!0,id:434417,maxNumberOfShares:122,name:"Class B Shares",parValue:2,priority:2,series:[{hasMaximumShares:!0,hasRightsOrRestrictions:!1,id:434267,maxNumberOfShares:22,name:"Series b1 Shares",priority:1,type:"Series"}],type:"Class"}]},{}],f=U.bind({});f.args={isEditMode:!0,editLabel:"Correct",editedLabel:"CORRECTED",isCorrection:!0,incorporationApplication:_,businessSnapshot:D,shareClasses:_.incorporationApplication.shareStructure.shareClasses,resolutionRequired:!1};const C=U.bind({});C.args={isEditMode:!0,editLabel:"Change",editedLabel:"CHANGED",isCorrection:!0,incorporationApplication:_,businessSnapshot:D,shareClasses:D[4].shareClasses,resolutionRequired:!0};var N,I,T;f.parameters={...f.parameters,docs:{...(N=f.parameters)==null?void 0:N.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    ShareStructure
  },
  template: '<share-structure v-bind="$props" />' // $props comes from args below
})`,...(T=(I=f.parameters)==null?void 0:I.docs)==null?void 0:T.source}}};var w,L,$;C.parameters={...C.parameters,docs:{...(w=C.parameters)==null?void 0:w.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    ShareStructure
  },
  template: '<share-structure v-bind="$props" />' // $props comes from args below
})`,...($=(L=C.parameters)==null?void 0:L.docs)==null?void 0:$.source}}};const Ee=["correction","alteration"];export{Ee as __namedExportsOrder,C as alteration,f as correction,be as default};
//# sourceMappingURL=ShareStructure.stories-9b3ac42b.js.map
