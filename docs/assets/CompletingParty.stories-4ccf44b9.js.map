{"version":3,"file":"CompletingParty.stories-4ccf44b9.js","sources":["../../src/components/completing-party/CompletingParty.vue"],"sourcesContent":["<template>\n  <v-card\n    id=\"completing-party\"\n    flat\n  >\n    <!-- Add/Edit Block -->\n    <template v-if=\"enableAddEdit\">\n      <v-row no-gutters>\n        <v-col\n          cols=\"12\"\n          sm=\"3\"\n        >\n          <label class=\"add-person-header\">\n            <span :class=\"{ 'error-text': invalidSection }\">Add Person</span>\n          </label>\n        </v-col>\n\n        <v-col>\n          <v-form\n            ref=\"completingPartyForm\"\n            v-model=\"completingPartyFormValid\"\n            @submit.prevent\n          >\n            <!-- Person's Name -->\n            <label class=\"sub-header\">Person's Name</label>\n            <v-row\n              no-gutters\n              class=\"pt-6\"\n            >\n              <v-col>\n                <v-text-field\n                  id=\"person__first-name\"\n                  filled\n                  class=\"item\"\n                  label=\"First Name\"\n                  :rules=\"firstNameRules\"\n                  :value=\"completingParty.firstName\"\n                  @change=\"newCompletingParty.firstName = $event\"\n                />\n              </v-col>\n              <v-col class=\"px-4\">\n                <v-text-field\n                  id=\"person__middle-name\"\n                  filled\n                  class=\"item\"\n                  label=\"Middle Name\"\n                  :rules=\"middleNameRules\"\n                  :value=\"completingParty.middleName\"\n                  @change=\"newCompletingParty.middleName = $event\"\n                />\n              </v-col>\n              <v-col>\n                <v-text-field\n                  id=\"person__last-name\"\n                  filled\n                  class=\"item\"\n                  label=\"Last Name\"\n                  :rules=\"lastNameRules\"\n                  :value=\"completingParty.lastName\"\n                  @change=\"newCompletingParty.lastName = $event\"\n                />\n              </v-col>\n            </v-row>\n\n            <!-- Mailing Address -->\n            <label class=\"sub-header mt-2\">Mailing Address</label>\n            <div class=\"address-wrapper pt-6 mb-n2\">\n              <BaseAddress\n                ref=\"mailingAddress\"\n                :editing=\"true\"\n                :schema=\"addressSchema\"\n                :address=\"completingParty.mailingAddress\"\n                @update:address=\"onMailingAddressUpdate($event)\"\n                @valid=\"mailingAddressValid = $event\"\n              />\n            </div>\n          </v-form>\n        </v-col>\n      </v-row>\n    </template>\n\n    <!-- Summary Block -->\n    <template v-else>\n      <!-- Table Headers -->\n      <v-row\n        class=\"list-header pb-3\"\n        no-gutters\n      >\n        <v-col\n          cols=\"12\"\n          sm=\"3\"\n        >\n          Name\n        </v-col>\n        <v-col\n          cols=\"12\"\n          sm=\"3\"\n        >\n          Mailing Address\n        </v-col>\n      </v-row>\n\n      <!-- Table Content -->\n      <v-row\n        class=\"list-content pt-3\"\n        no-gutters\n      >\n        <!-- Name -->\n        <v-col\n          class=\"pr-2\"\n          cols=\"12\"\n          sm=\"3\"\n        >\n          <v-row no-gutters>\n            <v-col\n              cols=\"1\"\n              class=\"mt-n1 ml-n1 mr-3\"\n            >\n              <v-icon color=\"gray9\">\n                mdi-account\n              </v-icon>\n            </v-col>\n            <v-col>\n              <p class=\"list-subtitle ma-0 mb-1\">\n                {{ completingPartyName }}\n              </p>\n            </v-col>\n          </v-row>\n        </v-col>\n\n        <!-- Mailing Address -->\n        <v-col\n          cols=\"12\"\n          sm=\"8\"\n        >\n          <BaseAddress\n            class=\"peoples-roles-mailing-address\"\n            :address=\"completingParty.mailingAddress\"\n          />\n        </v-col>\n      </v-row>\n    </template>\n  </v-card>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\nimport { AddressIF, CompletingPartyIF, FormIF } from '@bcrs-shared-components/interfaces'\nimport BaseAddress from '@bcrs-shared-components/base-address/BaseAddress.vue'\nimport { isEqual } from 'lodash'\n\n@Component({\n  components: {\n    BaseAddress\n  }\n})\nexport default class CompletingParty extends Vue {\n  // Component references\n  $refs!: {\n    completingPartyForm: FormIF\n    mailingAddress: FormIF\n  }\n\n  /** The current completing party. */\n  @Prop({ default: () => {} }) readonly completingParty!: CompletingPartyIF\n\n  /** Enable Add / Edit mode. */\n  @Prop({ default: false }) readonly enableAddEdit!: boolean\n\n  @Prop({ default: () => {} }) readonly addressSchema!: any\n\n  /** Whether to perform validation. */\n  @Prop({ default: false }) readonly validate!: boolean\n\n  /** Whether to show validation styling. */\n  @Prop({ default: false }) readonly invalidSection!: boolean\n\n  // Local variables\n  completingPartyFormValid = false\n  mailingAddressValid = false\n  newCompletingParty: CompletingPartyIF = null\n\n  readonly firstNameRules = [\n    (v: string) => !!v || 'A first name is required',\n    (v: string) => !/^\\s/g.test(v) || 'Invalid spaces', // leading spaces\n    (v: string) => !/\\s$/g.test(v) || 'Invalid spaces', // trailing spaces\n    (v: string) => (v?.length <= 20) || 'Cannot exceed 20 characters' // maximum character count\n  ]\n\n  readonly middleNameRules = [\n    (v: string) => !/^\\s/g.test(v) || 'Invalid spaces', // leading spaces\n    (v: string) => !/\\s$/g.test(v) || 'Invalid spaces', // trailing spaces\n    (v: string) => (!v || v.length <= 20) || 'Cannot exceed 20 characters' // maximum character count\n  ]\n\n  readonly lastNameRules = [\n    (v: string) => !!v || 'A last name is required',\n    (v: string) => !/^\\s/g.test(v) || 'Invalid spaces', // leading spaces\n    (v: string) => !/\\s$/g.test(v) || 'Invalid spaces', // trailing spaces\n    (v: string) => (v?.length <= 30) || 'Cannot exceed 30 characters' // maximum character count\n  ]\n\n  /** The completing party's full name. */\n  get completingPartyName (): string {\n    return (`\n      ${this.completingParty.firstName}\n      ${this.completingParty.middleName || ''}\n      ${this.completingParty.lastName}\n    `) || 'Unknown'\n  }\n\n  onMailingAddressUpdate (val: AddressIF): void {\n    // stop BaseAddress from infinitely looping on new data / updates\n    if (!isEqual(this.newCompletingParty.mailingAddress, val)) {\n      this.newCompletingParty.mailingAddress = val\n    }\n  }\n\n  /** When prop changes, validate the components. */\n  @Watch('validate')\n  private onValidate (): void {\n    this.$refs.completingPartyForm && this.$refs.completingPartyForm.validate()\n    this.$refs.mailingAddress && this.$refs.mailingAddress.$refs.addressForm.validate()\n  }\n\n  /** When prop changes, update local object. */\n  @Watch('completingParty', { immediate: true })\n  private onCompletingParty (): void {\n    this.newCompletingParty = this.completingParty\n  }\n\n  /** When completing party form validity changes, sync parent. */\n  @Watch('completingPartyFormValid')\n  @Emit('valid')\n  private onCompletingPartyFormValid (): boolean {\n    return (this.completingPartyFormValid && this.mailingAddressValid)\n  }\n\n  /** When mailing address validity changes, sync parent. */\n  @Watch('mailingAddressValid')\n  @Emit('valid')\n  private onMailingAddressValid (): boolean {\n    return (this.completingPartyFormValid && this.mailingAddressValid)\n  }\n\n  /** When local data object changes, sync parent. */\n  @Watch('newCompletingParty', { deep: true })\n  @Emit('update')\n  private onNewCompletingParty (): CompletingPartyIF {\n    return this.newCompletingParty\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/theme.scss';\n\n.list-header {\n  // NB: same styles as v-data-table header\n  color: $gray9;\n  font-size: $px-14;\n  font-weight: bold;\n}\n\n.list-content {\n  border-top: 1px solid $gray3;\n\n  p {\n    font-size: $px-14;\n  }\n\n  .list-subtitle {\n    color: $gray9;\n    font-weight: bold;\n  }\n}\n\n.actions {\n  position: absolute;\n  right: 0;\n  margin-top: -0.5rem;\n\n  .v-btn {\n    min-width: 0.5rem;\n  }\n\n  .v-btn + .v-btn {\n    margin-left: 0.5rem;\n  }\n}\n\n// Override Base Address font styling\n:deep() {\n  .address-block {\n    font-size: $px-14;\n    color: $gray7;\n  }\n\n  .v-chip {\n    opacity: 1 !important;\n  }\n\n  .theme--light.v-label {\n    font-size: 1rem;\n    color: $gray7;\n    font-weight: normal;\n  }\n\n  .theme--light.v-input input, .theme--light.v-input textarea {\n    color: $gray9;\n  }\n}\n</style>\n"],"names":["CompletingParty","Vue","__publicField","v","val","isEqual","__decorateClass","Prop","Watch","Emit","Component","BaseAddress"],"mappings":"yvBA6JA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCAEAC,EAAA,cAMAA,EAAA,wBAGAA,EAAA,sBAEAA,EAAA,sBAGAA,EAAA,iBAGAA,EAAA,uBAGAA,EAAA,gCAAA,IACAA,EAAA,2BAAA,IACAA,EAAA,0BAAA,MAEAA,EAAA,sBAAA,CACAC,GAAA,CAAA,CAAAA,GAAA,2BACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,IAAAA,GAAA,YAAAA,EAAA,SAAA,IAAA,6BAAA,GAGAD,EAAA,uBAAA,CACAC,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAAA,GAAAA,EAAA,QAAA,IAAA,6BAAA,GAGAD,EAAA,qBAAA,CACAC,GAAA,CAAA,CAAAA,GAAA,0BACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,IAAAA,GAAA,YAAAA,EAAA,SAAA,IAAA,6BAAA,GAIA,IAAA,qBAAA,CACA,MAAA;AAAA,QACA,KAAA,gBAAA,SAAA;AAAA,QACA,KAAA,gBAAA,YAAA,EAAA;AAAA,QACA,KAAA,gBAAA,QAAA;AAAA,OACA,SACA,CAEA,uBAAAC,EAAA,CAEAC,EAAA,QAAA,KAAA,mBAAA,eAAAD,CAAA,IACA,KAAA,mBAAA,eAAAA,EAEA,CAIA,YAAA,CACA,KAAA,MAAA,qBAAA,KAAA,MAAA,oBAAA,WACA,KAAA,MAAA,gBAAA,KAAA,MAAA,eAAA,MAAA,YAAA,UACA,CAIA,mBAAA,CACA,KAAA,mBAAA,KAAA,eACA,CAKA,4BAAA,CACA,OAAA,KAAA,0BAAA,KAAA,mBACA,CAKA,uBAAA,CACA,OAAA,KAAA,0BAAA,KAAA,mBACA,CAKA,sBAAA,CACA,OAAA,KAAA,kBACA,CACA,EAvFAE,EAAA,CAAAC,EAAA,CAAA,QAAA,IAAA,CAAA,EAAA,CAAA,EARAP,EAQA,UAAA,kBAAA,CAAA,EAGAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAXAP,EAWA,UAAA,gBAAA,CAAA,EAEAM,EAAA,CAAAC,EAAA,CAAA,QAAA,IAAA,CAAA,EAAA,CAAA,EAbAP,EAaA,UAAA,gBAAA,CAAA,EAGAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAhBAP,EAgBA,UAAA,WAAA,CAAA,EAGAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAnBAP,EAmBA,UAAA,iBAAA,CAAA,EA6CAM,EAAA,CADAE,EAAA,UAAA,CAAA,EA/DAR,EAgEA,UAAA,aAAA,CAAA,EAOAM,EAAA,CADAE,EAAA,kBAAA,CAAA,UAAA,GAAA,CAAA,EAtEAR,EAuEA,UAAA,oBAAA,CAAA,EAOAM,EAAA,CAFAE,EAAA,0BAAA,EACAC,EAAA,OAAA,CAAA,EA7EAT,EA8EA,UAAA,6BAAA,CAAA,EAOAM,EAAA,CAFAE,EAAA,qBAAA,EACAC,EAAA,OAAA,CAAA,EApFAT,EAqFA,UAAA,wBAAA,CAAA,EAOAM,EAAA,CAFAE,EAAA,qBAAA,CAAA,KAAA,GAAA,EACAC,EAAA,QAAA,CAAA,EA3FAT,EA4FA,UAAA,uBAAA,CAAA,EA5FAA,EAAAM,EAAA,CALAI,EAAA,CACA,WAAA,CACA,YAAAC,CACA,CAAA,CACA,CAAA,EACAX,CAAA;;;;;;;;"}