{"version":3,"file":"LimitedRestorationPanel.stories-9177da6e.js","sources":["../../src/components/limited-restoration-panel/LimitedRestorationPanel.vue"],"sourcesContent":["<template id=\"limited-restoration-panel\">\n  <v-radio-group\n    v-model=\"radioValue\"\n    class=\"mt-0 pt-0 ml-8\"\n    mandatory\n  >\n    <v-radio\n      id=\"radio-24\"\n      class=\"radio-button pt-2\"\n      label=\"2 years\"\n      value=\"24\"\n    />\n    <v-radio\n      id=\"radio-18\"\n      class=\"radio-button pt-2\"\n      label=\"18 months\"\n      value=\"18\"\n    />\n    <v-radio\n      id=\"radio-12\"\n      class=\"radio-button pt-2\"\n      label=\"12 months\"\n      value=\"12\"\n    />\n    <v-radio\n      id=\"radio-6\"\n      class=\"radio-button pt-2\"\n      label=\"6 months\"\n      value=\"6\"\n    />\n    <v-row class=\"ml-0 mt-0 radio-button pt-2\">\n      <v-radio\n        id=\"radio-custom\"\n        class=\"mt-n4\"\n        value=\"customMonths\"\n      />\n      <v-form ref=\"monthsRef\">\n        <v-text-field\n          id=\"text-field-months\"\n          v-model=\"inputValue\"\n          class=\"text-field-months\"\n          type=\"number\"\n          dense\n          filled\n          hide-spin-buttons\n          :rules=\"monthsRules\"\n          :disabled=\"(radioValue !== 'customMonths')\"\n          @input=\"onMonthsInput($event)\"\n        />\n      </v-form>\n      <span class=\"ml-2 mt-2 month-text\">month(s)</span>\n    </v-row>\n  </v-radio-group>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\nimport { FormIF } from '@bcrs-shared-components/interfaces'\n\n@Component({})\nexport default class LimitedRestorationPanel extends Vue {\n  // Refs\n  $refs!: Vue['$refs'] & {\n    monthsRef: FormIF\n  }\n\n  @Prop({ required: true }) readonly months!: number\n  @Prop({ default: 24 }) readonly maxNumberOfMonths!: number\n\n  // Local properties\n  radioValue = '' // v-model for radio buttons\n  inputValue = '' // v-model for months text field\n\n  /**\n   * The validation rules for months input.\n   */\n  get monthsRules (): Array<(v: string) => boolean | string> {\n    return [\n      (v) => (+v > 0 && +v <= this.maxNumberOfMonths) || 'Must be between 1 and ' + this.maxNumberOfMonths,\n      (v) => (+v % 1 === 0) || 'Must be a whole number'\n    ]\n  }\n\n  /**\n   * Called when the component is mounted.\n   * Sets the initial radio button and months input (if applicable).\n   */\n  mounted (): void {\n    if ([24, 18, 12, 6].includes(this.months)) {\n      this.radioValue = this.months.toString()\n    } else {\n      this.radioValue = 'customMonths'\n      this.inputValue = this.months.toString()\n    }\n  }\n\n  /**\n   * Called when months input has changed.\n   */\n  async onMonthsInput (input: string): Promise<void> {\n    // ignore non-inputs\n    if (input !== null) {\n      // wait for component updates\n      await this.$nextTick()\n      // validate the input\n      const valid = this.$refs.monthsRef.validate()\n      // emit validity\n      this.emitValid(valid)\n      // if valid, emit new value\n      if (valid) this.emitMonths(Number(this.inputValue))\n    }\n  }\n\n  /**\n   * Called when radio button has changed.\n   */\n  @Watch('radioValue')\n  private onRadioValueChanged () {\n    if (this.radioValue !== 'customMonths') {\n      // reset months text field when another radio button is selected\n      this.$refs.monthsRef.reset()\n      // emit months and validity\n      this.emitMonths(Number(this.radioValue))\n      this.emitValid(true)\n    } else if (!this.inputValue) {\n      // as there is no input value, this component is invalid\n      // otherwise, validation will be done in onMonthsInput()\n      this.emitValid(false)\n    }\n  }\n\n  /**\n   * Emits the numbed of months selected.\n   */\n  @Emit('months')\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private emitMonths (months: number): void {}\n\n  /**\n   * Emits whether the number of months selected is valid.\n   */\n  @Emit('valid')\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private emitValid (valid: boolean): void {}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/theme.scss';\n.month-text {\n  color: $gray7;\n}\n\n:deep() {\n  // change border style to solid before the selection of the radio button\n  .theme--light.v-text-field.v-input--is-disabled .v-input__slot:before {\n    border-image: none;\n  }\n\n  // decrease the month text field's width\n  .text-field-months {\n    width: 3.5rem;\n    .error--text {\n      margin-left: -0.5rem;\n      position: absolute;\n      width: 10rem;\n    }\n  }\n}\n</style>\n"],"names":["LimitedRestorationPanel","Vue","__publicField","v","input","valid","months","__decorateClass","Prop","Watch","Emit","Component"],"mappings":"ygBA6DA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCAEAC,EAAA,cAIAA,EAAA,eACAA,EAAA,0BAGAA,EAAA,kBAAA,IACAA,EAAA,kBAAA,IAKA,IAAA,aAAA,CACA,MAAA,CACAC,GAAA,CAAAA,EAAA,GAAA,CAAAA,GAAA,KAAA,mBAAA,yBAAA,KAAA,kBACAA,GAAA,CAAAA,EAAA,IAAA,GAAA,wBAAA,CAEA,CAMA,SAAA,CACA,CAAA,GAAA,GAAA,GAAA,CAAA,EAAA,SAAA,KAAA,MAAA,EACA,KAAA,WAAA,KAAA,OAAA,SAAA,GAEA,KAAA,WAAA,eACA,KAAA,WAAA,KAAA,OAAA,SAAA,EAEA,CAKA,MAAA,cAAAC,EAAA,CAEA,GAAAA,IAAA,KAAA,CAEA,MAAA,KAAA,YAEA,MAAAC,EAAA,KAAA,MAAA,UAAA,SAAA,EAEA,KAAA,UAAAA,CAAA,EAEAA,GAAA,KAAA,WAAA,OAAA,KAAA,UAAA,CAAA,CACA,CACA,CAMA,qBAAA,CACA,KAAA,aAAA,gBAEA,KAAA,MAAA,UAAA,QAEA,KAAA,WAAA,OAAA,KAAA,UAAA,CAAA,EACA,KAAA,UAAA,EAAA,GACA,KAAA,YAGA,KAAA,UAAA,EAAA,CAEA,CAOA,WAAAC,EAAA,CAAA,CAOA,UAAAD,EAAA,CAAA,CACA,EA9EAE,EAAA,CAAAC,EAAA,CAAA,SAAA,GAAA,CAAA,EANAR,EAMA,UAAA,SAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAPAR,EAOA,UAAA,oBAAA,CAAA,EAkDAO,EAAA,CADAE,EAAA,YAAA,CAAA,EAxDAT,EAyDA,UAAA,sBAAA,CAAA,EAmBAO,EAAA,CAFAG,EAAA,QAAA,CAAA,EA1EAV,EA4EA,UAAA,aAAA,CAAA,EAOAO,EAAA,CAFAG,EAAA,OAAA,CAAA,EAjFAV,EAmFA,UAAA,YAAA,CAAA,EAnFAA,EAAAO,EAAA,CADAI,EAAA,CAAA,CAAA,CAAA,EACAX,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}