{"version":3,"file":"WebChat.stories-d3bf5ea8.js","sources":["../../src/components/web-chat/WebChat.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"webChatUrl && webChatReason\"\n    id=\"web-chat-container\"\n  >\n    <v-form\n      id=\"webchat\"\n      target=\"webchat_window\"\n      method=\"post\"\n      :action=\"webChatUrl\"\n      @submit=\"onSubmit()\"\n    >\n      <input\n        type=\"hidden\"\n        name=\"Reason\"\n        :value=\"webChatReason\"\n      >\n      <input\n        type=\"hidden\"\n        name=\"UserLanguage\"\n        value=\"en\"\n      >\n      <input\n        type=\"hidden\"\n        name=\"Parameters[TimeZoneOffset]\"\n        :value=\"timeZoneOffset\"\n      >\n\n      <v-tooltip\n        top\n        content-class=\"top-tooltip\"\n        nudge-top=\"5\"\n        :disabled=\"isMobile\"\n      >\n        <template #activator=\"{ on, attrs }\">\n          <div\n            id=\"chat-button-wrapper\"\n            v-bind=\"attrs\"\n            v-on=\"on\"\n          >\n            <v-btn\n              :disabled=\"(chatStatus !== 'open')\"\n              large\n              outlined\n              color=\"bcgovblue\"\n              elevation=\"4\"\n              class=\"chat-button\"\n              type=\"submit\"\n              v-bind=\"attrs\"\n              aria-label=\"Chat with Helpdesk staff\"\n              v-on=\"on\"\n            >\n              <v-icon class=\"mr-2 ml-n2\">\n                mdi-forum-outline\n              </v-icon>\n              <span class=\"font-weight-bold\">Chat</span>\n            </v-btn>\n          </div>\n        </template>\n        <span\n          v-if=\"chatStatus === 'open'\"\n          id=\"open-tooltip-message\"\n        >\n          {{ openTooltipMessage }}\n        </span>\n        <span\n          v-else-if=\"chatStatus === 'closed'\"\n          id=\"closed-tooltip-message\"\n        >\n          {{ closedTooltipMessage }}\n        </span>\n        <span\n          v-else\n          id=\"unavailable-tooltip-message\"\n        >\n          {{ unavailableTooltipMessage }}\n        </span>\n      </v-tooltip>\n    </v-form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Prop } from 'vue-property-decorator'\n\n@Component({})\nexport default class ChatPopup extends Vue {\n  @Prop({ required: true }) readonly axios!: any\n  @Prop({ default: false }) readonly isMobile!: boolean\n  @Prop({ default: null }) readonly webChatReason!: string\n  @Prop({ default: null }) readonly webChatStatusUrl!: string\n  @Prop({ default: null }) readonly webChatUrl!: string\n\n  @Prop({ default: 'Click here to chat live with Helpdesk staff.' })\n  readonly openTooltipMessage!: string\n\n  @Prop({ default: 'We are closed. The Service BC Contact Centre is open Monday through ' +\n    'Friday 7:30am â€“ 5:00pm Pacific Time excluding BC statutory holidays.' })\n  readonly closedTooltipMessage!: string\n\n  @Prop({ default: 'Webchat is temporarily unavailable.' })\n  readonly unavailableTooltipMessage!: string\n\n  protected chatStatus = 'unknown'\n\n  /** The user's browser's tz offset (not necessarily Pacific time). */\n  get timeZoneOffset (): number {\n    return (new Date().getTimezoneOffset() / 60)\n  }\n\n  /** Called when component is mounted. */\n  async mounted (): Promise<void> {\n    if (this.webChatStatusUrl) {\n      this.chatStatus = await this.axios\n        .get(this.webChatStatusUrl)\n        .then(response => {\n          return (response.data?.status || 'response error')\n        })\n        .catch(error => {\n          // eslint-disable-next-line no-console\n          console.error('failed to get webchat status, error =', error)\n          return (error.response?.statusText || 'network error')\n        })\n    }\n  }\n\n  protected onSubmit (): void {\n    window.open('about:blank', 'webchat_window', 'width=400, height=500')\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/assets/styles/theme.scss';\n\n#web-chat-container {\n  position: fixed;\n  bottom: -1px;\n  right: 1rem;\n  z-index: 999;\n}\n\n.chat-button {\n  margin-bottom: -1px;\n  min-height: 40px;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n  background-color: white !important;\n}\n\n.v-tooltip__content {\n  padding: 1rem !important;\n  background-color: rgba(0,0,0,0.85) !important;\n}\n\n.top-tooltip {\n  max-width: 12rem;\n}\n\n.top-tooltip:after {\n  border-top: 8px solid rgba(0,0,0,0.85) !important;\n}\n\n.bcgovblue--text {\n  color: $BCgovBlue5 !important;\n  caret-color: $BCgovBlue5 !important;\n}\n</style>\n"],"names":["ChatPopup","Vue","__publicField","response","_a","error","__decorateClass","Prop","Component"],"mappings":"snBAuFA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCACAC,EAAA,cACAA,EAAA,iBACAA,EAAA,sBACAA,EAAA,yBACAA,EAAA,mBAGAA,EAAA,2BAIAA,EAAA,6BAGAA,EAAA,kCAEAA,EAAA,kBAAA,WAGA,IAAA,gBAAA,CACA,OAAA,IAAA,KAAA,EAAA,kBAAA,EAAA,EACA,CAGA,MAAA,SAAA,CACA,KAAA,mBACA,KAAA,WAAA,MAAA,KAAA,MACA,IAAA,KAAA,gBAAA,EACA,KAAAC,GAAA,OACA,QAAAC,EAAAD,EAAA,OAAA,YAAAC,EAAA,SAAA,gBAAA,CACA,EACA,MAAAC,GAAA,OAEA,eAAA,MAAA,wCAAAA,CAAA,IACAD,EAAAC,EAAA,WAAA,YAAAD,EAAA,aAAA,eAAA,CACA,EAEA,CAEA,UAAA,CACA,OAAA,KAAA,cAAA,iBAAA,uBAAA,CACA,CACA,EA1CAE,EAAA,CAAAC,EAAA,CAAA,SAAA,GAAA,CAAA,EADAP,EACA,UAAA,QAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAFAP,EAEA,UAAA,WAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAHAP,EAGA,UAAA,gBAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAJAP,EAIA,UAAA,mBAAA,CAAA,EACAM,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EALAP,EAKA,UAAA,aAAA,CAAA,EAGAM,EAAA,CADAC,EAAA,CAAA,QAAA,+CAAA,CAAA,EAPAP,EAQA,UAAA,qBAAA,CAAA,EAIAM,EAAA,CAFAC,EAAA,CAAA,QAAA,2IACA,CAAA,EAXAP,EAYA,UAAA,uBAAA,CAAA,EAGAM,EAAA,CADAC,EAAA,CAAA,QAAA,sCAAA,CAAA,EAdAP,EAeA,UAAA,4BAAA,CAAA,EAfAA,EAAAM,EAAA,CADAE,EAAA,CAAA,CAAA,CAAA,EACAR,CAAA;;;;;;;;;;;;"}