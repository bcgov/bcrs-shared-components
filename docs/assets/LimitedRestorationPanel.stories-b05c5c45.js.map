{"version":3,"file":"LimitedRestorationPanel.stories-b05c5c45.js","sources":["../../src/components/limited-restoration-panel/LimitedRestorationPanel.vue"],"sourcesContent":["<template id=\"limited-restoration-panel\">\r\n  <v-radio-group\r\n    v-model=\"radioValue\"\r\n    class=\"mt-0 pt-0 ml-8\"\r\n    mandatory\r\n  >\r\n    <v-radio\r\n      id=\"radio-24\"\r\n      class=\"radio-button pt-2\"\r\n      label=\"2 years\"\r\n      value=\"24\"\r\n    />\r\n    <v-radio\r\n      id=\"radio-18\"\r\n      class=\"radio-button pt-2\"\r\n      label=\"18 months\"\r\n      value=\"18\"\r\n    />\r\n    <v-radio\r\n      id=\"radio-12\"\r\n      class=\"radio-button pt-2\"\r\n      label=\"12 months\"\r\n      value=\"12\"\r\n    />\r\n    <v-radio\r\n      id=\"radio-6\"\r\n      class=\"radio-button pt-2\"\r\n      label=\"6 months\"\r\n      value=\"6\"\r\n    />\r\n    <v-row class=\"ml-0 mt-0 radio-button pt-2\">\r\n      <v-radio\r\n        id=\"radio-custom\"\r\n        class=\"mt-n4\"\r\n        value=\"customMonths\"\r\n      />\r\n      <v-form ref=\"monthsRef\">\r\n        <v-text-field\r\n          id=\"text-field-months\"\r\n          v-model=\"inputValue\"\r\n          class=\"text-field-months\"\r\n          type=\"number\"\r\n          dense\r\n          filled\r\n          hide-spin-buttons\r\n          :rules=\"monthsRules\"\r\n          :disabled=\"(radioValue !== 'customMonths')\"\r\n          @input=\"onMonthsInput($event)\"\r\n        />\r\n      </v-form>\r\n      <span class=\"ml-2 mt-2 month-text\">month(s)</span>\r\n    </v-row>\r\n  </v-radio-group>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue from 'vue'\r\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\r\nimport { FormIF } from '@bcrs-shared-components/interfaces'\r\n\r\n@Component({})\r\nexport default class LimitedRestorationPanel extends Vue {\r\n  // Refs\r\n  $refs!: Vue['$refs'] & {\r\n    monthsRef: FormIF\r\n  }\r\n\r\n  @Prop({ required: true }) readonly months!: number\r\n  @Prop({ default: 24 }) readonly maxNumberOfMonths!: number\r\n\r\n  // Local properties\r\n  radioValue = '' // v-model for radio buttons\r\n  inputValue = '' // v-model for months text field\r\n\r\n  /**\r\n   * The validation rules for months input.\r\n   */\r\n  get monthsRules (): Array<(v: string) => boolean | string> {\r\n    return [\r\n      (v) => (+v > 0 && +v <= this.maxNumberOfMonths) || 'Must be between 1 and ' + this.maxNumberOfMonths,\r\n      (v) => (+v % 1 === 0) || 'Must be a whole number'\r\n    ]\r\n  }\r\n\r\n  /**\r\n   * Called when the component is mounted.\r\n   * Sets the initial radio button and months input (if applicable).\r\n   */\r\n  mounted (): void {\r\n    if ([24, 18, 12, 6].includes(this.months)) {\r\n      this.radioValue = this.months.toString()\r\n    } else {\r\n      this.radioValue = 'customMonths'\r\n      this.inputValue = this.months.toString()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called when months input has changed.\r\n   */\r\n  async onMonthsInput (input: string): Promise<void> {\r\n    // ignore non-inputs\r\n    if (input !== null) {\r\n      // wait for component updates\r\n      await this.$nextTick()\r\n      // validate the input\r\n      const valid = this.$refs.monthsRef.validate()\r\n      // emit validity\r\n      this.emitValid(valid)\r\n      // if valid, emit new value\r\n      if (valid) this.emitMonths(Number(this.inputValue))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called when radio button has changed.\r\n   */\r\n  @Watch('radioValue')\r\n  private onRadioValueChanged () {\r\n    if (this.radioValue !== 'customMonths') {\r\n      // reset months text field when another radio button is selected\r\n      this.$refs.monthsRef.reset()\r\n      // emit months and validity\r\n      this.emitMonths(Number(this.radioValue))\r\n      this.emitValid(true)\r\n    } else if (!this.inputValue) {\r\n      // as there is no input value, this component is invalid\r\n      // otherwise, validation will be done in onMonthsInput()\r\n      this.emitValid(false)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Emits the numbed of months selected.\r\n   */\r\n  @Emit('months')\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  private emitMonths (months: number): void {}\r\n\r\n  /**\r\n   * Emits whether the number of months selected is valid.\r\n   */\r\n  @Emit('valid')\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  private emitValid (valid: boolean): void {}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/styles/theme.scss';\r\n.month-text {\r\n  color: $gray7;\r\n}\r\n\r\n:deep() {\r\n  // change border style to solid before the selection of the radio button\r\n  .theme--light.v-text-field.v-input--is-disabled .v-input__slot:before {\r\n    border-image: none;\r\n  }\r\n\r\n  // decrease the month text field's width\r\n  .text-field-months {\r\n    width: 3.5rem;\r\n    .error--text {\r\n      margin-left: -0.5rem;\r\n      position: absolute;\r\n      width: 10rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["LimitedRestorationPanel","Vue","__publicField","v","input","valid","months","__decorateClass","Prop","Watch","Emit","Component"],"mappings":"ygBA6DA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCAEAC,EAAA,cAIAA,EAAA,eACAA,EAAA,0BAGAA,EAAA,kBAAA,IACAA,EAAA,kBAAA,IAKA,IAAA,aAAA,CACA,MAAA,CACAC,GAAA,CAAAA,EAAA,GAAA,CAAAA,GAAA,KAAA,mBAAA,yBAAA,KAAA,kBACAA,GAAA,CAAAA,EAAA,IAAA,GAAA,wBAAA,CAEA,CAMA,SAAA,CACA,CAAA,GAAA,GAAA,GAAA,CAAA,EAAA,SAAA,KAAA,MAAA,EACA,KAAA,WAAA,KAAA,OAAA,SAAA,GAEA,KAAA,WAAA,eACA,KAAA,WAAA,KAAA,OAAA,SAAA,EAEA,CAKA,MAAA,cAAAC,EAAA,CAEA,GAAAA,IAAA,KAAA,CAEA,MAAA,KAAA,YAEA,MAAAC,EAAA,KAAA,MAAA,UAAA,SAAA,EAEA,KAAA,UAAAA,CAAA,EAEAA,GAAA,KAAA,WAAA,OAAA,KAAA,UAAA,CAAA,CACA,CACA,CAMA,qBAAA,CACA,KAAA,aAAA,gBAEA,KAAA,MAAA,UAAA,QAEA,KAAA,WAAA,OAAA,KAAA,UAAA,CAAA,EACA,KAAA,UAAA,EAAA,GACA,KAAA,YAGA,KAAA,UAAA,EAAA,CAEA,CAOA,WAAAC,EAAA,CAAA,CAOA,UAAAD,EAAA,CAAA,CACA,EA9EAE,EAAA,CAAAC,EAAA,CAAA,SAAA,GAAA,CAAA,EANAR,EAMA,UAAA,SAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAPAR,EAOA,UAAA,oBAAA,CAAA,EAkDAO,EAAA,CADAE,EAAA,YAAA,CAAA,EAxDAT,EAyDA,UAAA,sBAAA,CAAA,EAmBAO,EAAA,CAFAG,EAAA,QAAA,CAAA,EA1EAV,EA4EA,UAAA,aAAA,CAAA,EAOAO,EAAA,CAFAG,EAAA,OAAA,CAAA,EAjFAV,EAmFA,UAAA,YAAA,CAAA,EAnFAA,EAAAO,EAAA,CADAI,EAAA,CAAA,CAAA,CAAA,EACAX,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}