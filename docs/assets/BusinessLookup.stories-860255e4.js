var g=Object.defineProperty;var y=(t,e,s)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>(y(t,typeof e!="symbol"?e+"":e,s),s);import{V as k}from"./vue.esm-b1e57a2f.js";import{C as L,P as u,E as h,n as C}from"./_plugin-vue2_normalizer-b11a0120.js";import{W as c}from"./Watch-62f8b699.js";import{l as N}from"./lodash-bc5bedbb.js";import"./_commonjsHelpers-042e6b4d.js";var S=Object.defineProperty,E=Object.getOwnPropertyDescriptor,a=(t,e,s,i)=>{for(var r=i>1?void 0:i?E(e,s):e,p=t.length-1,d;p>=0;p--)(d=t[p])&&(r=(i?d(e,s,r):d(r))||r);return i&&r&&S(e,s,r),r},_=(t=>(t.INITIAL="initial",t.SEARCHING="searching",t.SHOW_RESULTS="show results",t.NO_RESULTS="no results",t.SUMMARY="summary",t))(_||{});let o=class extends k{constructor(){super(...arguments);n(this,"showErrors");n(this,"businessLookup");n(this,"BusinessLookupServices");n(this,"hasBusinessLookupChanges");n(this,"editableBusinessName");n(this,"searchStatus");n(this,"States",_);n(this,"state","initial");n(this,"searchField","");n(this,"searchResults",[]);n(this,"selectedBusiness",null);n(this,"businessLookupRules",[s=>!!s||"Business is required"]);n(this,"businessNameRules",[s=>!!(s!=null&&s.trim())||"Business or corporation name is required",s=>(s==null?void 0:s.length)<=150||"Cannot exceed 150 characters"]);n(this,"onSearchField",N.debounce(async()=>{this.searchField&&this.searchField.length>2?(this.state="searching",this.searchResults=await this.BusinessLookupServices.search(this.searchField,this.searchStatus).catch(()=>[]),this.state=this.searchResults.length>0?"show results":"no results"):(this.searchResults=[],this.state="initial")},600))}get identifier(){return this.businessLookup.identifier}get businessName(){return this.businessLookup.name}get businessNumber(){return this.businessLookup.bn||""}get haveBusiness(){return!!this.identifier&&(!!this.businessName||this.editableBusinessName)}get isFormValid(){return this.haveBusiness&&this.state==="summary"}setBusinessName(s){const i=s==null?void 0:s.trim();this.onSelectedBusiness({...this.businessLookup,name:i})}onSelectedBusiness(s){s&&(this.setBusiness({identifier:s.identifier,name:s.name,bn:s.bn}),this.selectedBusiness=null)}onHaveBusinessChanged(s){this.state=s?"summary":"initial"}onIsFormValidChanged(s){this.emitValid(s)}setBusiness(s){}emitUndo(){}emitValid(s){}};a([u({required:!0})],o.prototype,"showErrors",2);a([u({required:!0})],o.prototype,"businessLookup",2);a([u({required:!0})],o.prototype,"BusinessLookupServices",2);a([u({default:!1})],o.prototype,"hasBusinessLookupChanges",2);a([u({default:!1})],o.prototype,"editableBusinessName",2);a([u({default:"ACTIVE"})],o.prototype,"searchStatus",2);a([c("searchField")],o.prototype,"onSearchField",2);a([c("selectedBusiness")],o.prototype,"onSelectedBusiness",1);a([c("haveBusiness",{immediate:!0})],o.prototype,"onHaveBusinessChanged",1);a([c("isFormValid")],o.prototype,"onIsFormValidChanged",1);a([h("setBusiness")],o.prototype,"setBusiness",1);a([h("undoBusiness")],o.prototype,"emitUndo",1);a([h("valid")],o.prototype,"emitValid",1);o=a([L({})],o);var x=function(){var e=this,s=e._self._c;return e._self._setupProxy,s("div",{attrs:{id:"business-lookup"}},[e.state!==e.States.SUMMARY?s("div",[s("v-autocomplete",{staticClass:"mt-5",attrs:{filled:"","no-filter":"","append-icon":"","return-object":"",autocomplete:"chrome-off","menu-props":"{ maxHeight: 380 }",label:"Business or Corporation Name or Incorporation Number","item-text":"identifier",name:Math.random(),rules:e.showErrors?e.businessLookupRules:[],items:e.searchResults,loading:e.state==e.States.SEARCHING,"hide-no-data":e.state!=e.States.NO_RESULTS},scopedSlots:e._u([{key:"selection",fn:function(){},proxy:!0},{key:"no-data",fn:function(){return[s("v-list-item",[s("div",[e._v("No matches found.")])])]},proxy:!0},{key:"item",fn:function({item:i}){return[s("v-row",{staticClass:"business-lookup-result pt-1"},[s("v-col",{attrs:{cols:"2"}},[s("div",{staticClass:"result-identifier"},[e._v(" "+e._s(i.identifier)+" ")])]),s("v-col",{attrs:{cols:"10"}},[s("div",{staticClass:"result-name"},[e._v(" "+e._s(i.name)+" ")]),s("div",{staticClass:"result-bn"},[e._v(" "+e._s(i.bn)+" ")])])],1)]}}],null,!1,2512664218),model:{value:e.searchField,callback:function(i){e.searchField=i},expression:"searchField"}})],1):e._e(),e.state===e.States.SUMMARY&&e.haveBusiness?s("div",{staticClass:"summary-block mt-5"},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"10"}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[e.editableBusinessName?s("div",{staticClass:"d-flex align-center"},[s("label",[e._v("Business or Corporation Name:")]),s("v-text-field",{staticClass:"mx-4 mr-md-0",attrs:{id:"organization-name",dense:"",filled:"","hide-details":"auto",rules:e.businessNameRules,value:e.businessName},on:{input:function(i){return e.setBusinessName(i)}}})],1):[s("label",[e._v("Name: ")]),s("span",[e._v(e._s(e.businessName))])]],2)],1),s("v-row",{staticClass:"mt-1",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("label",[e._v("Incorporation Number: ")]),s("span",[e._v(e._s(e.identifier))])])],1),s("v-row",{staticClass:"mt-1",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12"}},[s("label",[e._v("Business Number: ")]),s("span",[e._v(e._s(e.businessNumber))])])],1)],1),s("v-col",{attrs:{cols:"2"}},[s("div",{attrs:{id:"bl-more-actions"}},[s("v-btn",{attrs:{id:"bl-undo-btn",text:"",color:"primary"},on:{click:function(i){return e.emitUndo()}}},[s("v-icon",{attrs:{small:""}},[e._v(" mdi-undo ")]),s("span",[e._v("Undo")])],1)],1)])],1)],1):e._e()])},R=[],B=C(o,x,R,!1,null,"34ec7882",null,null);const w=B.exports;B.exports.__docgenInfo={exportName:"default",displayName:"BusinessLookup",description:"",tags:{},props:[{name:"showErrors",tags:{},description:"Whether to show errors.",type:{name:"boolean"},required:!0},{name:"businessLookup",tags:{},description:"The BusinessLookup object.",type:{name:"BusinessLookupIF"},required:!0},{name:"BusinessLookupServices",tags:{},description:"Class for BusinessLookup services.",type:{name:"any"},required:!0},{name:"hasBusinessLookupChanges",tags:{},description:"Whether to display Change features.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"editableBusinessName",tags:{},description:"Whether to allow editing of business name.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"searchStatus",tags:{},description:"Business status to search for (eg, ACTIVE or HISTORICAL or '' to match all.",type:{name:"string"},defaultValue:{func:!1,value:"'ACTIVE'"}}],events:[{name:"setBusiness",description:"Emits event to update the Business object."},{name:"undoBusiness",description:"Emits event to undo the selected business."},{name:"valid",description:"Emits event to update this component's validity."}],sourceFiles:["/home/severin/repos/bcrs-shared-components/src/components/business-lookup/BusinessLookup.vue"]};const j={title:"component/BusinessLookup"},F=(t,{argTypes:e})=>({props:Object.keys(e),components:{BusinessLookup:w},template:'<business-lookup v-bind="$props" />'}),m={identifier:"BC1234567",name:"Test Business Name"};class I{static async search(e){return Promise.resolve([m])}}const l=F.bind({});l.args={showErrors:!1,businessLookup:{identifier:m.identifier,name:m.name},BusinessLookupServices:I,hasBusinessLookupChanges:!0};var f,v,b;l.parameters={...l.parameters,docs:{...(f=l.parameters)==null?void 0:f.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    BusinessLookup
  },
  template: '<business-lookup v-bind="$props" />' // $props comes from args below
})`,...(b=(v=l.parameters)==null?void 0:v.docs)==null?void 0:b.source}}};const H=["Default"];export{l as Default,H as __namedExportsOrder,j as default};
//# sourceMappingURL=BusinessLookup.stories-860255e4.js.map
