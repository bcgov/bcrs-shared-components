var A=Object.defineProperty;var L=(a,e,s)=>e in a?A(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var i=(a,e,s)=>(L(a,typeof e!="symbol"?e+"":e,s),s);import{V as h}from"./vue.esm-b1e57a2f.js";import{C,n as g,P as d,E as v}from"./_plugin-vue2_normalizer-b11a0120.js";import{W as O}from"./Watch-62f8b699.js";var F=Object.defineProperty,P=Object.getOwnPropertyDescriptor,U=(a,e,s,t)=>{for(var r=t>1?void 0:t?P(e,s):e,o=a.length-1,l;o>=0;o--)(l=a[o])&&(r=(t?l(e,s,r):l(r))||r);return t&&r&&F(e,s,r),r};let f=class extends h{};f=U([C({})],f);var j=function(){var e=this;return e._self._c,e._self._setupProxy,e._m(0)},H=[function(){var a=this,e=a._self._c;return a._self._setupProxy,e("div",{attrs:{id:"naics-help-text"}},[e("p",[a._v("If you are having difficulty locating a NAICS code, try the following:")]),e("ul",[e("li",[a._v(" Use more general terms (for example, instead of searching 'imported shoe sales', try 'shoe'). ")]),e("li",[a._v(" Remove pluralization or unnecessary endings (for example, instead of searching 'deliveries', try 'deliver'). ")])])])}],R=g(f,j,H,!1,null,"7f7553c3",null,null);const B=R.exports;R.exports.__docgenInfo={exportName:"default",displayName:"NaicsHelpText",description:"",tags:{},sourceFiles:["/Users/work/repos/bcrs-shared-components/src/components/nature-of-business/NaicsHelpText.vue"]};var V=Object.defineProperty,M=Object.getOwnPropertyDescriptor,b=(a,e,s,t)=>{for(var r=t>1?void 0:t?M(e,s):e,o=a.length-1,l;o>=0;o--)(l=a[o])&&(r=(t?l(e,s,r):l(r))||r);return t&&r&&V(e,s,r),r};let m=class extends h{constructor(){super(...arguments);i(this,"result");i(this,"showMore",!0)}emitClick(){}get elements(){var s;return((s=this.result)==null?void 0:s.naicsElements)||[]}capitalize(s){return s.replace(/^\w/,t=>t.toUpperCase())}};b([d({required:!0})],m.prototype,"result",2);b([v("click")],m.prototype,"emitClick",1);m=b([C({})],m);var q=function(){var e=this,s=e._self._c;return e._self._setupProxy,e.result?s("v-row",{staticClass:"naics-result",attrs:{"no-gutters":""},on:{click:function(t){return e.emitClick()}}},[s("v-col",{attrs:{cols:"2"}},[s("div",{staticClass:"result-code"},[e._v(" "+e._s(e.result.code)+" ")])]),s("v-col",{attrs:{cols:"10"}},[s("div",{staticClass:"d-flex justify-space-between align-top"},[s("label",{staticClass:"result-class-title"},[e._v(e._s(e.result.classTitle))]),s("v-btn",{staticClass:"mt-n2",attrs:{large:"",depressed:"",color:"primary"}},[e._v(" Select ")])],1),s("div",{staticClass:"result-class-definition"},[e._v(" "+e._s(e.result.classDefinition)+" ")]),e.elements.length>0?[s("div",{staticClass:"sample-activities"},[e._v(" Sample activities: ")]),s("ul",[e._l(e.elements,function(t,r){return[e.showMore||r<5?s("li",{key:r},[e._v(" "+e._s(e.capitalize(t.elementDescription))+" ")]):e._e()]})],2),!e.showMore&&e.elements.length>=5?s("div",{staticClass:"show-more",on:{click:function(t){t.stopPropagation(),e.showMore=!0}}},[e._v(" Show more... ")]):e._e()]:e._e()],2)],1):e._e()},W=[],T=g(m,q,W,!1,null,"5291be47",null,null);const z=T.exports;T.exports.__docgenInfo={exportName:"default",displayName:"NaicsResult",description:"",tags:{},props:[{name:"result",tags:{},type:{name:"NaicsResultIF"},required:!0}],events:[{name:"click"}],sourceFiles:["/Users/work/repos/bcrs-shared-components/src/components/nature-of-business/NaicsResult.vue"]};var Y=Object.defineProperty,G=Object.getOwnPropertyDescriptor,c=(a,e,s,t)=>{for(var r=t>1?void 0:t?G(e,s):e,o=a.length-1,l;o>=0;o--)(l=a[o])&&(r=(t?l(e,s,r):l(r))||r);return t&&r&&Y(e,s,r),r},E=(a=>(a.INITIAL="initial",a.SEARCHING="searching",a.SHOW_RESULTS="show results",a.NO_RESULTS="no results",a.SUMMARY="summary",a))(E||{});let n=class extends h{constructor(){super(...arguments);i(this,"STATS_CAN_URL","https://www.statcan.gc.ca/en/subjects/standard/naics/2017/v3/index");i(this,"showErrors");i(this,"naics");i(this,"NaicsServices");i(this,"hasNaicsChanges");i(this,"editLabel");i(this,"editedLabel");i(this,"States",E);i(this,"state","initial");i(this,"searchField","");i(this,"searchResults",[]);i(this,"dropdown",null);i(this,"natureOfBusinessRules",[s=>!!s||"Nature of Business is required"])}get naicsCode(){return this.naics.naicsCode}get naicsDescription(){return this.naics.naicsDescription}get haveNaics(){return!!this.naicsCode||!!this.naicsDescription}get isFormValid(){return this.haveNaics&&this.state==="summary"}async onSearchClicked(){this.searchField=this.searchField.trim().replaceAll(/\s+/g," "),this.searchField&&(this.state="searching",this.searchResults=await this.NaicsServices.search(this.searchField).catch(()=>[]),this.state=this.searchResults.length>0?"show results":"no results")}onResultClicked(s){s&&(this.setNaics({naicsCode:s.code,naicsDescription:s.classTitle}),this.state="summary")}onCancelClicked(){this.state=this.haveNaics?"summary":"initial"}onChangeClicked(){this.searchField=this.naicsDescription.toLowerCase(),this.state="initial"}onHaveNaicsChanged(s){this.state=s?"summary":"initial"}onIsFormValidChanged(s){this.emitValid(s)}setNaics(s){}emitUndo(){}emitValid(s){}};c([d({required:!0})],n.prototype,"showErrors",2);c([d({required:!0})],n.prototype,"naics",2);c([d({required:!0})],n.prototype,"NaicsServices",2);c([d({default:!1})],n.prototype,"hasNaicsChanges",2);c([d({default:"Change"})],n.prototype,"editLabel",2);c([d({default:"Changed"})],n.prototype,"editedLabel",2);c([O("haveNaics",{immediate:!0})],n.prototype,"onHaveNaicsChanged",1);c([O("isFormValid",{immediate:!0})],n.prototype,"onIsFormValidChanged",1);c([v("setNaics")],n.prototype,"setNaics",1);c([v("undoNaics")],n.prototype,"emitUndo",1);c([v("valid")],n.prototype,"emitValid",1);n=c([C({components:{NaicsHelpText:B,NaicsResult:z}})],n);var K=function(){var e=this,s=e._self._c;return e._self._setupProxy,s("div",{attrs:{id:"nature-of-business"}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"pr-4",attrs:{cols:"12",sm:"3"}},[s("label",[e._v("Nature of Business")]),e.hasNaicsChanges?s("v-chip",{attrs:{id:"edited-chip","x-small":"",label:"",color:"primary","text-color":"white"}},[e._v(" "+e._s(e.editedLabel)+" ")]):e._e()],1),s("v-col",{attrs:{cols:"12",sm:"9"}},[e.state!==e.States.SUMMARY?s("div",[s("p",{staticClass:"ma-0"},[e._v(" Enter one or more keywords that describe the primary nature of your business or enter the six-digit NAICS code. Learn more by visiting the "),s("a",{attrs:{href:e.STATS_CAN_URL,target:"_blank",rel:"noopener noreferrer"}},[s("span",[e._v("Statistics Canada website")])]),s("v-icon",{attrs:{small:"",color:"primary"}},[e._v(" mdi-open-in-new ")]),e._v(". ")],1),s("v-text-field",{staticClass:"mt-5",attrs:{filled:"","persistent-hint":"",autocomplete:"chrome-off",label:"Keywords or Six-Digit NAICS",hint:"Example: landscaping, grocery, automotive repair, etc.",name:Math.random(),rules:e.showErrors?e.natureOfBusinessRules:[]},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearchClicked()}},scopedSlots:e._u([{key:"append",fn:function(){return[s("v-btn",{attrs:{id:"nob-search-btn",depressed:"",color:"primary",loading:e.state===e.States.SEARCHING},on:{click:function(t){return e.onSearchClicked()}}},[s("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1713726748),model:{value:e.searchField,callback:function(t){e.searchField=t},expression:"searchField"}}),e.state===e.States.INITIAL&&e.haveNaics?[s("v-btn",{staticClass:"float-right",attrs:{id:"nob-cancel1-btn",large:"",outlined:"",color:"primary"},on:{click:function(t){return e.onCancelClicked()}}},[s("span",[e._v("Cancel")])])]:e._e()],2):e._e(),e.state===e.States.SHOW_RESULTS?s("div",{staticClass:"mt-5"},[s("p",{staticClass:"ma-0"},[e._v(" Select an option below that best describes the nature of your business: ")]),s("div",{staticClass:"mt-5",attrs:{id:"result-list"}},[e._l(e.searchResults,function(t,r){return s("NaicsResult",{key:r,attrs:{result:t},on:{click:function(o){return e.onResultClicked(t)}}})}),s("v-row",{staticClass:"pa-6",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"2"}}),s("v-col",{attrs:{cols:"10"}},[s("NaicsHelpText")],1)],1)],2),s("v-btn",{staticClass:"float-right mt-8",attrs:{id:"nob-cancel2-btn",large:"",outlined:"",color:"primary"},on:{click:function(t){return e.onCancelClicked()}}},[s("span",[e._v("Cancel")])])],1):e._e(),e.state===e.States.NO_RESULTS?s("div",{staticClass:"mt-5"},[s("p",{staticClass:"font-weight-bold"},[e._v(" No results found. ")]),s("NaicsHelpText"),s("v-btn",{staticClass:"float-right mt-8",attrs:{id:"nob-cancel3-btn",large:"",outlined:"",color:"primary"},on:{click:function(t){return e.onCancelClicked()}}},[s("span",[e._v("Cancel")])])],1):e._e(),e.state===e.States.SUMMARY?s("div",{staticClass:"summary-block d-flex justify-space-between align-center"},[e.naicsCode&&e.naicsDescription?s("span",[e._v(e._s(e.naicsCode)+" - "+e._s(e.naicsDescription))]):e.naicsCode?s("span",[e._v(e._s(e.naicsCode))]):e.naicsDescription?s("span",[e._v(e._s(e.naicsDescription))]):s("span",[e._v("(Not entered)")]),e.hasNaicsChanges?s("div",{attrs:{id:"nob-more-actions"}},[s("v-btn",{attrs:{id:"nob-undo-btn",text:"",color:"primary"},on:{click:function(t){return e.emitUndo()}}},[s("v-icon",{attrs:{small:""}},[e._v(" mdi-undo ")]),s("span",[e._v("Undo")])],1),s("v-menu",{attrs:{"offset-y":"",left:"","nudge-bottom":"4"},scopedSlots:e._u([{key:"activator",fn:function({on:t}){return[s("v-btn",e._g({attrs:{id:"nob-menu-btn",text:"",small:"",color:"primary"}},t),[s("v-icon",[e._v(e._s(e.dropdown?"mdi-menu-up":"mdi-menu-down"))])],1)]}}],null,!1,1899410277),model:{value:e.dropdown,callback:function(t){e.dropdown=t},expression:"dropdown"}},[s("v-btn",{staticClass:"py-5",attrs:{id:"more-changes-btn",text:"",color:"primary"},on:{click:function(t){e.onChangeClicked(),e.dropdown=!1}}},[s("v-icon",{attrs:{small:"",color:"primary"}},[e._v(" mdi-pencil ")]),e._v("Change ")],1)],1)],1):s("v-btn",{attrs:{id:"nob-edit-btn",text:"",color:"primary"},on:{click:function(t){return e.onChangeClicked()}}},[s("v-icon",{attrs:{small:""}},[e._v(" mdi-pencil ")]),s("span",[e._v(e._s(e.editLabel))])],1)],1):e._e()])],1)],1)},J=[],$=g(n,K,J,!1,null,"39077943",null,null);const Q=$.exports;$.exports.__docgenInfo={exportName:"default",displayName:"NatureOfBusiness",description:"",tags:{},props:[{name:"showErrors",tags:{},description:"Whether to show errors.",type:{name:"boolean"},required:!0},{name:"naics",tags:{},description:"The NAICS object.",type:{name:"NaicsIF"},required:!0},{name:"NaicsServices",tags:{},description:"Class for NAICS services.",type:{name:"any"},required:!0},{name:"hasNaicsChanges",tags:{},description:"Whether to display Change features.",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"editLabel",tags:{},description:"Edit label name (ie, 'Change' or 'Correct').",type:{name:"string"},defaultValue:{func:!1,value:"'Change'"}},{name:"editedLabel",tags:{},description:"Edited label name (ie, 'Changed' or 'Corrected').",type:{name:"string"},defaultValue:{func:!1,value:"'Changed'"}}],events:[{name:"setNaics",description:"Emits event to update the NAICS object."},{name:"undoNaics",description:"Emits undo event."},{name:"valid",description:"Emits event to update this component's validity."}],sourceFiles:["/Users/work/repos/bcrs-shared-components/src/components/nature-of-business/NatureOfBusiness.vue"]};const ie={title:"component/NatureOfBusiness"},I=(a,{argTypes:e})=>({props:Object.keys(e),components:{NatureOfBusiness:Q},template:'<nature-of-business v-bind="$props" />'}),_={code:"12345",classTitle:"Sample NAICS title",classDefinition:"This is a sample NAICS definition.",naicsElements:[{elementDescription:"a NAICS description"},{elementDescription:"another NAICS description"}]};class D{static async search(e){return Promise.resolve([_])}}const u=I.bind({});u.args={showErrors:!1,naics:{naicsCode:_.code,naicsDescription:_.classTitle},NaicsServices:D,editLabel:"Edit",editedLabel:"Edited"};const p=I.bind({});p.args={showErrors:!1,naics:{naicsCode:_.code,naicsDescription:_.classTitle},NaicsServices:D,hasNaicsChanges:!0,editLabel:"Edit",editedLabel:"Edited"};var y,N,w;u.parameters={...u.parameters,docs:{...(y=u.parameters)==null?void 0:y.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    NatureOfBusiness
  },
  template: '<nature-of-business v-bind="$props" />' // $props comes from args below
})`,...(w=(N=u.parameters)==null?void 0:N.docs)==null?void 0:w.source}}};var S,x,k;p.parameters={...p.parameters,docs:{...(S=p.parameters)==null?void 0:S.docs,source:{originalSource:`(args, {
  argTypes
}) => ({
  props: Object.keys(argTypes),
  components: {
    NatureOfBusiness
  },
  template: '<nature-of-business v-bind="$props" />' // $props comes from args below
})`,...(k=(x=p.parameters)==null?void 0:x.docs)==null?void 0:k.source}}};const ne=["Default","hasChanges"];export{u as Default,ne as __namedExportsOrder,ie as default,p as hasChanges};
//# sourceMappingURL=NatureOfBusiness.stories-7d535b66.js.map
