{"version":3,"file":"FeeSummary.stories-3f4c19fb.js","sources":["../../src/enums/fee-summary-actions.ts","../../src/enums/filing-codes.ts","../../src/services/utils/common-util.ts","../../src/services/utils/config-helper.ts","../../src/services/fee-services.ts","../../node_modules/sbc-common-components/src/util/constants.ts","../../src/services/utils/axios-instance.ts","../../src/components/fee-summary/SbcFeeSummary.vue","../../src/components/fee-summary/FeeSummary.vue"],"sourcesContent":["export enum FeeSummaryActions {\n  BACK,\n  CANCEL,\n  CONFIRM,\n  SAVE_RESUME_LATER\n}\n","/** Filing codes to send to Pay API. */\nexport enum FilingCodes {\n  ADDRESS_CHANGE_BC = 'BCADD', // Change of Address - BC, BEN, etc\n  ADDRESS_CHANGE_OT = 'OTADD', // Change of Address - CP\n  ADDRESS_CHANGE_LIQUIDATOR = 'NOCAL', // Change of Address - Liquidator\n  ADDRESS_CHANGE_RECEIVER = 'NOCRM', // Change of Address - Receiver\n  AGM_EXTENSION = 'AGMDT',\n  AGM_LOCATION_CHANGE = 'AGMLC',\n  AFFIDAVIT = 'AFDVT',\n  ALTERATION = 'ALTER',\n  ALTERATION_BC_TO_ULC = 'NOALU', // different fee for BC to ULC\n  AMALGAMATION_HORIZONTAL = 'AMALH', // Amalgamation Application (Horizontal Short Form)\n  AMALGAMATION_REGULAR = 'AMALR', // Amalgamation Application (Regular)\n  AMALGAMATION_VERTICAL = 'AMALV', // Amalgamation Application (Vertical Short Form)\n  AMALGAMATION_OUT = 'AMALO', // Amalgamation Out\n  AMEND_RECEIVER = 'AMEND', // Amend Receiver\n  ANNUAL_REPORT_BC = 'BCANN', // Annual Report - BC, BEN, etc\n  ANNUAL_REPORT_OT = 'OTANN', // Annual Report - CP\n  APPOINT_LIQUIDATOR = 'NOAPL', // Appoint Liquidator\n  APPOINT_RECEIVER = 'NOARM', // Appoint Receiver\n  CEASE_LIQUIDATOR = 'NOCEL', // Cease Liquidator\n  CEASE_RECEIVER = 'NOCER', // Cease Receiver\n  CHANGE_OF_REGISTRATION = 'FMCHANGE',\n  CONSENT_AMALGAMATION_OUT = 'IAMGO', // Consent To Amalgamation Out\n  CONSENT_CONTINUATION_OUT = 'CONTO', // Consent To Continuation Out\n  CONTINUATION_IN = 'CONTI',\n  CONTINUATION_OUT = 'COUTI',\n  CORRECTION = 'CRCTN', // Correction - for both BCOMP and Others\n  COURT_ORDER = 'COURT', // Court Order Fee Code\n  DIRECTOR_CHANGE_BC = 'BCCDR', // Change of Directors - BC, BEN, etc\n  DIRECTOR_CHANGE_OT = 'OTCDR', // Change of Directors - CP\n  DISSOLUTION_ADMINISTRATIVE = 'DIS_ADMIN',\n  DISSOLUTION_COURT_ORDERED_LIQUIDATION = 'DIS_COLQD',\n  DISSOLUTION_INVOLUNTARY = 'DIS_INVOL',\n  DISSOLUTION_RESTORED_IN_ERROR = 'DIS_RSTR',\n  DISSOLUTION_VOLUNTARY = 'DIS_VOL',\n  DISSOLUTION_VOLUNTARY_LIQUIDATION = 'DIS_LQD',\n  FM_CHANGE = 'FMCHANGE',\n  FM_CONVERSION = 'FMCONV',\n  FM_CORRECTION = 'FMCORR',\n  FREE_DIRECTOR_CHANGE_BC = 'BCFDR', // BCOMP - Free Change of Directors\n  FREE_DIRECTOR_CHANGE_OT = 'OTFDR', // Others - Free Change of Directors\n  INCORPORATION_BC = 'BCINC',\n  INCORPORATION_BEN = 'BCINC',\n  INCORPORATION_CC = 'BCINC',\n  INCORPORATION_CP = 'OTINC',\n  INCORPORATION_ULC = 'BCINC',\n  INTENT_TO_LIQUIDATE = 'LQSIN', // Intent to Liquidate\n  LIQUIDATION_REPORT = 'LIQUR', // Liquidation Report\n  NOTICE_OF_WITHDRAWAL = 'NWITH',\n  REGISTRATION_GP = 'FRREG',\n  REGISTRATION_SP = 'FRREG',\n  RESTORATION_FULL = 'RESTF', // for BC/BEN/CC/ULC\n  RESTORATION_LIMITED = 'RESTL', // for BC/BEN/CC/ULC\n  RESTORATION_LTD_EXTEND = 'RESXL', // for BC/BEN/CC/ULC\n  RESTORATION_LTD_TO_FULL = 'RESXF', // for BC/BEN/CC/ULC\n  SPECIAL_RESOLUTION = 'SPRLN',\n  SPECIAL_RESOLUTION_NAME_CHANGE = 'OTCON'\n}\n","import ConfigHelper from './config-helper'\nimport { DocumentRequestIF } from '@bcrs-shared-components/interfaces'\nimport {\n  SessionStorageKeys,\n  ACCOUNT_ID,\n  DOCUMENT_CLASSES,\n  DOCUMENT_TYPES,\n  DocumentClasses\n} from '@bcrs-shared-components/enums'\n\n/**\n * Place to put all the custom utility methods\n */\nexport function getBoolean (value: boolean | string | number): boolean {\n  let resultVal = value\n  if (typeof value === 'string') {\n    resultVal = value.toLowerCase()\n  }\n  switch (resultVal) {\n    case true:\n    case 'true':\n    case 1:\n    case '1':\n    case 'on':\n    case 'yes':\n    case 'none':\n      return true\n    default:\n      return false\n  }\n}\n\nexport function decodeKCToken () {\n  try {\n    const token = ConfigHelper.getFromSession(SessionStorageKeys.KeyCloakToken)\n    if (token) {\n      const base64Url = token.split('.')[1]\n      const base64 = decodeURIComponent(window.atob(base64Url).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)\n      }).join(''))\n      return JSON.parse(base64)\n    } else {\n      return {}\n    }\n  } catch (error) {\n    throw new Error('Error parsing JWT - ' + error)\n  }\n}\n\nexport function trimTrailingSlashURL (url) {\n  return (url) ? url.trim().replace(/\\/+$/, '') : ''\n}\n\nexport function getAccountIdFromCurrentUrl () {\n  const urlParams = new URLSearchParams(window.location.search)\n  return urlParams.get(ACCOUNT_ID) || false\n}\n\nexport function checkAndAppend (url, key = '', value = '') {\n  const separator = (/\\?/).test(url) ? '&' : '?'\n  // remove key from URL  if existing\n  const newUrl = removeAccountIdFromUrl(url, key)\n  return (value !== '' && key !== '') ? `${newUrl}${separator}${key}=${value}` : url\n}\n\n// if account id is not passed, will get it from session\n// there are some cases we need to pass account id, ie  to watch account id and get URL dynamically\nexport function appendAccountId (url, accountId = '') {\n  const sessionAccountId = JSON.parse(ConfigHelper.getFromSession(SessionStorageKeys.CurrentAccount) || '{}').id || ''\n  const currentAccount = accountId !== '' ? accountId : sessionAccountId\n  return checkAndAppend(url, ACCOUNT_ID, currentAccount)\n}\n\nexport function removeAccountIdFromUrl (url, key = ACCOUNT_ID) {\n  // replacing account id and formattig ie, removing extra ? or &\n  return url?.replace(new RegExp(key + '=\\\\w+'), '').replace('?&', '?').replace(/\\?$/, '')\n    .replace('&&', '&').replace(/&$/, '')\n}\n\n/**\n * Appends query parameters to a base URL.\n *\n * @param baseUrl - The base URL.\n * @param params - Key-value pairs (string, number, or boolean) to add as query parameters.\n * @returns A URL object with the query parameters appended.\n */\nexport function buildUrl (baseUrl: string, params?: DocumentRequestIF): URL {\n  const url = new URL(baseUrl)\n\n  Object.entries(params ?? {}).forEach(([k, v]) => v && url.searchParams.append(k, String(v)))\n\n  return url\n}\n\n/**\n * Resolves the document class and type for a given filing and legal type.\n * Defaults to 'CORP' for class and 'systemIsTheRecord' for type if not found.\n *\n * @param filingType - Filing type (e.g., 'annualReport', 'correction').\n * @param legalType - Business legal type (e.g., 'CP', 'SP', 'BC', 'ULC').\n * @returns An object containing `documentClass` and `documentType`.\n */\nexport function getDocumentInfo (filingType: string, legalType: string): {\n  documentClass: string\n  documentType: string\n} {\n  const documentClass = DOCUMENT_CLASSES[legalType] || DocumentClasses.CORP\n  const documentTypeEntry = DOCUMENT_TYPES[filingType]\n\n  let documentType: string = DOCUMENT_TYPES.systemIsTheRecord\n\n  if (typeof documentTypeEntry === 'string') {\n    documentType = documentTypeEntry || DOCUMENT_TYPES.systemIsTheRecord\n  } else if (typeof documentTypeEntry === 'object' && documentTypeEntry !== null) {\n    documentType = documentTypeEntry[documentClass] || DOCUMENT_TYPES.systemIsTheRecord\n  }\n\n  return { documentClass, documentType }\n}\n","import { SessionStorageKeys } from '@bcrs-shared-components/enums'\nimport { trimTrailingSlashURL } from './common-util'\n\nexport default class ConfigHelper {\n  static keycloakConfigUrl = ''\n\n  static addToSession (key: string, value: any): void {\n    sessionStorage.setItem(key, value)\n  }\n\n  static getFromSession (key: string): string | null {\n    return sessionStorage.getItem(key)\n  }\n\n  static removeFromSession (key: string): void {\n    sessionStorage.removeItem(key)\n  }\n\n  static clearSession (): void {\n    sessionStorage.clear()\n  }\n\n  static getStatusAPIUrl (): string {\n    return trimTrailingSlashURL(sessionStorage.getItem(SessionStorageKeys.StatusApiUrl) || '')\n  }\n\n  static getAuthAPIUrl (): string {\n    return trimTrailingSlashURL(sessionStorage.getItem(SessionStorageKeys.AuthApiUrl) || '')\n  }\n\n  static getAuthContextPath (): string {\n    return trimTrailingSlashURL(sessionStorage.getItem(SessionStorageKeys.AuthWebUrl) || '')\n  }\n\n  static getRegistryHomeURL () {\n    return trimTrailingSlashURL(sessionStorage.getItem(SessionStorageKeys.RegistryHomeUrl) || '')\n  }\n\n  static getNameRequestURL () {\n    return trimTrailingSlashURL(sessionStorage.getItem(SessionStorageKeys.NameRequestUrl) || '')\n  }\n\n  static getPprWebURL () {\n    return trimTrailingSlashURL(sessionStorage.getItem(SessionStorageKeys.PprWebUrl) || '')\n  }\n\n  static setKeycloakConfigUrl (keycloakConfigUrl: string) {\n    this.keycloakConfigUrl = keycloakConfigUrl\n  }\n\n  static getKeycloakConfigUrl (): string {\n    return this.keycloakConfigUrl\n  }\n}\n","import Axios from 'axios'\nimport { Fee, FilingData, PayData } from '@bcrs-shared-components/interfaces'\nimport { SessionStorageKeys } from '@bcrs-shared-components/enums'\nimport ConfigHelper from './utils/config-helper'\n\n// sample Microcks URLs =\n//   https://mock-lear-tools.pathfinder.gov.bc.ca/rest/SBC+Pay+API+Reference/1.0.1/api/v1/fees/CP/OTANN\n//   https://mock-lear-tools.pathfinder.gov.bc.ca/rest/SBC+Pay+API+Reference/1.0.1/api/v1/fees/CP/OTADD\nconst API_URL = 'https://pay-api-dev.pathfinder.gov.bc.ca/api/v1/fees'\n\nexport default {\n  getFee (filingData: FilingData[], payApiUrl: string) : Promise<Fee[]> {\n    const token = ConfigHelper.getFromSession(SessionStorageKeys.KeyCloakToken)\n    const accountId = JSON.parse(ConfigHelper.getFromSession(SessionStorageKeys.CurrentAccount) || '{}').id || 0\n\n    if (filingData.length < 1) {\n      Promise.resolve()\n    }\n\n    const promises = []\n    for (const filing of filingData) {\n      if (!filing.filingTypeCode) {\n        Promise.resolve()\n      }\n      const url = prepareUrl(filing, payApiUrl)\n      promises.push(Axios.get(url, { headers: { Authorization: `Bearer ${token}`, 'Account-Id': accountId } }))\n    }\n\n    return Axios.all(promises)\n      .then(Axios.spread((...args) => {\n        // customise the response here\n        return args\n          .map(response => response.data as PayData)\n          .map(data => {\n            const filingDatum = filingData.find(fd => fd.filingTypeCode === data.filingTypeCode)\n            // default the title if client hasn't passed this on\n            const filingType = (filingDatum && filingDatum.filingDescription)\n              ? filingDatum.filingDescription\n              : data.filingType\n            const fee = data.filingFees\n            const priorityFees = (data.priorityFees) || 0\n            const futureEffectiveFees = (data.futureEffectiveFees) || 0\n            const serviceFees = (data.serviceFees) || 0\n            const total = (data.total) || 0\n            return { fee, filingType, priorityFees, futureEffectiveFees, serviceFees, total } as Fee\n          })\n      }))\n      .catch(error => {\n        switch (error.response && error.response.status) {\n          case 400:\n            // eslint-disable-next-line no-console\n            console.log('%c FeeModule-ERROR: Probably fee code mismatch %s', 'color: red; font-size: 13px',\n              JSON.stringify(filingData))\n            break\n          case 500:\n            // eslint-disable-next-line no-console\n            console.log('%c FeeModule-ERROR: Probably invalid Token %s', 'color: red; font-size: 13px',\n              JSON.stringify(filingData))\n            break\n          default:\n            // eslint-disable-next-line no-console\n            console.log('%c FeeModule-ERROR: Probably unknown Error %s', 'color: red; font-size: 13px',\n              JSON.stringify(filingData))\n        }\n        return []\n      })\n  }\n}\n\nconst prepareUrl = (filing: FilingData, payApiUrl: string) => {\n  const queryParams = []\n  if (filing.waiveFees) {\n    queryParams.push(`waiveFees=${!!filing.waiveFees}`)\n  }\n  if (filing.priority) {\n    queryParams.push(`priority=${!!filing.priority}`)\n  }\n  if (filing.futureEffective) {\n    queryParams.push(`futureEffective=${!!filing.futureEffective}`)\n  }\n  let url = `${payApiUrl}fees/${filing.entityType}/${filing.filingTypeCode}`\n  if (queryParams.length) {\n    url += `?${queryParams.join('&')}`\n  }\n  return url\n}\n","export enum SessionStorageKeys {\n  KeyCloakToken = 'KEYCLOAK_TOKEN',\n  KeyCloakRefreshToken = 'KEYCLOAK_REFRESH_TOKEN',\n  KeyCloakIdToken = 'KEYCLOAK_ID_TOKEN',\n  ApiConfigKey = 'AUTH_API_CONFIG',\n  PreventStorageSync = 'PREVENT_STORAGE_SYNC',\n  LaunchDarklyFlags = 'LD_FLAGS',\n  CurrentAccount = 'CURRENT_ACCOUNT',\n  AuthApiUrl = 'AUTH_API_URL',\n  AuthWebUrl = 'AUTH_WEB_URL',\n  StatusApiUrl = 'STATUS_API_URL',\n  WhatsNew = 'WHATS_NEW',\n  SessionSynced = 'SESSION_SYNCED',\n  RegistryHomeUrl = 'REGISTRY_HOME_URL',\n  NameRequestUrl = 'NAME_REQUEST_URL',\n  PprWebUrl = 'PPR_WEB_URL',\n  SiteminderLogoutUrl = 'SITEMINDER_LOGOUT_URL'\n}\n\nexport enum Account {\n  ANONYMOUS = 'ANONYMOUS',\n  PREMIUM = 'PREMIUM',\n  BASIC = 'BASIC',\n  SBC_STAFF = 'SBC_STAFF',\n  STAFF = 'STAFF'\n}\n\nexport enum IdpHint {\n  BCROS = 'bcros',\n  IDIR = 'idir',\n  BCSC = 'bcsc',\n  BCEID = 'bceid'\n}\n\nexport enum LoginSource {\n  BCROS = 'BCROS',\n  IDIR = 'IDIR',\n  BCSC = 'BCSC',\n  BCEID = 'BCEID'\n}\n\nexport enum Role {\n  AccountHolder = 'account_holder',\n  PublicUser = 'public_user',\n  Staff = 'staff',\n  GOVMAccountUser = 'gov_account_user'\n}\n\nexport enum Pages {\n  HOME = 'home',\n  USER_PROFILE = 'userprofile',\n  ACCOUNT = 'account',\n  SETTINGS = 'settings',\n  SIGNIN = 'signin',\n  USER_PROFILE_TERMS = 'userprofileterms',\n  CREATE_ACCOUNT = 'setup-account',\n  CHOOSE_AUTH_METHOD = 'choose-authentication-method',\n  NON_BCSC_INSTRUCTIONS = 'nonbcsc-info/instructions',\n  ACCOUNT_FREEZ = 'account-freeze',\n  PENDING_APPROVAL = 'pendingapproval',\n  ACCOUNT_SWITCHING = 'account-switching',\n  REGISTRY_DASHBOARD = 'dashboard'\n}\n\nexport const ALLOWED_URIS_FOR_PENDING_ORGS: string[] = ['setup-non-bcsc-account', 'signout']\n\nexport const ACCOUNT_ID = 'accountid'\n","import axios from 'axios'\nimport { SessionStorageKeys } from 'sbc-common-components/src/util/constants'\nimport ConfigHelper from './config-helper'\n\nconst instance = axios.create()\n\ninstance.interceptors.request.use(\n  request => {\n    request.headers['x-apikey'] = import.meta.env.VUE_APP_DOC_API_KEY\n    request.headers['Account-Id'] =\n      JSON.parse(ConfigHelper.getFromSession(SessionStorageKeys.CurrentAccount) || '{}')?.id || 0\n\n    return request\n  },\n  error => Promise.reject(error)\n)\n\nexport { instance as axiosInstance }\n","<template>\n  <v-card>\n    <header class=\"font-weight-bold px-3 py-3\">\n      <slot name=\"header\">\n        Fee Summary\n      </slot>\n    </header>\n\n    <div v-show=\"fetchError\">\n      <v-alert\n        color=\"error\"\n        icon=\"warning\"\n        outlined\n      >\n        {{ fetchError }}\n      </v-alert>\n    </div>\n\n    <v-slide-y-transition\n      v-show=\"!fetchError\"\n      group\n      tag=\"ul\"\n      class=\"fee-list\"\n    >\n      <div\n        v-for=\"lineItem in fees\"\n        :key=\"lineItem.filingType\"\n      >\n        <li\n          class=\"container fee-list__item\"\n        >\n          <div\n            class=\"fee-list__item-name\"\n          >\n            {{ filingLabel ? filingLabel : lineItem.filingType }}\n          </div>\n          <div\n            v-if=\"lineItem.fee > 0\"\n            class=\"fee-list__item-value\"\n          >\n            {{ lineItem.fee | currency }}\n          </div>\n          <div\n            v-else\n            class=\"fee-list__item-value\"\n          >\n            No Fee\n          </div>\n        </li>\n        <li\n          v-if=\"lineItem.priorityFees\"\n          :key=\"lineItem.filingType+'-priority'\"\n          class=\"container fee-list__item\"\n        >\n          <div\n            class=\"fee-list__item-name pl-3\"\n          >\n            Priority Fee\n          </div>\n          <div\n            class=\"fee-list__item-value\"\n          >\n            {{ lineItem.priorityFees | currency }}\n          </div>\n        </li>\n        <li\n          v-if=\"lineItem.futureEffectiveFees\"\n          :key=\"lineItem.filingType+'-futureEffective'\"\n          class=\"container fee-list__item\"\n        >\n          <div\n            class=\"fee-list__item-name pl-3\"\n          >\n            Future Effective Fee\n          </div>\n          <div\n            class=\"fee-list__item-value\"\n          >\n            {{ lineItem.futureEffectiveFees | currency }}\n          </div>\n        </li>\n        <li\n          v-if=\"lineItem.serviceFees\"\n          :key=\"lineItem.filingType+'-transaction'\"\n          class=\"container fee-list__item\"\n        >\n          <div\n            class=\"fee-list__item-name pl-3\"\n          >\n            Service Fee\n          </div>\n          <div\n            class=\"fee-list__item-value\"\n          >\n            {{ lineItem.serviceFees | currency }}\n          </div>\n        </li>\n      </div>\n    </v-slide-y-transition>\n\n    <div\n      v-show=\"!fetchError\"\n      class=\"container fee-total\"\n    >\n      <div\n        class=\"fee-total__name\"\n      >\n        Total Fees\n      </div>\n      <div\n        class=\"fee-total__currency\"\n      >\n        CAD\n      </div>\n      <div\n        class=\"fee-total__value\"\n      >\n        <v-slide-y-reverse-transition\n          name=\"slide\"\n          mode=\"out-in\"\n        >\n          <div>\n            {{ totalFilingFees | currency }}\n          </div>\n        </v-slide-y-reverse-transition>\n      </div>\n    </div>\n  </v-card>\n</template>\n\n<script lang=\"ts\">\nimport { Vue, Component, Prop, Watch, Emit } from 'vue-property-decorator'\nimport { FeeServices } from '@bcrs-shared-components/services'\nimport { Fee, FilingData } from '@bcrs-shared-components/interfaces'\n\n@Component({})\nexport default class SbcFeeSummary extends Vue {\n  /* This prop is an array of filing data. See model for details. */\n  @Prop({ default: () => [] })\n  filingData!: Array<FilingData>\n\n  @Prop({ default: '' })\n  payURL!: string\n\n  @Prop()\n  filingLabel!: string\n\n  /* class properties */\n  fees: Fee[] = []\n  fetchError = ''\n\n  /* lifecycle event */\n  mounted (): void {\n    // console.log('%c FeeModule-Data Received on Mount as %s %s', 'color: blue; font-size: 12px',\n    //   JSON.stringify(this.filingData), this.payURL)\n\n    FeeServices.getFee(this.filingData, this.payURL)\n      .then(data => {\n        this.fetchError = ''\n        this.fees = data || []\n        this.fees = this.fees.filter(f => (this.totalFilingFees > 0 && f.fee) || (this.totalFilingFees === 0))\n        this.emitTotalFee(this.totalFilingFees)\n      })\n      .catch((error: any) => {\n        this.fetchError = 'Error fetching fees' + error\n      })\n  }\n\n  /* getter */\n  get totalFilingFees (): number {\n    return this.fees.reduce((acc: number, item: Fee) => acc + item.total, 0)\n  }\n\n  /* watcher */\n  @Watch('filingData')\n  onFilingDataChanged (val: string, oldVal: string): void {\n    FeeServices.getFee(this.filingData, this.payURL).then((data: any) => {\n      this.fetchError = ''\n      this.fees = data\n      this.emitTotalFee(this.totalFilingFees)\n    }).catch((error: any) => {\n      this.fetchError = 'Error fetching fees' + error\n    })\n  }\n\n  /* emitter */\n  @Emit('total-fee')\n  emitTotalFee (val: number): void {}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/theme.scss';\n\nheader {\n  color: #fff;\n  background: $BCgovBlue5;\n}\n\nul {\n    padding: 0;\n    list-style-type: none;\n}\n\n.container {\n  display: flex;\n  flex-flow: row nowrap;\n  line-height: 1.2rem;\n  font-size: 0.875rem;\n}\n\n.fee-list {\n  border-bottom: 1px solid $gray3;\n}\n\n.fee-list__item {\n  &-name, &-value {\n    font-weight: 700;\n  }\n\n  &-name {\n    flex: 1 1 auto;\n    margin-right: 2rem;\n  }\n\n  &-value {\n    flex: 0 0 auto;\n    text-align: right;\n  }\n}\n\n.fee-list__item + .fee-list__item {\n  border-top: 1px solid $gray3;\n}\n\n.fee-total {\n  align-items: center;\n  letter-spacing: -0.01rem;\n  line-height: auto;\n\n  &__name {\n    flex: 1 1 auto;\n    margin-right: auto;\n    font-weight: 700;\n  }\n\n  &__currency {\n    margin-right: 0.5rem;\n    color: $gray5;\n    font-weight: 500;\n  }\n\n  &__value {\n    font-size: 1.65rem;\n    font-weight: 700;\n  }\n}\n</style>\n","<template>\n  <aside id=\"fee-summary\">\n    <SbcFeeSummary\n      :filingData=\"[...filingData]\"\n      :payURL=\"payApiUrl\"\n    />\n\n    <v-row no-gutters>\n      <v-col\n        v-if=\"isSummaryMode\"\n        class=\"pt-3 px-1\"\n      >\n        <v-btn\n          id=\"back-btn\"\n          large\n          :loading=\"buttonStatus[FeeSummaryActions.BACK] === ButtonState.LOADING\"\n          :disabled=\"buttonStatus[FeeSummaryActions.BACK] === ButtonState.DISABLE\"\n          @click=\"handleClick(FeeSummaryActions.BACK)\"\n        >\n          <span><v-icon>mdi-chevron-left</v-icon>Back</span>\n        </v-btn>\n      </v-col>\n      <v-col class=\"pt-3 px-1\">\n        <v-btn\n          id=\"cancel-btn\"\n          large\n          :loading=\"buttonStatus[FeeSummaryActions.CANCEL] === ButtonState.LOADING\"\n          :disabled=\"buttonStatus[FeeSummaryActions.CANCEL] === ButtonState.DISABLE\"\n          @click=\"handleClick(FeeSummaryActions.CANCEL)\"\n        >\n          <span>Cancel</span>\n        </v-btn>\n      </v-col>\n      <v-col class=\"pt-3 px-1\">\n        <v-btn\n          id=\"save-resume-later-btn\"\n          large\n          :loading=\"buttonStatus[FeeSummaryActions.SAVE_RESUME_LATER] === ButtonState.LOADING\"\n          :disabled=\"buttonStatus[FeeSummaryActions.SAVE_RESUME_LATER] === ButtonState.DISABLE\"\n          @click=\"handleClick(FeeSummaryActions.SAVE_RESUME_LATER)\"\n        >\n          <span>Save and Resume Later</span>\n        </v-btn>\n      </v-col>\n      <v-col class=\"pt-3 px-1\">\n        <v-btn\n          id=\"confirm-btn\"\n          large\n          :loading=\"buttonStatus[FeeSummaryActions.CONFIRM] === ButtonState.LOADING\"\n          :disabled=\"buttonStatus[FeeSummaryActions.CONFIRM] === ButtonState.DISABLE\"\n          @click=\"handleClick(FeeSummaryActions.CONFIRM)\"\n        >\n          <span>{{ confirmLabel }}<v-icon>mdi-chevron-right</v-icon></span>\n        </v-btn>\n      </v-col>\n    </v-row>\n\n    <div\n      v-if=\"errorMessage\"\n      class=\"error-msg pre-wrap mt-1\"\n      v-html=\"errorMessage\"\n    />\n  </aside>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\nimport { FeeSummaryActions } from '@bcrs-shared-components/enums'\nimport { FilingDataIF } from '@bcrs-shared-components/interfaces'\nimport SbcFeeSummary from './SbcFeeSummary.vue'\n\n/** Button state enum */\nenum ButtonState {\n  DEFAULT = '',\n  LOADING = 'loading',\n  DISABLE = 'disable'\n}\n\ntype ButtonStatusMap = {\n  [key in FeeSummaryActions]: ButtonState\n}\n\n@Component({\n  components: { SbcFeeSummary }\n})\nexport default class FeeSummary extends Vue {\n  readonly FeeSummaryActions = FeeSummaryActions\n  readonly ButtonState = ButtonState\n\n  /** Filing information to calculate fees. */\n  @Prop({ default: () => [] }) readonly filingData!: Array<FilingDataIF>\n\n  /** URL for Sbc Fee Summary component to get fees. */\n  @Prop({ default: '' }) readonly payApiUrl!: string\n\n  /** Whether to disable the Save and Resume Later button. */\n  @Prop({ default: false }) readonly disableSaveResumeLater!: boolean\n\n  /** Indicator that something isn't valid. This disables the confirm button. */\n  @Prop({ default: false }) readonly hasConflicts!: boolean\n\n  /** Indicator that there is a request in progress. */\n  @Prop({ default: false }) readonly isLoading!: boolean\n\n  /** Label for Confirm button. */\n  @Prop({ default: 'Confirm' }) readonly confirmLabel!: string\n\n  /** Message to display if there is an error. */\n  @Prop({ default: '' }) readonly errorMessage!: string\n\n  /** Prop to indicate summary mode. */\n  @Prop({ default: false }) readonly isSummaryMode!: boolean\n\n  /** Emit action event. */\n  @Emit('action')\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  emitAction (action: FeeSummaryActions): void {}\n\n  /** Stores the action currently being processed */\n  currentLoadingAction: FeeSummaryActions | null = null\n\n  /** Watch for isLoading changes from parent */\n  @Watch('isLoading')\n  onIsLoadingChanged (newVal: boolean): void {\n    if (!newVal) {\n      this.currentLoadingAction = null\n    }\n  }\n\n  /** Base button statuses based on props */\n  get baseButtonStatus (): ButtonStatusMap {\n    return {\n      [FeeSummaryActions.BACK]: ButtonState.DEFAULT,\n      [FeeSummaryActions.CANCEL]: ButtonState.DEFAULT,\n      [FeeSummaryActions.SAVE_RESUME_LATER]: this.disableSaveResumeLater ? ButtonState.DISABLE : ButtonState.DEFAULT,\n      [FeeSummaryActions.CONFIRM]: this.hasConflicts ? ButtonState.DISABLE : ButtonState.DEFAULT\n    }\n  }\n\n  /** Computes current button statuses dynamically */\n  get buttonStatus (): ButtonStatusMap {\n    if (!this.isLoading || !this.currentLoadingAction) {\n      return this.baseButtonStatus\n    }\n\n    const status = { ...this.baseButtonStatus }\n    Object.values(FeeSummaryActions).forEach(action => {\n      status[action] = action === this.currentLoadingAction ? ButtonState.LOADING : ButtonState.DISABLE\n    })\n\n    return status\n  }\n\n  /** Handle button click */\n  handleClick (action: FeeSummaryActions): void {\n    this.currentLoadingAction = action\n    this.emitAction(action)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/theme.scss';\n\n#fee-summary {\n  .v-btn {\n    width: 100%;\n    border: 1.25px solid $app-blue;\n    color: $app-blue;\n    box-shadow: 0 1px 2px 0 rgba(33,37,41,0.2);\n    border-radius: 4px;\n  }\n\n  #confirm-btn {\n    color: white;\n    background-color: $app-blue;\n    font-weight: bold;\n  }\n\n  .error-msg {\n    font-size: 0.75rem;\n    color: $app-red;\n    text-align: center;\n  }\n\n  :deep(.fee-list) {\n    padding-left: 0;\n  }\n}\n</style>\n"],"names":["FeeSummaryActions","FeeSummaryActions2","FilingCodes","trimTrailingSlashURL","url","ConfigHelper","key","value","SessionStorageKeys","keycloakConfigUrl","__publicField","FeeServices","filingData","payApiUrl","token","accountId","promises","filing","prepareUrl","Axios","args","response","data","filingDatum","fd","filingType","fee","priorityFees","futureEffectiveFees","serviceFees","total","error","queryParams","instance","axios","request","_a","SbcFeeSummary","Vue","f","acc","item","val","oldVal","__decorateClass","Prop","Watch","Emit","Component","ButtonState","FeeSummary","action","newVal","status"],"mappings":"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","x_google_ignoreList":[5]}