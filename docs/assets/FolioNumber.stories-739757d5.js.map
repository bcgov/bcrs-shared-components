{"version":3,"file":"FolioNumber.stories-739757d5.js","sources":["../../src/components/folio-number/FolioNumber.vue"],"sourcesContent":["<template>\r\n  <div id=\"folio-number\">\r\n    <!-- Display Folio Number -->\r\n    <v-row\r\n      v-if=\"!isEditing\"\r\n      id=\"display-folio-number\"\r\n      no-gutters\r\n    >\r\n      <v-col cols=\"3\">\r\n        <label class=\"reference-number-label\">\r\n          <div>Business Folio or<br>Reference Number</div>\r\n          <v-chip\r\n            v-if=\"hasFolioNumberChanged\"\r\n            x-small\r\n            label\r\n            color=\"primary\"\r\n            text-color=\"white\"\r\n          >\r\n            {{ editedLabel }}\r\n          </v-chip>\r\n        </label>\r\n      </v-col>\r\n\r\n      <v-col :cols=\"hideActions ? '9' : '7'\">\r\n        <div id=\"folio-number-readonly\">\r\n          {{ !!folioNumber ? folioNumber : 'None' }}\r\n        </div>\r\n      </v-col>\r\n\r\n      <!-- Edit Actions -->\r\n      <v-col\r\n        v-if=\"!hideActions\"\r\n        cols=\"2\"\r\n        class=\"mt-n2\"\r\n      >\r\n        <div class=\"edit-actions mr-4\">\r\n          <v-btn\r\n            v-if=\"hasFolioNumberChanged\"\r\n            text\r\n            color=\"primary\"\r\n            class=\"undo-button\"\r\n            @click=\"onUndoClicked()\"\r\n          >\r\n            <v-icon small>\r\n              mdi-undo\r\n            </v-icon>\r\n            <span>Undo</span>\r\n          </v-btn>\r\n\r\n          <v-tooltip\r\n            v-else\r\n            top\r\n            nudge-right=\"3\"\r\n            content-class=\"top-tooltip\"\r\n            transition=\"fade-transition\"\r\n          >\r\n            <template #activator=\"{ on }\">\r\n              <v-btn\r\n                text\r\n                color=\"primary\"\r\n                class=\"edit-button\"\r\n                v-on=\"on\"\r\n                @click=\"isEditing = true\"\r\n              >\r\n                <v-icon small>\r\n                  mdi-pencil\r\n                </v-icon>\r\n                <span>{{ editLabel }}</span>\r\n              </v-btn>\r\n            </template>\r\n            <span>No fee to change</span>\r\n          </v-tooltip>\r\n\r\n          <!-- Drop Down Actions -->\r\n          <span\r\n            v-if=\"hasFolioNumberChanged\"\r\n            class=\"drop-down-actions\"\r\n          >\r\n            <v-menu\r\n              v-model=\"dropdown\"\r\n              offset-y\r\n              left\r\n              nudge-bottom=\"4\"\r\n            >\r\n              <template #activator=\"{ on }\">\r\n                <v-btn\r\n                  text\r\n                  small\r\n                  color=\"primary\"\r\n                  class=\"more-button\"\r\n                  v-on=\"on\"\r\n                >\r\n                  <v-icon>{{ dropdown ? 'mdi-menu-up' : 'mdi-menu-down' }}</v-icon>\r\n                </v-btn>\r\n              </template>\r\n              <v-list>\r\n                <v-list-item\r\n                  class=\"v-list-item change-button\"\r\n                  @click=\"isEditing = true; dropdown = false\"\r\n                >\r\n                  <v-list-item-subtitle>\r\n                    <v-icon\r\n                      small\r\n                      color=\"primary\"\r\n                    >mdi-pencil</v-icon>\r\n                    <span class=\"drop-down-action ml-1\">Change</span>\r\n                  </v-list-item-subtitle>\r\n                </v-list-item>\r\n              </v-list>\r\n            </v-menu>\r\n          </span>\r\n        </div>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- Edit Folio Number -->\r\n    <v-form\r\n      v-else\r\n      id=\"edit-folio-number\"\r\n      v-model=\"formValid\"\r\n      @submit.prevent=\"onFormSubmit()\"\r\n    >\r\n      <!-- Line 1 -->\r\n      <v-row no-gutters>\r\n        <v-col cols=\"3\">\r\n          <label :class=\"{'error-text': invalidSection}\">\r\n            <strong>Business Folio or<br>Reference Number</strong>\r\n          </label>\r\n        </v-col>\r\n        <v-col cols=\"9\" />\r\n      </v-row>\r\n\r\n      <!-- Line 2 -->\r\n      <v-row no-gutters>\r\n        <v-col cols=\"3\" />\r\n        <v-col\r\n          cols=\"9\"\r\n          class=\"my-4\"\r\n        >\r\n          <p>\r\n            This is the Folio or Reference Number for this business for your own tracking purposes.\r\n            There is no fee to change this number. Any changes made will be applied immediately.\r\n          </p>\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <!-- Line 3 -->\r\n      <v-row no-gutters>\r\n        <v-col cols=\"3\" />\r\n        <v-col cols=\"9\">\r\n          <v-text-field\r\n            id=\"folio-number-input\"\r\n            v-model=\"folioNumber\"\r\n            filled\r\n            persistent-hint\r\n            autocomplete=\"chrome-off\"\r\n            label=\"Folio or Reference Number (Optional)\"\r\n            :name=\"Math.random()\"\r\n            :rules=\"rules\"\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <!-- Form Actions -->\r\n      <v-row no-gutters>\r\n        <v-col>\r\n          <div class=\"form-actions\">\r\n            <v-btn\r\n              large\r\n              color=\"primary\"\r\n              class=\"save-button\"\r\n              type=\"submit\"\r\n              value=\"Submit\"\r\n            >\r\n              <span>Save</span>\r\n            </v-btn>\r\n            <v-btn\r\n              large\r\n              outlined\r\n              color=\"primary\"\r\n              class=\"cancel-button\"\r\n              @click=\"onCancelClicked()\"\r\n            >\r\n              <span>Cancel</span>\r\n            </v-btn>\r\n          </div>\r\n        </v-col>\r\n      </v-row>\r\n    </v-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue from 'vue'\r\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\r\n\r\n@Component({})\r\nexport default class FolioNumber extends Vue {\r\n  // Props\r\n  @Prop({ default: null }) readonly initialValue!: string\r\n  @Prop({ default: null }) readonly originalValue!: string\r\n  @Prop({ default: false }) readonly hideActions!: boolean\r\n  @Prop() readonly editLabel!: string\r\n  @Prop() readonly editedLabel!: string\r\n  @Prop({ default: false }) readonly invalidSection!: boolean\r\n\r\n  // Local properties\r\n  private isEditing = false\r\n  private formValid = false\r\n  private folioNumber = ''\r\n  private dropdown = false\r\n\r\n  // Validation rules\r\n  readonly rules: Array<(v) => boolean | string> = [\r\n    (v: string) => (!v || v.length <= 30) || 'Maximum 30 characters reached'\r\n  ]\r\n\r\n  /** Whether folio number has changed from original value. */\r\n  get hasFolioNumberChanged (): boolean {\r\n    const fn = this.folioNumber || null\r\n    const ov = this.originalValue || null\r\n    return (fn !== ov)\r\n  }\r\n\r\n  /** When Undo is clicked, restores the folio number to the original value. */\r\n  protected onUndoClicked (): void {\r\n    this.folioNumber = this.originalValue\r\n    this.emitNewFolioNumber()\r\n    this.emitHaveChanges()\r\n    this.isEditing = false\r\n  }\r\n\r\n  /** When form is submitted, accepts the entered folio number. */\r\n  protected onFormSubmit (): void {\r\n    if (this.formValid) {\r\n      this.emitNewFolioNumber()\r\n      this.emitHaveChanges()\r\n      this.isEditing = false\r\n    }\r\n  }\r\n\r\n  /** When Cancel is clicked, undoes the current change. */\r\n  protected onCancelClicked (): void {\r\n    this.folioNumber = this.initialValue\r\n    this.isEditing = false\r\n  }\r\n\r\n  /** Updates local value initially and when prop has changed. */\r\n  @Watch('initialValue', { deep: true, immediate: true })\r\n  private onInitialValueChanged (): void {\r\n    this.folioNumber = this.initialValue\r\n  }\r\n\r\n  /** Informs parent of new folio number. */\r\n  @Emit('newFolioNumber')\r\n  private emitNewFolioNumber (): string {\r\n    return this.folioNumber\r\n  }\r\n\r\n  /** Informs parent whether we have changes. */\r\n  @Emit('haveChanges')\r\n  private emitHaveChanges (): boolean {\r\n    return this.hasFolioNumberChanged\r\n  }\r\n\r\n  /** Informs parent whether we are in editing mode. */\r\n  @Watch('isEditing')\r\n  @Emit('isEditing')\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  private emitIsEditing (val: boolean): void {}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/styles/theme.scss';\r\n\r\n.reference-number-label{\r\n  font-weight: bold;\r\n  color: $gray9;\r\n}\r\n\r\n:deep(.v-input .v-label) {\r\n  font-weight: normal;\r\n  color: $gray7;\r\n}\r\n\r\n#folio-number-readonly {\r\n  color: $gray7;\r\n}\r\n\r\n.edit-actions {\r\n  position: absolute;\r\n  right: 0;\r\n\r\n  .v-btn {\r\n    min-width: 0.5rem;\r\n  }\r\n\r\n  .undo-button {\r\n    border-right: 1px solid $gray1;\r\n  }\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n\r\n  .v-btn + .v-btn {\r\n    margin-left: 0.5rem;\r\n  }\r\n\r\n  .v-btn {\r\n    min-width: 6.5rem;\r\n  }\r\n}\r\n</style>\r\n"],"names":["FolioNumber","Vue","__publicField","v","fn","ov","val","__decorateClass","Prop","Watch","Emit","Component"],"mappings":"ygBAqMA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCAEAC,EAAA,qBACAA,EAAA,sBACAA,EAAA,oBACAA,EAAA,kBACAA,EAAA,oBACAA,EAAA,uBAGAA,EAAA,iBAAA,IACAA,EAAA,iBAAA,IACAA,EAAA,mBAAA,IACAA,EAAA,gBAAA,IAGAA,EAAA,aAAA,CACAC,GAAA,CAAAA,GAAAA,EAAA,QAAA,IAAA,+BAAA,GAIA,IAAA,uBAAA,CACA,MAAAC,EAAA,KAAA,aAAA,KACAC,EAAA,KAAA,eAAA,KACA,OAAAD,IAAAC,CACA,CAGA,eAAA,CACA,KAAA,YAAA,KAAA,cACA,KAAA,mBAAA,EACA,KAAA,gBAAA,EACA,KAAA,UAAA,EACA,CAGA,cAAA,CACA,KAAA,YACA,KAAA,mBAAA,EACA,KAAA,gBAAA,EACA,KAAA,UAAA,GAEA,CAGA,iBAAA,CACA,KAAA,YAAA,KAAA,aACA,KAAA,UAAA,EACA,CAIA,uBAAA,CACA,KAAA,YAAA,KAAA,YACA,CAIA,oBAAA,CACA,OAAA,KAAA,WACA,CAIA,iBAAA,CACA,OAAA,KAAA,qBACA,CAMA,cAAAC,EAAA,CAAA,CACA,EAvEAC,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAFAR,EAEA,UAAA,eAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAHAR,EAGA,UAAA,gBAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAJAR,EAIA,UAAA,cAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,EALAR,EAKA,UAAA,YAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,EANAR,EAMA,UAAA,cAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAPAR,EAOA,UAAA,iBAAA,CAAA,EA6CAO,EAAA,CADAE,EAAA,eAAA,CAAA,KAAA,GAAA,UAAA,GAAA,CAAA,EAnDAT,EAoDA,UAAA,wBAAA,CAAA,EAMAO,EAAA,CADAG,EAAA,gBAAA,CAAA,EAzDAV,EA0DA,UAAA,qBAAA,CAAA,EAMAO,EAAA,CADAG,EAAA,aAAA,CAAA,EA/DAV,EAgEA,UAAA,kBAAA,CAAA,EAQAO,EAAA,CAHAE,EAAA,WAAA,EACAC,EAAA,WAAA,CAAA,EAtEAV,EAwEA,UAAA,gBAAA,CAAA,EAxEAA,EAAAO,EAAA,CADAI,EAAA,CAAA,CAAA,CAAA,EACAX,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}