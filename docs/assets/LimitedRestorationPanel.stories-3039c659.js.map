{"version":3,"file":"LimitedRestorationPanel.stories-3039c659.js","sources":["../../src/components/limited-restoration-panel/LimitedRestorationPanel.vue"],"sourcesContent":["<template id=\"limited-restoration-panel\">\n  <v-radio-group\n    v-model=\"radioValue\"\n    class=\"mt-0 pt-0 ml-8\"\n    mandatory\n  >\n    <v-radio\n      id=\"radio-24\"\n      class=\"radio-button pt-2\"\n      label=\"2 years\"\n      value=\"24\"\n    />\n    <v-radio\n      id=\"radio-18\"\n      class=\"radio-button pt-2\"\n      label=\"18 months\"\n      value=\"18\"\n    />\n    <v-radio\n      id=\"radio-12\"\n      class=\"radio-button pt-2\"\n      label=\"12 months\"\n      value=\"12\"\n    />\n    <v-radio\n      id=\"radio-6\"\n      class=\"radio-button pt-2\"\n      label=\"6 months\"\n      value=\"6\"\n    />\n    <v-row class=\"ml-0 mt-0 radio-button pt-2\">\n      <v-radio\n        id=\"radio-custom\"\n        class=\"mt-n4\"\n        value=\"customMonths\"\n      />\n      <v-form ref=\"monthsRef\">\n        <v-text-field\n          id=\"text-field-months\"\n          v-model=\"inputValue\"\n          class=\"text-field-months\"\n          type=\"number\"\n          dense\n          filled\n          hide-spin-buttons\n          :rules=\"monthsRules\"\n          :disabled=\"(radioValue !== 'customMonths')\"\n        />\n      </v-form>\n      <span class=\"ml-2 mt-2 month-text\">month(s)</span>\n    </v-row>\n  </v-radio-group>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\nimport { FormIF } from '@bcrs-shared-components/interfaces'\n\n@Component({})\nexport default class LimitedRestorationPanel extends Vue {\n  // Refs\n  $refs!: Vue['$refs'] & {\n    monthsRef: FormIF\n  }\n\n  @Prop({ required: true }) readonly months!: number\n  @Prop({ default: 24 }) readonly maxNumberOfMonths!: number\n\n  // Local properties\n  radioValue = '' // v-model for radio buttons\n  inputValue = '' // v-model for months text field\n\n  /**\n   * The validation rules for months input.\n   */\n  get monthsRules (): Array<(v: string) => boolean | string> {\n    return [\n      (v) => (+v > 0 && +v <= this.maxNumberOfMonths) || 'Must be between 1 and ' + this.maxNumberOfMonths,\n      (v) => (+v % 1 === 0) || 'Must be a whole number'\n    ]\n  }\n\n  /**\n   * Called when the component is mounted.\n   */\n  mounted (): void {\n    // set the initial radio button and months input (if applicable)\n    if ([24, 18, 12, 6].includes(this.months)) {\n      this.radioValue = this.months.toString()\n    } else {\n      this.radioValue = 'customMonths'\n      this.inputValue = this.months.toString()\n    }\n  }\n\n  /**\n   * Called when radio value or input value have changed.\n   */\n  @Watch('radioValue')\n  @Watch('inputValue')\n  private async onValueChanged (): Promise<void> {\n    if (this.radioValue === 'customMonths') {\n      // wait for component updates then validate the input field\n      await this.$nextTick()\n      const valid = this.$refs.monthsRef?.validate()\n\n      // emit months and validity\n      this.emitMonths(valid ? +this.inputValue : null) // emit null if invalid\n      this.emitValid(valid)\n    } else {\n      // reset input field validation\n      this.$refs.monthsRef.resetValidation()\n\n      // emit months and validity\n      this.emitMonths(+this.radioValue)\n      this.emitValid(true)\n    }\n  }\n\n  /**\n   * Emits the number of months selected.\n   */\n  @Emit('months')\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private emitMonths (months: number): void {}\n\n  /**\n   * Emits the component validity.\n   */\n  @Emit('valid')\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private emitValid (valid: boolean): void {}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/theme.scss';\n\n.month-text {\n  color: $gray7;\n}\n\n:deep() {\n  // change border style to solid before the selection of the radio button\n  .theme--light.v-text-field.v-input--is-disabled .v-input__slot:before {\n    border-image: none;\n  }\n\n  // decrease the month text field's width\n  .text-field-months {\n    width: 3.5rem;\n    .error--text {\n      margin-left: -0.5rem;\n      position: absolute;\n      width: 10rem;\n    }\n  }\n}\n</style>\n"],"names":["LimitedRestorationPanel","Vue","__publicField","v","valid","_a","months","__decorateClass","Prop","Watch","Emit","Component"],"mappings":"ygBA4DA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCAEAC,EAAA,cAIAA,EAAA,eACAA,EAAA,0BAGAA,EAAA,kBAAA,IACAA,EAAA,kBAAA,IAKA,IAAA,aAAA,CACA,MAAA,CACAC,GAAA,CAAAA,EAAA,GAAA,CAAAA,GAAA,KAAA,mBAAA,yBAAA,KAAA,kBACAA,GAAA,CAAAA,EAAA,IAAA,GAAA,wBAAA,CAEA,CAKA,SAAA,CAEA,CAAA,GAAA,GAAA,GAAA,CAAA,EAAA,SAAA,KAAA,MAAA,EACA,KAAA,WAAA,KAAA,OAAA,SAAA,GAEA,KAAA,WAAA,eACA,KAAA,WAAA,KAAA,OAAA,SAAA,EAEA,CAOA,MAAA,gBAAA,OACA,GAAA,KAAA,aAAA,eAAA,CAEA,MAAA,KAAA,YACA,MAAAC,GAAAC,EAAA,KAAA,MAAA,YAAA,YAAAA,EAAA,WAGA,KAAA,WAAAD,EAAA,CAAA,KAAA,WAAA,IAAA,EACA,KAAA,UAAAA,CAAA,CAAA,MAGA,KAAA,MAAA,UAAA,kBAGA,KAAA,WAAA,CAAA,KAAA,UAAA,EACA,KAAA,UAAA,EAAA,CAEA,CAOA,WAAAE,EAAA,CAAA,CAOA,UAAAF,EAAA,CAAA,CACA,EAnEAG,EAAA,CAAAC,EAAA,CAAA,SAAA,GAAA,CAAA,EANAR,EAMA,UAAA,SAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAPAR,EAOA,UAAA,oBAAA,CAAA,EAkCAO,EAAA,CAFAE,EAAA,YAAA,EACAA,EAAA,YAAA,CAAA,EAxCAT,EAyCA,UAAA,iBAAA,CAAA,EAwBAO,EAAA,CAFAG,EAAA,QAAA,CAAA,EA/DAV,EAiEA,UAAA,aAAA,CAAA,EAOAO,EAAA,CAFAG,EAAA,OAAA,CAAA,EAtEAV,EAwEA,UAAA,YAAA,CAAA,EAxEAA,EAAAO,EAAA,CADAI,EAAA,CAAA,CAAA,CAAA,EACAX,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}