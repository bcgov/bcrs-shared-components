{"version":3,"file":"CompletingParty.stories-96420ad4.js","sources":["../../src/components/completing-party/CompletingParty.vue"],"sourcesContent":["<template>\r\n  <v-card\r\n    id=\"completing-party\"\r\n    flat\r\n  >\r\n    <!-- Add/Edit Block -->\r\n    <template v-if=\"enableAddEdit\">\r\n      <v-row no-gutters>\r\n        <v-col\r\n          cols=\"12\"\r\n          sm=\"3\"\r\n        >\r\n          <label class=\"add-person-header\">\r\n            <span :class=\"{ 'error-text': invalidSection }\">Add Person</span>\r\n          </label>\r\n        </v-col>\r\n\r\n        <v-col>\r\n          <v-form\r\n            ref=\"completingPartyForm\"\r\n            v-model=\"completingPartyFormValid\"\r\n            @submit.prevent\r\n          >\r\n            <!-- Person's Name -->\r\n            <label class=\"sub-header\">Person's Name</label>\r\n            <v-row\r\n              no-gutters\r\n              class=\"pt-6\"\r\n            >\r\n              <v-col>\r\n                <v-text-field\r\n                  id=\"person__first-name\"\r\n                  filled\r\n                  class=\"item\"\r\n                  label=\"First Name\"\r\n                  :rules=\"firstNameRules\"\r\n                  :value=\"completingParty.firstName\"\r\n                  @change=\"newCompletingParty.firstName = $event\"\r\n                />\r\n              </v-col>\r\n              <v-col class=\"px-4\">\r\n                <v-text-field\r\n                  id=\"person__middle-name\"\r\n                  filled\r\n                  class=\"item\"\r\n                  label=\"Middle Name\"\r\n                  :rules=\"middleNameRules\"\r\n                  :value=\"completingParty.middleName\"\r\n                  @change=\"newCompletingParty.middleName = $event\"\r\n                />\r\n              </v-col>\r\n              <v-col>\r\n                <v-text-field\r\n                  id=\"person__last-name\"\r\n                  filled\r\n                  class=\"item\"\r\n                  label=\"Last Name\"\r\n                  :rules=\"lastNameRules\"\r\n                  :value=\"completingParty.lastName\"\r\n                  @change=\"newCompletingParty.lastName = $event\"\r\n                />\r\n              </v-col>\r\n            </v-row>\r\n\r\n            <!-- Mailing Address -->\r\n            <label class=\"sub-header mt-2\">Mailing Address</label>\r\n            <div class=\"address-wrapper pt-6 mb-n2\">\r\n              <BaseAddress\r\n                ref=\"mailingAddress\"\r\n                :editing=\"true\"\r\n                :schema=\"addressSchema\"\r\n                :address=\"completingParty.mailingAddress\"\r\n                @update:address=\"onMailingAddressUpdate($event)\"\r\n                @valid=\"mailingAddressValid = $event\"\r\n              />\r\n            </div>\r\n          </v-form>\r\n        </v-col>\r\n      </v-row>\r\n    </template>\r\n\r\n    <!-- Summary Block -->\r\n    <template v-else>\r\n      <!-- Table Headers -->\r\n      <v-row\r\n        class=\"list-header pb-3\"\r\n        no-gutters\r\n      >\r\n        <v-col\r\n          cols=\"12\"\r\n          sm=\"3\"\r\n        >\r\n          Name\r\n        </v-col>\r\n        <v-col\r\n          cols=\"12\"\r\n          sm=\"3\"\r\n        >\r\n          Mailing Address\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <!-- Table Content -->\r\n      <v-row\r\n        class=\"list-content pt-3\"\r\n        no-gutters\r\n      >\r\n        <!-- Name -->\r\n        <v-col\r\n          class=\"pr-2\"\r\n          cols=\"12\"\r\n          sm=\"3\"\r\n        >\r\n          <v-row no-gutters>\r\n            <v-col\r\n              cols=\"1\"\r\n              class=\"mt-n1 ml-n1 mr-3\"\r\n            >\r\n              <v-icon color=\"gray9\">\r\n                mdi-account\r\n              </v-icon>\r\n            </v-col>\r\n            <v-col>\r\n              <p class=\"list-subtitle ma-0 mb-1\">\r\n                {{ completingPartyName }}\r\n              </p>\r\n            </v-col>\r\n          </v-row>\r\n        </v-col>\r\n\r\n        <!-- Mailing Address -->\r\n        <v-col\r\n          cols=\"12\"\r\n          sm=\"8\"\r\n        >\r\n          <BaseAddress\r\n            class=\"peoples-roles-mailing-address\"\r\n            :address=\"completingParty.mailingAddress\"\r\n          />\r\n        </v-col>\r\n      </v-row>\r\n    </template>\r\n  </v-card>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue from 'vue'\r\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\r\nimport { AddressIF, CompletingPartyIF, FormIF } from '@bcrs-shared-components/interfaces/'\r\nimport BaseAddress from '@bcrs-shared-components/base-address/BaseAddress.vue'\r\nimport { isEqual } from 'lodash'\r\n\r\n@Component({\r\n  components: {\r\n    BaseAddress\r\n  }\r\n})\r\nexport default class CompletingParty extends Vue {\r\n  // Component references\r\n  $refs!: {\r\n    completingPartyForm: FormIF\r\n    mailingAddress: FormIF\r\n  }\r\n\r\n  /** The current completing party. */\r\n  @Prop({ default: () => {} }) readonly completingParty!: CompletingPartyIF\r\n\r\n  /** Enable Add / Edit mode. */\r\n  @Prop({ default: false }) readonly enableAddEdit!: boolean\r\n\r\n  @Prop({ default: () => {} }) readonly addressSchema!: any\r\n\r\n  /** Whether to perform validation. */\r\n  @Prop({ default: false }) readonly validate!: boolean\r\n\r\n  /** Whether to show validation styling. */\r\n  @Prop({ default: false }) readonly invalidSection!: boolean\r\n\r\n  // Local variables\r\n  completingPartyFormValid = false\r\n  mailingAddressValid = false\r\n  newCompletingParty: CompletingPartyIF = null\r\n\r\n  readonly firstNameRules = [\r\n    (v: string) => !!v || 'A first name is required',\r\n    (v: string) => !/^\\s/g.test(v) || 'Invalid spaces', // leading spaces\r\n    (v: string) => !/\\s$/g.test(v) || 'Invalid spaces', // trailing spaces\r\n    (v: string) => (v?.length <= 20) || 'Cannot exceed 20 characters' // maximum character count\r\n  ]\r\n\r\n  readonly middleNameRules = [\r\n    (v: string) => !/^\\s/g.test(v) || 'Invalid spaces', // leading spaces\r\n    (v: string) => !/\\s$/g.test(v) || 'Invalid spaces', // trailing spaces\r\n    (v: string) => (!v || v.length <= 20) || 'Cannot exceed 20 characters' // maximum character count\r\n  ]\r\n\r\n  readonly lastNameRules = [\r\n    (v: string) => !!v || 'A last name is required',\r\n    (v: string) => !/^\\s/g.test(v) || 'Invalid spaces', // leading spaces\r\n    (v: string) => !/\\s$/g.test(v) || 'Invalid spaces', // trailing spaces\r\n    (v: string) => (v?.length <= 30) || 'Cannot exceed 30 characters' // maximum character count\r\n  ]\r\n\r\n  /** The completing party's full name. */\r\n  get completingPartyName (): string {\r\n    return (`\r\n      ${this.completingParty.firstName}\r\n      ${this.completingParty.middleName || ''}\r\n      ${this.completingParty.lastName}\r\n    `) || 'Unknown'\r\n  }\r\n\r\n  onMailingAddressUpdate (val: AddressIF): void {\r\n    // stop BaseAddress from infinitely looping on new data / updates\r\n    if (!isEqual(this.newCompletingParty.mailingAddress, val)) {\r\n      this.newCompletingParty.mailingAddress = val\r\n    }\r\n  }\r\n\r\n  /** When prop changes, validate the components. */\r\n  @Watch('validate')\r\n  private onValidate (): void {\r\n    this.$refs.completingPartyForm && this.$refs.completingPartyForm.validate()\r\n    this.$refs.mailingAddress && this.$refs.mailingAddress.$refs.addressForm.validate()\r\n  }\r\n\r\n  /** When prop changes, update local object. */\r\n  @Watch('completingParty', { immediate: true })\r\n  private onCompletingParty (): void {\r\n    this.newCompletingParty = this.completingParty\r\n  }\r\n\r\n  /** When completing party form validity changes, sync parent. */\r\n  @Watch('completingPartyFormValid')\r\n  @Emit('valid')\r\n  private onCompletingPartyFormValid (): boolean {\r\n    return (this.completingPartyFormValid && this.mailingAddressValid)\r\n  }\r\n\r\n  /** When mailing address validity changes, sync parent. */\r\n  @Watch('mailingAddressValid')\r\n  @Emit('valid')\r\n  private onMailingAddressValid (): boolean {\r\n    return (this.completingPartyFormValid && this.mailingAddressValid)\r\n  }\r\n\r\n  /** When local data object changes, sync parent. */\r\n  @Watch('newCompletingParty', { deep: true })\r\n  @Emit('update')\r\n  private onNewCompletingParty (): CompletingPartyIF {\r\n    return this.newCompletingParty\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/styles/theme.scss';\r\n\r\n.list-header {\r\n  // NB: same styles as v-data-table header\r\n  color: $gray9;\r\n  font-size: $px-14;\r\n  font-weight: bold;\r\n}\r\n\r\n.list-content {\r\n  border-top: 1px solid $gray3;\r\n\r\n  p {\r\n    font-size: $px-14;\r\n  }\r\n\r\n  .list-subtitle {\r\n    color: $gray9;\r\n    font-weight: bold;\r\n  }\r\n}\r\n\r\n.actions {\r\n  position: absolute;\r\n  right: 0;\r\n  margin-top: -0.5rem;\r\n\r\n  .v-btn {\r\n    min-width: 0.5rem;\r\n  }\r\n\r\n  .v-btn + .v-btn {\r\n    margin-left: 0.5rem;\r\n  }\r\n}\r\n\r\n// Override Base Address font styling\r\n:deep() {\r\n  .address-block {\r\n    font-size: $px-14;\r\n    color: $gray7;\r\n  }\r\n\r\n  .v-chip {\r\n    opacity: 1 !important;\r\n  }\r\n\r\n  .theme--light.v-label {\r\n    font-size: 1rem;\r\n    color: $gray7;\r\n    font-weight: normal;\r\n  }\r\n\r\n  .theme--light.v-input input, .theme--light.v-input textarea {\r\n    color: $gray9;\r\n  }\r\n}\r\n</style>\r\n"],"names":["CompletingParty","Vue","__publicField","v","val","isEqual","__decorateClass","Prop","Watch","Emit","Component","BaseAddress"],"mappings":"ytBA6JA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCAEAC,EAAA,cAMAA,EAAA,wBAGAA,EAAA,sBAEAA,EAAA,sBAGAA,EAAA,iBAGAA,EAAA,uBAGAA,EAAA,gCAAA,IACAA,EAAA,2BAAA,IACAA,EAAA,0BAAA,MAEAA,EAAA,sBAAA,CACAC,GAAA,CAAA,CAAAA,GAAA,2BACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,IAAAA,GAAA,YAAAA,EAAA,SAAA,IAAA,6BAAA,GAGAD,EAAA,uBAAA,CACAC,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAAA,GAAAA,EAAA,QAAA,IAAA,6BAAA,GAGAD,EAAA,qBAAA,CACAC,GAAA,CAAA,CAAAA,GAAA,0BACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,GAAA,CAAA,OAAA,KAAAA,CAAA,GAAA,iBACAA,IAAAA,GAAA,YAAAA,EAAA,SAAA,IAAA,6BAAA,GAIA,IAAA,qBAAA,CACA,MAAA;AAAA,QACA,KAAA,gBAAA,SAAA;AAAA,QACA,KAAA,gBAAA,YAAA,EAAA;AAAA,QACA,KAAA,gBAAA,QAAA;AAAA,OACA,SACA,CAEA,uBAAAC,EAAA,CAEAC,EAAA,QAAA,KAAA,mBAAA,eAAAD,CAAA,IACA,KAAA,mBAAA,eAAAA,EAEA,CAIA,YAAA,CACA,KAAA,MAAA,qBAAA,KAAA,MAAA,oBAAA,WACA,KAAA,MAAA,gBAAA,KAAA,MAAA,eAAA,MAAA,YAAA,UACA,CAIA,mBAAA,CACA,KAAA,mBAAA,KAAA,eACA,CAKA,4BAAA,CACA,OAAA,KAAA,0BAAA,KAAA,mBACA,CAKA,uBAAA,CACA,OAAA,KAAA,0BAAA,KAAA,mBACA,CAKA,sBAAA,CACA,OAAA,KAAA,kBACA,CACA,EAvFAE,EAAA,CAAAC,EAAA,CAAA,QAAA,IAAA,CAAA,EAAA,CAAA,EARAP,EAQA,UAAA,kBAAA,CAAA,EAGAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAXAP,EAWA,UAAA,gBAAA,CAAA,EAEAM,EAAA,CAAAC,EAAA,CAAA,QAAA,IAAA,CAAA,EAAA,CAAA,EAbAP,EAaA,UAAA,gBAAA,CAAA,EAGAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAhBAP,EAgBA,UAAA,WAAA,CAAA,EAGAM,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAnBAP,EAmBA,UAAA,iBAAA,CAAA,EA6CAM,EAAA,CADAE,EAAA,UAAA,CAAA,EA/DAR,EAgEA,UAAA,aAAA,CAAA,EAOAM,EAAA,CADAE,EAAA,kBAAA,CAAA,UAAA,GAAA,CAAA,EAtEAR,EAuEA,UAAA,oBAAA,CAAA,EAOAM,EAAA,CAFAE,EAAA,0BAAA,EACAC,EAAA,OAAA,CAAA,EA7EAT,EA8EA,UAAA,6BAAA,CAAA,EAOAM,EAAA,CAFAE,EAAA,qBAAA,EACAC,EAAA,OAAA,CAAA,EApFAT,EAqFA,UAAA,wBAAA,CAAA,EAOAM,EAAA,CAFAE,EAAA,qBAAA,CAAA,KAAA,GAAA,EACAC,EAAA,QAAA,CAAA,EA3FAT,EA4FA,UAAA,uBAAA,CAAA,EA5FAA,EAAAM,EAAA,CALAI,EAAA,CACA,WAAA,CACA,YAAAC,CACA,CAAA,CACA,CAAA,EACAX,CAAA;;;;;;;;"}