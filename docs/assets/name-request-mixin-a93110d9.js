import{V as f}from"./vue.esm-b1e57a2f.js";import{C as I}from"./_plugin-vue2_normalizer-b11a0120.js";import{l as N}from"./lodash-bc5bedbb.js";var c=(r=>(r.AMALGAMATE="AML",r.ASSUMED="ASSUMED",r.CHANGE_NAME="CHG",r.CONVERSION="CNV",r.DBA="DBA",r.MOVE="MVE",r.NEW_BUSINESS="NEW",r.RESTORE="REH",r.RENEW="REN",r.RESTORATION="REST",r.RESUBMIT="RESUBMIT",r.INFO="INFO",r))(c||{}),a=(r=>(r.APPROVED="APPROVED",r.CANCELLED="CANCELLED",r.COMPLETED="COMPLETED",r.CONDITIONAL="CONDITIONAL",r.CONDITION="CONDITION",r.CONSUMED="CONSUMED",r.DRAFT="DRAFT",r.EXPIRED="EXPIRED",r.HISTORICAL="HISTORICAL",r.HOLD="HOLD",r.INPROGRESS="INPROGRESS",r.PENDING_PAYMENT="PENDING_PAYMENT",r.REFUND_REQUESTED="REFUND_REQUESTED",r.REJECTED="REJECTED",r.NRO_UPDATING="NRO_UPDATING",r.NOT_APPROVED="NOT_APPROVED",r.NOT_FOUND="NOT_FOUND",r.NEED_CONSENT="NEED_CONSENT",r.INVALID="INVALID",r))(a||{}),p=Object.defineProperty,y=Object.getOwnPropertyDescriptor,P=(r,t,n,i)=>{for(var e=i>1?void 0:i?y(t,n):t,o=r.length-1,D;o>=0;o--)(D=r[o])&&(e=(i?D(t,n,e):D(e))||e);return i&&e&&p(t,n,e),e};let O=class extends f{createUtcDate(r,t,n,i=0,e=0){const o=new Date(Date.UTC(r,t,n,i,e)),D=new Date(o.toLocaleString("en-US",{timeZone:"UTC"})),l=new Date(o.toLocaleString("en-US",{timeZone:"America/Vancouver"})),E=D.getTime()-l.getTime();return o.setTime(o.getTime()+E),o}apiToDate(r){return r?(r=r.slice(0,19)+"Z",new Date(r)):null}yyyyMmDdToDate(r){if(!r||r.length!==10)return null;const t=r.split("-"),n=+t[0],i=+t[1],e=+t[2];return this.createUtcDate(n,i-1,e)}dateToYyyyMmDd(r){if(!N.isDate(r)||isNaN(r.getTime()))return null;const t=r.toLocaleDateString("en-US",{timeZone:"America/Vancouver",month:"numeric",day:"numeric",year:"numeric"}),[n,i,e]=t.split("/");return`${e}-${n.padStart(2,"0")}-${i.padStart(2,"0")}`}dateToPacificDate(r,t=!1,n=!1){if(!N.isDate(r)||isNaN(r.getTime()))return null;let i=r.toLocaleDateString("en-US",{timeZone:"America/Vancouver",weekday:n?"long":void 0,month:t?"long":"short",day:"numeric",year:"numeric"});return i=i.replace(".",""),i}yyyyMmDdToPacificDate(r,t=!1,n=!1){return this.dateToPacificDate(this.yyyyMmDdToDate(r),t,n)}dateToPacificTime(r){if(!N.isDate(r)||isNaN(r.getTime()))return null;let t=r.toLocaleTimeString("en-US",{timeZone:"America/Vancouver",hour:"numeric",minute:"2-digit",hour12:!0});return t=t.replace("AM","am").replace("PM","pm"),t}apiToPacificDateTime(r){if(!r)return null;const t=this.apiToDate(r),n=this.dateToPacificDate(t,!0),i=this.dateToPacificTime(t);return`${n} at ${i} Pacific time`}addMonthsToDate(r,t){t||(t="2023-01-01");const n=this.yyyyMmDdToDate(t);return n.setMonth(n.getMonth()+r),this.dateToYyyyMmDd(n)}subtractDates(r,t){r||(r="2023-01-01"),t||(t=this.addMonthsToDate(24,r));const n=this.yyyyMmDdToDate(t),i=this.yyyyMmDdToDate(r),e=n.getMonth()-i.getMonth(),o=12*(n.getFullYear()-i.getFullYear());let D=e+o;return n.getDate()<i.getDate()&&D--,D}};O=P([I({extends:f})],O);var s=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d=(r,t,n,i)=>{for(var e=i>1?void 0:i?u(t,n):t,o=r.length-1,D;o>=0;o--)(D=r[o])&&(e=(i?D(t,n,e):D(e))||e);return i&&e&&s(t,n,e),e};let T=class extends f{validateNameRequest(r,t,n,i,e){var l,E;const o=this.isNrInvalid(r);if(o)throw new Error(`Invalid Name Request: ${o}`);if(r.request_action_cd!==t)throw new Error("Incorrect Request Action Code");if(n&&r.corpNum!==n)throw new Error("Incorrect Business ID");if(e&&((l=r.applicants)==null?void 0:l.emailAddress)!==e)throw new Error("Incorrect Email Address");if(i&&((E=r.applicants)==null?void 0:E.phoneNumber)!==i)throw new Error("Incorrect Phone Number");const D=this.getNrState(r);if(D!==a.APPROVED&&D!==a.CONDITIONAL)throw new Error(`Invalid Name Request state: ${D}`);return r}isNrInvalid(r){return r?r.applicants?r.expirationDate?r.legalType?this.getNrApprovedName(r)?r.nrNum?r.requestTypeCd?r.request_action_cd?r.state?null:"Invalid NR state":"Invalid NR request action code":"Invalid NR request type code":"Invalid NR number":"Invalid NR approved name":"Invalid NR legal type":`Invalid NR expiration date
(NR may still be processing)`:"Invalid NR applicants":"Invalid NR object"}getNrState(r){return r?r.state===a.CONDITIONAL&&r.consentFlag!==null&&r.consentFlag!=="R"&&r.consentFlag!=="N"?a.NEED_CONSENT:[a.APPROVED,a.CONDITIONAL,a.EXPIRED,a.CONSUMED].includes(r.state)?r.state:a.NOT_APPROVED:null}getNrApprovedName(r){var t,n;return((t=r==null?void 0:r.names)==null?void 0:t.length)>0?(n=r.names.find(i=>[a.APPROVED,a.CONDITION].includes(i.state)))==null?void 0:n.name:null}getNrRequestDesc(r){switch(r){case c.NEW_BUSINESS:return"New Business";case c.CHANGE_NAME:return"Change of Name";case c.CONVERSION:return"Conversion";case c.RESTORE:return"Restoration"}return null}};T=d([I({})],T);export{O as D,T as N};
//# sourceMappingURL=name-request-mixin-a93110d9.js.map
