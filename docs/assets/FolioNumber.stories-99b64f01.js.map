{"version":3,"file":"FolioNumber.stories-99b64f01.js","sources":["../../src/components/folio-number/FolioNumber.vue"],"sourcesContent":["<template>\n  <div id=\"folio-number\">\n    <!-- Display Folio Number -->\n    <v-row\n      v-if=\"!isEditing\"\n      id=\"display-folio-number\"\n      no-gutters\n    >\n      <v-col cols=\"3\">\n        <label class=\"reference-number-label\">\n          <div>Business Folio or<br>Reference Number</div>\n          <v-chip\n            v-if=\"hasFolioNumberChanged\"\n            x-small\n            label\n            color=\"primary\"\n            text-color=\"white\"\n          >\n            {{ editedLabel }}\n          </v-chip>\n        </label>\n      </v-col>\n\n      <v-col :cols=\"hideActions ? '9' : '7'\">\n        <div id=\"folio-number-readonly\">\n          {{ !!folioNumber ? folioNumber : 'None' }}\n        </div>\n      </v-col>\n\n      <!-- Edit Actions -->\n      <v-col\n        v-if=\"!hideActions\"\n        cols=\"2\"\n        class=\"mt-n2\"\n      >\n        <div class=\"edit-actions mr-4\">\n          <v-btn\n            v-if=\"hasFolioNumberChanged\"\n            text\n            color=\"primary\"\n            class=\"undo-button\"\n            @click=\"onUndoClicked()\"\n          >\n            <v-icon small>\n              mdi-undo\n            </v-icon>\n            <span>Undo</span>\n          </v-btn>\n\n          <v-tooltip\n            v-else\n            top\n            nudge-right=\"3\"\n            content-class=\"top-tooltip\"\n            transition=\"fade-transition\"\n          >\n            <template #activator=\"{ on }\">\n              <v-btn\n                text\n                color=\"primary\"\n                class=\"edit-button\"\n                v-on=\"on\"\n                @click=\"isEditing = true\"\n              >\n                <v-icon small>\n                  mdi-pencil\n                </v-icon>\n                <span>{{ editLabel }}</span>\n              </v-btn>\n            </template>\n            <span>No fee to change</span>\n          </v-tooltip>\n\n          <!-- Drop Down Actions -->\n          <span\n            v-if=\"hasFolioNumberChanged\"\n            class=\"drop-down-actions\"\n          >\n            <v-menu\n              v-model=\"dropdown\"\n              offset-y\n              left\n              nudge-bottom=\"4\"\n            >\n              <template #activator=\"{ on }\">\n                <v-btn\n                  text\n                  small\n                  color=\"primary\"\n                  class=\"more-button\"\n                  v-on=\"on\"\n                >\n                  <v-icon>{{ dropdown ? 'mdi-menu-up' : 'mdi-menu-down' }}</v-icon>\n                </v-btn>\n              </template>\n              <v-list>\n                <v-list-item\n                  class=\"v-list-item change-button\"\n                  @click=\"isEditing = true; dropdown = false\"\n                >\n                  <v-list-item-subtitle>\n                    <v-icon\n                      small\n                      color=\"primary\"\n                    >mdi-pencil</v-icon>\n                    <span class=\"drop-down-action ml-1\">Change</span>\n                  </v-list-item-subtitle>\n                </v-list-item>\n              </v-list>\n            </v-menu>\n          </span>\n        </div>\n      </v-col>\n    </v-row>\n\n    <!-- Edit Folio Number -->\n    <v-form\n      v-else\n      id=\"edit-folio-number\"\n      v-model=\"formValid\"\n      @submit.prevent=\"onFormSubmit()\"\n    >\n      <!-- Line 1 -->\n      <v-row no-gutters>\n        <v-col cols=\"3\">\n          <label :class=\"{'error-text': invalidSection}\">\n            <strong>Business Folio or<br>Reference Number</strong>\n          </label>\n        </v-col>\n        <v-col cols=\"9\" />\n      </v-row>\n\n      <!-- Line 2 -->\n      <v-row no-gutters>\n        <v-col cols=\"3\" />\n        <v-col\n          cols=\"9\"\n          class=\"my-4\"\n        >\n          <p>\n            This is the Folio or Reference Number for this business for your own tracking purposes.\n            There is no fee to change this number. Any changes made will be applied immediately.\n          </p>\n        </v-col>\n      </v-row>\n\n      <!-- Line 3 -->\n      <v-row no-gutters>\n        <v-col cols=\"3\" />\n        <v-col cols=\"9\">\n          <v-text-field\n            id=\"folio-number-input\"\n            v-model=\"folioNumber\"\n            filled\n            persistent-hint\n            autocomplete=\"chrome-off\"\n            label=\"Folio or Reference Number (Optional)\"\n            :name=\"Math.random()\"\n            :rules=\"rules\"\n          />\n        </v-col>\n      </v-row>\n\n      <!-- Form Actions -->\n      <v-row no-gutters>\n        <v-col>\n          <div class=\"form-actions\">\n            <v-btn\n              large\n              color=\"primary\"\n              class=\"save-button\"\n              type=\"submit\"\n              value=\"Submit\"\n            >\n              <span>Save</span>\n            </v-btn>\n            <v-btn\n              large\n              outlined\n              color=\"primary\"\n              class=\"cancel-button\"\n              @click=\"onCancelClicked()\"\n            >\n              <span>Cancel</span>\n            </v-btn>\n          </div>\n        </v-col>\n      </v-row>\n    </v-form>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nimport { Component, Emit, Prop, Watch } from 'vue-property-decorator'\n\n@Component({})\nexport default class FolioNumber extends Vue {\n  // Props\n  @Prop({ default: null }) readonly initialValue!: string\n  @Prop({ default: null }) readonly originalValue!: string\n  @Prop({ default: false }) readonly hideActions!: boolean\n  @Prop() readonly editLabel!: string\n  @Prop() readonly editedLabel!: string\n  @Prop({ default: false }) readonly invalidSection!: boolean\n\n  // Local properties\n  private isEditing = false\n  private formValid = false\n  private folioNumber = ''\n  private dropdown = false\n\n  // Validation rules\n  readonly rules: Array<(v) => boolean | string> = [\n    (v: string) => (!v || v.length <= 30) || 'Maximum 30 characters reached'\n  ]\n\n  /** Whether folio number has changed from original value. */\n  get hasFolioNumberChanged (): boolean {\n    const fn = this.folioNumber || null\n    const ov = this.originalValue || null\n    return (fn !== ov)\n  }\n\n  /** When Undo is clicked, restores the folio number to the original value. */\n  protected onUndoClicked (): void {\n    this.folioNumber = this.originalValue\n    this.emitNewFolioNumber()\n    this.emitHaveChanges()\n    this.isEditing = false\n  }\n\n  /** When form is submitted, accepts the entered folio number. */\n  protected onFormSubmit (): void {\n    if (this.formValid) {\n      this.emitNewFolioNumber()\n      this.emitHaveChanges()\n      this.isEditing = false\n    }\n  }\n\n  /** When Cancel is clicked, undoes the current change. */\n  protected onCancelClicked (): void {\n    this.folioNumber = this.initialValue\n    this.isEditing = false\n  }\n\n  /** Updates local value initially and when prop has changed. */\n  @Watch('initialValue', { deep: true, immediate: true })\n  private onInitialValueChanged (): void {\n    this.folioNumber = this.initialValue\n  }\n\n  /** Informs parent of new folio number. */\n  @Emit('newFolioNumber')\n  private emitNewFolioNumber (): string {\n    return this.folioNumber\n  }\n\n  /** Informs parent whether we have changes. */\n  @Emit('haveChanges')\n  private emitHaveChanges (): boolean {\n    return this.hasFolioNumberChanged\n  }\n\n  /** Informs parent whether we are in editing mode. */\n  @Watch('isEditing')\n  @Emit('isEditing')\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private emitIsEditing (val: boolean): void {}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/styles/theme.scss';\n\n.reference-number-label{\n  font-weight: bold;\n  color: $gray9;\n}\n\n:deep(.v-input .v-label) {\n  font-weight: normal;\n  color: $gray7;\n}\n\n#folio-number-readonly {\n  color: $gray7;\n}\n\n.edit-actions {\n  position: absolute;\n  right: 0;\n\n  .v-btn {\n    min-width: 0.5rem;\n  }\n\n  .undo-button {\n    border-right: 1px solid $gray1;\n  }\n}\n\n.form-actions {\n  display: flex;\n  justify-content: flex-end;\n\n  .v-btn + .v-btn {\n    margin-left: 0.5rem;\n  }\n\n  .v-btn {\n    min-width: 6.5rem;\n  }\n}\n</style>\n"],"names":["FolioNumber","Vue","__publicField","v","fn","ov","val","__decorateClass","Prop","Watch","Emit","Component"],"mappings":"ygBAqMA,IAAAA,EAAA,cAAAC,CAAA,CAAA,kCAEAC,EAAA,qBACAA,EAAA,sBACAA,EAAA,oBACAA,EAAA,kBACAA,EAAA,oBACAA,EAAA,uBAGAA,EAAA,iBAAA,IACAA,EAAA,iBAAA,IACAA,EAAA,mBAAA,IACAA,EAAA,gBAAA,IAGAA,EAAA,aAAA,CACAC,GAAA,CAAAA,GAAAA,EAAA,QAAA,IAAA,+BAAA,GAIA,IAAA,uBAAA,CACA,MAAAC,EAAA,KAAA,aAAA,KACAC,EAAA,KAAA,eAAA,KACA,OAAAD,IAAAC,CACA,CAGA,eAAA,CACA,KAAA,YAAA,KAAA,cACA,KAAA,mBAAA,EACA,KAAA,gBAAA,EACA,KAAA,UAAA,EACA,CAGA,cAAA,CACA,KAAA,YACA,KAAA,mBAAA,EACA,KAAA,gBAAA,EACA,KAAA,UAAA,GAEA,CAGA,iBAAA,CACA,KAAA,YAAA,KAAA,aACA,KAAA,UAAA,EACA,CAIA,uBAAA,CACA,KAAA,YAAA,KAAA,YACA,CAIA,oBAAA,CACA,OAAA,KAAA,WACA,CAIA,iBAAA,CACA,OAAA,KAAA,qBACA,CAMA,cAAAC,EAAA,CAAA,CACA,EAvEAC,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAFAR,EAEA,UAAA,eAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,KAAA,CAAA,EAHAR,EAGA,UAAA,gBAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAJAR,EAIA,UAAA,cAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,EALAR,EAKA,UAAA,YAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,EANAR,EAMA,UAAA,cAAA,CAAA,EACAO,EAAA,CAAAC,EAAA,CAAA,QAAA,GAAA,CAAA,EAPAR,EAOA,UAAA,iBAAA,CAAA,EA6CAO,EAAA,CADAE,EAAA,eAAA,CAAA,KAAA,GAAA,UAAA,GAAA,CAAA,EAnDAT,EAoDA,UAAA,wBAAA,CAAA,EAMAO,EAAA,CADAG,EAAA,gBAAA,CAAA,EAzDAV,EA0DA,UAAA,qBAAA,CAAA,EAMAO,EAAA,CADAG,EAAA,aAAA,CAAA,EA/DAV,EAgEA,UAAA,kBAAA,CAAA,EAQAO,EAAA,CAHAE,EAAA,WAAA,EACAC,EAAA,WAAA,CAAA,EAtEAV,EAwEA,UAAA,gBAAA,CAAA,EAxEAA,EAAAO,EAAA,CADAI,EAAA,CAAA,CAAA,CAAA,EACAX,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}