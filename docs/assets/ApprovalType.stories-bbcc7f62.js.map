{"version":3,"file":"ApprovalType.stories-bbcc7f62.js","sources":["../../src/enums/approval-types.ts","../../src/components/approval-type/ApprovalType.vue"],"sourcesContent":["/** Restoration approval types. */\r\nexport enum ApprovalTypes {\r\n  VIA_COURT_ORDER = 'courtOrder',\r\n  VIA_REGISTRAR = 'registrar'\r\n}\r\n","<template>\r\n  <div id=\"approval-type\">\r\n    <v-row no-gutters>\r\n      <v-col\r\n        cols=\"12\"\r\n        sm=\"3\"\r\n        class=\"pr-4\"\r\n      >\r\n        <label :class=\"{ 'error-text': invalidSection }\">Approval Type</label>\r\n      </v-col>\r\n      <v-col\r\n        cols=\"12\"\r\n        sm=\"9\"\r\n        class=\"mt-n4\"\r\n      >\r\n        <v-radio-group\r\n          v-model=\"approvalTypeSelected\"\r\n          class=\"payment-group pt-0\"\r\n          @change=\"radioButtonChanged\"\r\n        >\r\n          <!-- COURT ORDER section -->\r\n          <template v-if=\"!isCourtOrderRadio\">\r\n            <span class=\"v-label ml-2 mb-2\">{{ getRadioText(ApprovalTypes.VIA_COURT_ORDER) }}</span>\r\n          </template>\r\n          <template v-else>\r\n            <v-radio\r\n              id=\"court-order-radio\"\r\n              class=\"mb-n3\"\r\n              :label=\"getRadioText(ApprovalTypes.VIA_COURT_ORDER)\"\r\n              :value=\"ApprovalTypes.VIA_COURT_ORDER\"\r\n            />\r\n          </template>\r\n          <v-form\r\n            id=\"court-num-form\"\r\n            ref=\"courtNumRef\"\r\n            v-model=\"valid\"\r\n            class=\"mt-8 ml-2\"\r\n          >\r\n            <v-expand-transition class=\"pb-0 mb-0\">\r\n              <v-text-field\r\n                v-if=\"approvalTypeSelected === ApprovalTypes.VIA_COURT_ORDER\"\r\n                id=\"court-order-number-input\"\r\n                v-model=\"courtOrderNumberText\"\r\n                label=\"Court Order Number\"\r\n                :rules=\"courtOrderNumRules\"\r\n                hide-details=\"auto\"\r\n                filled\r\n                @input=\"courtOrderNumberChanged\"\r\n                @update:error=\"emitValidationError($event)\"\r\n              />\r\n            </v-expand-transition>\r\n          </v-form>\r\n          <!-- REGISTRAR section -->\r\n          <v-radio\r\n            v-if=\"!isCourtOrderOnly\"\r\n            id=\"registrar-radio\"\r\n            class=\"mb-n5 pt-2\"\r\n            :label=\"getRadioText(ApprovalTypes.VIA_REGISTRAR)\"\r\n            :value=\"ApprovalTypes.VIA_REGISTRAR\"\r\n          />\r\n          <v-expand-transition>\r\n            <div\r\n              v-if=\"approvalTypeSelected === ApprovalTypes.VIA_REGISTRAR\"\r\n              flat\r\n            >\r\n              <div class=\"ml-8 mt-3\">\r\n                <span class=\"v-label\">Enter the date the Notice of the Application for Restoration was published in\r\n                  the BC Gazette:\r\n                </span>\r\n                <DatePicker\r\n                  id=\"date-picker-notice\"\r\n                  ref=\"noticeDateRef\"\r\n                  class=\"mt-2\"\r\n                  title=\"Select Date\"\r\n                  :nudgeRight=\"150\"\r\n                  :initialValue=\"noticeDate\"\r\n                  :inputRules=\"datePickerRules\"\r\n                  @emitDateSync=\"noticeDateChanged($event)\"\r\n                />\r\n              </div>\r\n              <div class=\"ml-8\">\r\n                <span class=\"v-label\">Enter the date the Application for Restoration was mailed to the company:</span>\r\n                <DatePicker\r\n                  id=\"date-picker-application\"\r\n                  ref=\"applicationDateRef\"\r\n                  class=\"mt-2\"\r\n                  title=\"Select Date\"\r\n                  :nudgeRight=\"150\"\r\n                  :initialValue=\"applicationDate\"\r\n                  :inputRules=\"datePickerRules\"\r\n                  @emitDateSync=\"applicationDateChanged($event)\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </v-expand-transition>\r\n        </v-radio-group>\r\n      </v-col>\r\n    </v-row>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue from 'vue'\r\nimport { Component, Emit, Prop } from 'vue-property-decorator'\r\nimport { ApprovalTypes } from '@bcrs-shared-components/enums'\r\nimport { FormIF } from '@bcrs-shared-components/interfaces'\r\nimport { DatePicker } from '@bcrs-shared-components/date-picker'\r\n\r\n@Component({\r\n  components: {\r\n    DatePicker\r\n  }\r\n})\r\nexport default class ApprovalType extends Vue {\r\n  // Refs\r\n  $refs!: Vue['$refs'] & {\r\n    courtNumRef: FormIF\r\n  }\r\n\r\n  /** Draft court order number. */\r\n  @Prop({ default: '' }) readonly courtOrderNumber!: string\r\n\r\n  /** Whether approved by the registrar. */\r\n  @Prop({ default: false }) readonly approvedByRegistrar!: boolean\r\n\r\n  /** filing name used in radio options. */\r\n  @Prop({ default: 'restoration' }) readonly filingType!: string\r\n\r\n  /** Show only the court order option; remove via registrar option. */\r\n  @Prop({ default: false }) readonly isCourtOrderOnly!: boolean\r\n\r\n  /** Draft notice date. */\r\n  @Prop({ default: '' }) readonly noticeDate!: string\r\n\r\n  /** Draft application date. */\r\n  @Prop({ default: '' }) readonly applicationDate!: string\r\n\r\n  /** Whether this section is invalid. */\r\n  @Prop({ default: false }) readonly invalidSection!: boolean\r\n\r\n  /** Whether the display of court order section is a radio button. */\r\n  @Prop({ default: true }) readonly isCourtOrderRadio!: boolean\r\n\r\n  // Local properties\r\n  private courtOrderNumberText = ''\r\n  private valid = false\r\n  private approvalTypeSelected = ''\r\n  private noticeDateText = ''\r\n  private applicationDateText = ''\r\n\r\n  // For template\r\n  readonly ApprovalTypes = ApprovalTypes\r\n\r\n  // Date Picker Rules\r\n  protected readonly datePickerRules = [(v: string) => !!v || 'Date is required']\r\n\r\n  // Text Field Rules\r\n  protected readonly courtOrderNumRules = [\r\n    (v: string) => (!v || !/^\\s/g.test(v)) || 'Invalid spaces', // leading spaces\r\n    (v: string) => (!v || !/\\s$/g.test(v)) || 'Invalid spaces', // trailing spaces\r\n    (v: string) => (!v || !(v.length < 5)) || 'Court order number is invalid',\r\n    (v: string) => (!v || !(v.length > 20)) || 'Court order number is invalid',\r\n    (v: string) => !!v || 'A Court Order number is required'\r\n  ]\r\n\r\n  /** Called when component is mounted. */\r\n  mounted (): void {\r\n    // Copy props to mutable properties\r\n    if (this.approvedByRegistrar) {\r\n      this.courtOrderNumberText = ''\r\n      this.approvalTypeSelected = ApprovalTypes.VIA_REGISTRAR\r\n    } else if (this.courtOrderNumber) {\r\n      this.courtOrderNumberText = this.courtOrderNumber\r\n      this.approvalTypeSelected = ApprovalTypes.VIA_COURT_ORDER\r\n    } else {\r\n      // Default state (no button selected)\r\n      this.radioButtonChanged('')\r\n    }\r\n    if (!this.isCourtOrderRadio) {\r\n      this.approvalTypeSelected = ApprovalTypes.VIA_COURT_ORDER\r\n    }\r\n  }\r\n\r\n  /** Triggers the form validation. */\r\n  public validate (): boolean {\r\n    if (this.approvalTypeSelected === ApprovalTypes.VIA_COURT_ORDER) {\r\n      let status = this.$refs.courtNumRef.validate()\r\n      this.$emit('valid', status)\r\n      return status\r\n    } else if (this.approvalTypeSelected === ApprovalTypes.VIA_REGISTRAR) {\r\n      // Emit true (valid) if both dates were selected. Emit false (invalid) if at least one was empty.\r\n      let status = (!!this.noticeDateText && !!this.applicationDateText)\r\n      this.$emit('valid', status)\r\n      return status\r\n    } else {\r\n      // Default state. Emit false (invalid).\r\n      return false\r\n    }\r\n  }\r\n\r\n  private emitValidationError (event: boolean): void {\r\n    this.$emit('valid', !event)\r\n  }\r\n\r\n  // Emit the approval type (radio button selected).\r\n  @Emit('radioButtonChange')\r\n  private radioButtonChanged (event: string): void {\r\n    if (event === ApprovalTypes.VIA_REGISTRAR) {\r\n      this.courtOrderNumberText = ''\r\n      this.courtOrderNumberChanged('')\r\n    } else if (event === ApprovalTypes.VIA_COURT_ORDER) {\r\n      this.noticeDateChanged('')\r\n      this.applicationDateChanged('')\r\n      this.$emit('valid', false)\r\n    } else {\r\n      // Default State.\r\n      this.$emit('valid', false)\r\n    }\r\n  }\r\n\r\n  // Emit the court number.\r\n  @Emit('courtNumberChange')\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  private courtOrderNumberChanged (event: string): void {\r\n    this.validate()\r\n  }\r\n\r\n  private getRadioText (option: string): string {\r\n    if (option === ApprovalTypes.VIA_COURT_ORDER && this.isCourtOrderRadio) {\r\n      return `This ${this.filingType} is approved by court order.`\r\n    } else if (option === ApprovalTypes.VIA_COURT_ORDER && !this.isCourtOrderRadio) {\r\n      return 'Enter a Court Order number, as the restoration of this company was ordered by the court:'\r\n    }\r\n    if (option === ApprovalTypes.VIA_REGISTRAR) {\r\n      return `This ${this.filingType} is approved by registrar.`\r\n    }\r\n    return '[error]'\r\n  }\r\n\r\n  /**\r\n   * Emit the date the notice of the application for restoration was published in the BC Gazette.\r\n   * Validate that a date was successfully selected.\r\n   * @param noticeDate is the date that was selected (if any)\r\n   */\r\n  @Emit('update:noticeDate')\r\n  private noticeDateChanged (noticeDate: string): string {\r\n    this.noticeDateText = noticeDate\r\n    this.validate()\r\n    return noticeDate\r\n  }\r\n\r\n  /**\r\n   * Emit the date the application for restoration was mailed to the company.\r\n   * Validate that a date was successfully selected.\r\n   * @param applicationDate is the date that was selected (if any)\r\n   */\r\n  @Emit('update:applicationDate')\r\n  private applicationDateChanged (applicationDate: string): string {\r\n    this.applicationDateText = applicationDate\r\n    this.validate()\r\n    return applicationDate\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/assets/styles/theme.scss';\r\n\r\n:deep() {\r\n  .v-card__actions {\r\n    justify-content: flex-end;\r\n  }\r\n\r\n  .v-input .v-label {\r\n    font-weight: normal;\r\n    color: $gray7;\r\n  }\r\n\r\n  .theme--light.v-input input {\r\n    font-weight: normal;\r\n    color: $gray7;\r\n  }\r\n}\r\n</style>\r\n"],"names":["ApprovalTypes","ApprovalType","Vue","__publicField","v","status","event","option","noticeDate","applicationDate","__decorateClass","Prop","Emit","Component","DatePicker"],"mappings":"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"}